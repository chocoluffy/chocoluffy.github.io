<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title><![CDATA[ä½™èˆœå“²çš„ One Piece]]></title>
  
  <link href="/atom.xml" rel="self"/>
  <link href="http://chocoluffy.com/"/>
  <updated>2016-05-26T23:09:29.000Z</updated>
  <id>http://chocoluffy.com/</id>
  
  <author>
    <name><![CDATA[Shunzhe Yu]]></name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title><![CDATA[socket.ioå¼€å‘å¤šäººèŠå¤©å®¤æ•™ç¨‹]]></title>
    <link href="http://chocoluffy.com/2016/05/23/socket-io%E5%BC%80%E5%8F%91%E5%A4%9A%E4%BA%BA%E8%81%8A%E5%A4%A9%E5%AE%A4%E6%95%99%E7%A8%8B/"/>
    <id>http://chocoluffy.com/2016/05/23/socket-ioå¼€å‘å¤šäººèŠå¤©å®¤æ•™ç¨‹/</id>
    <published>2016-05-24T02:43:41.000Z</published>
    <updated>2016-05-26T23:09:29.000Z</updated>
    <content type="html"><![CDATA[<p>ç”¨socket.ioæ­é…expresså†™çš„ä¸€ä¸ªå¤šäººèŠå¤©å®¤åº”ç”¨ï¼Œ åŒæ—¶å€Ÿè¿™ä¸ªæœºä¼šå¤ä¹ äº†ä¸€ä¸‹socketåŠTCP/IPçš„ä¸€äº›ç»†èŠ‚çŸ¥è¯†ï¼Œ åœ¨UIä¸Šç”¨jqueryï¼Œ ç®€æ´è€Œå¿«é€Ÿåœ°å®Œæˆä¸€äº›åŸºç¡€å‰ç«¯æ ·å¼çš„å¼€å‘ï¼Œ å¼€å‘æ—¶ç”¨nodemonå’Œbrowser-syncæ¥è¾…åŠ©å¼€å‘æµç¨‹ã€‚<a href="http://chatroom.sb6imr3gpx.us-west-2.elasticbeanstalk.com/" target="_blank" rel="external">åœ¨çº¿Demo-ç½‘é¡µç‰ˆ</a>, <a href="https://github.com/chocoluffy/chatroom" target="_blank" rel="external">githubæºä»£ç </a>, æ¬¢è¿æäº¤bug issueæˆ–è€…pull request~</p>
<a id="more"></a>
<p><img src="http://ac-TC2Vc5Tu.clouddn.com/1a5c1f59080e5cc1.png" alt="socket.io"></p>
<h2 id="ä»€ä¹ˆæ˜¯socket?">ä»€ä¹ˆæ˜¯socket?</h2><p>socketæ˜¯å¯¹TCP/IPåè®®çš„å°è£…ï¼Œ æœ¬èº«æ˜¯ä¸€ä¸ªè°ƒç”¨æ¥å£ï¼Œ ä¹Ÿå°±æ˜¯æˆ‘ä»¬å¸¸è¯´çš„APIï¼Œ ç”¨socketå¯ä»¥è®©ç¨‹åºå‘˜æ›´æ–¹ä¾¿çš„ä½¿ç”¨TCP/IPåè®®è€Œå·²ã€‚ </p>
<p>åœ¨å­¦ä¹ Cè¯­è¨€(csc209)çš„æ—¶å€™å¤§å®¶æ¥è§¦åˆ°çš„socketçš„æ¥å£å‡½æ•°æ¯”å¦‚<code>create/listen/connect/accept/send/read/write</code>ï¼Œ å®é™…ä¸Šæ­£æ˜¯é’ˆå¯¹TCPç¼–ç¨‹çš„æ¥å£ï¼Œ åœ¨è¯¾ç¨‹é‡Œæˆ‘ä»¬ç”¨Cè¯­è¨€æ¥å®ç°TCPæœ€åŸºç¡€çš„ä¸€ä¸ªsocketé“¾æ¥ï¼Œ ç›‘å¬ï¼Œ åŒ…æ‹¬server-clientä¹‹é—´çš„é€šä¿¡ï¼ŒåŒæ ·çš„ï¼Œ socketè¿™ä¸ªè°ƒç”¨æ¥å£ä¹Ÿå¯ä»¥ç”¨java, pythonå’Œnodejsä»»ä½•åç«¯è¯­è¨€æ¥å®ç°ï¼Œ ä¹Ÿä¼šå‡ºç°åœ¨å„ç§å„æ ·éœ€è¦æœåŠ¡å™¨ç«¯å’Œå®¢æˆ·ç«¯é€šä¿¡çš„åº”ç”¨ä¸­ã€‚</p>
<p>è€Œä»€ä¹ˆæ˜¯TCPå‘¢ï¼Ÿ</p>
<p>Transmission Control Protocol (TCP) å°±æ˜¯å…¶ä¸­å‘é€æ–‡æœ¬ä¿¡æ¯çš„<strong>è§„åˆ™è§„èŒƒ</strong>è€Œå·²ã€‚ TCPä¾èµ–æ›´åº•å±‚çš„å‡½æ•°å®ç°æ¥åœ¨ç½‘ç»œä¸Šä¼ è¾“binary dataã€‚ è¿™é‡Œå’Œå¤§å®¶ä»‹ç»telnet\puttyè¿™äº›åˆ©ç”¨TCPåœ¨command lineä¸Šå¸®åŠ©ä½ å‘é€å’Œæ¥å—çº¯æ–‡æœ¬æ¶ˆæ¯çš„åº”ç”¨ï¼Œ ä½ å¯ä»¥åˆ©ç”¨telnetæ¥ï¼Œ æ¯”å¦‚ï¼Œ å‘é€æ¶ˆæ¯åˆ°google.comï¼š<code>telnet google.com 80</code> åœ¨ç«¯å£80è¿æ¥åˆ°google.com(80é»˜è®¤ç»™ç½‘ç»œè¯·æ±‚)ã€‚æˆ‘ä»¬å½“ç„¶ä¸ä¼šéšä¾¿å‘æ–‡æœ¬æ¶ˆæ¯ç»™google.comï¼Œ å› ä¸ºæˆ‘ä»¬çŸ¥é“google.comä¸ä¼šæ¥å—éšæ„çš„ï¼Œ æ²¡æœ‰ç»“æ„çš„æ–‡æœ¬è¯·æ±‚ã€‚ æ˜¯çš„ï¼Œ æˆ‘ä»¬éœ€è¦ä¸€ä¸ª<strong>æ ‡å‡†(protocol)</strong>æ¥è§„èŒƒäº¤æµçš„æ–¹å¼ã€‚æˆ‘ä»¬åœ¨æµè§ˆå™¨è¾“å‡º<a href="http://google.comï¼Œ" target="_blank" rel="external">http://google.comï¼Œ</a> è¿™æ„å‘³ç€ï¼š</p>
<ul>
<li>åœ¨port 80ç”¨TCPåè®®è¿æ¥google.comçš„æœåŠ¡å™¨ã€‚</li>
<li>è¯·æ±‚è¿”å›èµ„æºâ€œï¼â€ï¼ˆé»˜è®¤èµ„æºï¼‰ã€‚</li>
<li>å°†è¯·æ±‚ç”¨httpï¼ˆhypertext transfer protocolï¼‰çš„å½¢å¼æ¥è§„èŒƒã€‚</li>
</ul>
<h2 id="ä»€ä¹ˆæ˜¯socket-io?">ä»€ä¹ˆæ˜¯socket.io?</h2><p>â€œSocket.IO goes a step beyond just providing an easy-to-use and more robust API on top<br>of web sockets. It also provides the ability to seamlessly use other real-time protocols if WebSockets are not available. For example, it will fall back on JSON long polling in the absence of WebSocket support.â€ from Rohit Rai</p>
<p>ç®€å•æ¥è¯´ï¼Œsocket.ioæ¥socketæœ¬èº«çš„æ¥å£å‡½æ•°ä¸Šå†æŠ½è±¡äº†ä¸€å±‚ï¼Œ è®©ç¨‹åºå‘˜å¯ä»¥ä¸“æ³¨åº”ç”¨é€»è¾‘çš„å¼€å‘ï¼Œ è€Œç”±socket.ioæ¥æ“ä½œåº•å±‚çš„å‡½æ•°è°ƒç”¨å’Œä¼˜åŒ–ï¼Œ æ¯”å¦‚æœ‰äº›æ—¶å€™ï¼Œ ç”±äºæµè§ˆå™¨çš„åŸå› ä¸èƒ½ä½¿ç”¨web socketæ—¶ï¼Œ å¯ä»¥é»˜è®¤ç”¨long pollingæ¥è¾¾åˆ°åŒæ ·çš„æ•ˆæœã€‚</p>
<p>åœ¨socket.ioå‡ºç°ä¹‹å‰ï¼Œæˆ‘ä»¬ä¼šé‡‡ç”¨å¾ˆå¤šçš„hackæ¥è§£å†³ä¸€ä¸ªé—®é¢˜ï¼š<strong>æ€æ ·åœ¨serverå’Œclientç«¯æ›´æœ‰æ•ˆç‡åœ°åŒå‘ä¼ é€’ä¿¡æ¯ï¼Ÿ</strong>æ¯”å¦‚ä¸Šæ–‡æåˆ°çš„long polling,  clientç«¯å‘é€XHRè¯·æ±‚ï¼Œ ç„¶ååœ¨serverç«¯æŒ‚ä½ï¼Œ ç›´åˆ°serveræ”¶åˆ°æ•°æ®ï¼Œ å°±å›ä¼ æ•°æ®ï¼Œ è¿˜æ˜¯æ¯”è¾ƒå¸¸è§çš„hackã€‚</p>
<p>ç›´åˆ°HTML5çš„å¤§è§„æ¨¡ä½¿ç”¨ï¼Œ å‡ºç°äº†ä¸¤ç§ä»æœåŠ¡å™¨ç«¯æ¨é€æ•°æ®åˆ°å®¢æˆ·ç«¯çš„æ–°æ–¹æ³•ï¼Œ ä¸€ä¸ªæ˜¯Server-Sent Events (SSE)ï¼Œ å¦ä¸€ä¸ªæ˜¯ä»Šå¤©çš„ä¸»è§’ï¼Œ æ”¯æŒåŒå‘é€šä¿¡çš„WebSockets.</p>
<h2 id="æ€ä¹ˆç”¨socket-io?">æ€ä¹ˆç”¨socket.io?</h2><p>ä¸‹é¢ç”¨ä¸€ä¸ªç®€å•çš„ä¾‹å­æ¥è¯´æ˜socketçš„ä½¿ç”¨ï¼Œ å¾ˆæ˜ç¡®ï¼Œ åœ¨æœåŠ¡å™¨æ®µå½“æœ‰æ–°çš„è¿æ¥çš„æ—¶å€™ï¼Œ å‘å®¢æˆ·ç«¯å‘é€ä¸€ä¸ªâ€greeting-from-serverâ€çš„æ¶ˆæ¯ï¼Œ åŒæ—¶è¿˜ç›‘å¬å®¢æˆ·ç«¯å‘æ¥çš„â€greeting-from-clientâ€çš„äº‹ä»¶ï¼Œå°†æ¶ˆæ¯æ‰“å°åœ¨consoleé‡Œé¢ã€‚ </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// plain http's version of server.js</span></span><br><span class="line"><span class="keyword">var</span> http = <span class="built_in">require</span>(<span class="string">'http'</span>);</span><br><span class="line">	socketIO = <span class="built_in">require</span>(<span class="string">'socket.io'</span>);</span><br><span class="line">	fs = <span class="built_in">require</span>(<span class="string">'fs'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// if using express framework, we can define router easier!</span></span><br><span class="line"><span class="keyword">var</span> server = http.createServer(<span class="function"><span class="keyword">function</span>(<span class="params">req, res</span>)</span>&#123;</span><br><span class="line">	fs.readFile(__dirname + <span class="string">'/index.html'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">err, data</span>)</span>&#123;</span><br><span class="line">		res.writeHead(<span class="number">200</span>);</span><br><span class="line">		res.end(data);</span><br><span class="line">	&#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// The above code is used for create a server to serve the static index.html file under the current directory. The following part is the main idea of how to use socket.io to construct and listen to events.</span></span><br><span class="line">server.listen(<span class="number">3000</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'listen on http://localhost:3000'</span>);</span><br><span class="line"></span><br><span class="line">io = socketIO(server);</span><br><span class="line"></span><br><span class="line">io.on(<span class="string">'connection'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">socket</span>)</span>&#123;</span><br><span class="line">	socket.emit(<span class="string">'greeting-from-server'</span>, &#123;</span><br><span class="line">		greeting: <span class="string">'Hello client!'</span></span><br><span class="line">	&#125;);</span><br><span class="line"></span><br><span class="line">	socket.on(<span class="string">'greeting-from-client'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">msg</span>)</span>&#123;</span><br><span class="line">		<span class="built_in">console</span>.log(msg);</span><br><span class="line">	&#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- client side index.html  --&gt;</span></span><br><span class="line"><span class="doctype">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">html</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">body</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">script</span> <span class="attribute">src</span>=<span class="value">"/socket.io/socket.io.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">script</span>&gt;</span><span class="javascript"></span><br><span class="line">            <span class="keyword">var</span> socket = io(<span class="string">'http://localhost:3000'</span>);</span><br><span class="line">            socket.on(<span class="string">'greeting-from-server'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">message</span>) </span>&#123;</span><br><span class="line">                <span class="built_in">document</span>.body.appendChild(</span><br><span class="line">                    <span class="built_in">document</span>.createTextNode(message.greeting)</span><br><span class="line">                );</span><br><span class="line">                socket.emit(<span class="string">'greeting-from-client'</span>, &#123;</span><br><span class="line">                    greeting: <span class="string">'Hello Server'</span></span><br><span class="line">                &#125;);</span><br><span class="line">            &#125;);</span><br><span class="line">        </span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>ä»£ç å¾ˆç®€æ´ã€‚ä»¥ä¸Šæ˜¯ç”¨nodeåŸç”Ÿçš„httpæ¨¡å—æ¥æ­å»ºçš„æœ¬åœ°æœåŠ¡å™¨ï¼Œ è¿˜å¯ä»¥å°è¯•ä½¿ç”¨expressè¿™ä¸ªæœ€è´Ÿç››åçš„nodeæ¡†æ¶ä¹‹ä¸€æ¥é‡æ–°å®ç°ä¸€ä¸‹ç›¸åŒçš„é€»è¾‘ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// express's version of server.js</span></span><br><span class="line"><span class="keyword">var</span> express = <span class="built_in">require</span>(<span class="string">'express'</span>),</span><br><span class="line">    app = express(),</span><br><span class="line">    http = <span class="built_in">require</span>(<span class="string">'http'</span>),</span><br><span class="line">    socketIO = <span class="built_in">require</span>(<span class="string">'socket.io'</span>),</span><br><span class="line">    server, io;</span><br><span class="line"></span><br><span class="line">app.get(<span class="string">'/'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">  res.sendFile(__dirname + <span class="string">'/index.html'</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">server = http.Server(app);</span><br><span class="line">server.listen(<span class="number">5000</span>);</span><br><span class="line">io = socketIO(server);</span><br><span class="line"></span><br><span class="line">io.on(<span class="string">'connection'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">socket</span>) </span>&#123;</span><br><span class="line">  socket.emit(<span class="string">'greeting-from-server'</span>, &#123;</span><br><span class="line">      greeting: <span class="string">'Hello Client'</span></span><br><span class="line">  &#125;);</span><br><span class="line">  </span><br><span class="line">  socket.on(<span class="string">'greeting-from-client'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">message</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(message);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<blockquote>
<p>Express is a collection of HTTP utilities and middleware that make it easier to use Node as a web server.</p>
</blockquote>
<p>ç”¨<code>var app = express()</code>æ¥åˆ›å»ºä¸€ä¸ªExpressåº”ç”¨ï¼Œå°†è¿™ä¸ªExpress appå½“ä½œç¬¬ä¸€ä¸ªå‚æ•°ä¼ å…¥HTTPæ¨¡å—å¾—åˆ°æœ¬åœ°çš„ç®€æ˜“æœåŠ¡å™¨ï¼Œwe told Node that we wanted to use Express as our handler for HTTP requests. è€Œè¿™ä¸ªæœåŠ¡å™¨çš„ä½œç”¨æ˜¯åœ¨æ¥æ”¶åˆ°å¯¹â€œï¼â€é»˜è®¤èµ„æºçš„è¯·æ±‚æ—¶ï¼Œ å°†index.htmlæ–‡ä»¶ä¼ å›ç»™å®¢æˆ·ç«¯ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬çš„æµè§ˆå™¨ä¸Šæ˜¾ç¤ºå‡ºå†…å®¹ã€‚</p>
<p>Next, we passed the HTTP server directly to the SocketIO method exactly as we would have if we were using a nonExpress HTTP server. Socket.IO took the server instance to listen for new socket connections on it. </p>
<p>å…¶ä¸­ä¸€ä¸ªå°ç»†èŠ‚ï¼šç”¨ <code>emit</code> æ¥ä¼ è¾“named message, ç”¨ <code>send</code> æ¥ä¼ è¾“a message without name.</p>
<h2 id="å¤šäººåœ¨çº¿èŠå¤©å®¤">å¤šäººåœ¨çº¿èŠå¤©å®¤</h2><p>ä¸‹é¢æ˜¯å¯¹ä»¥ä¸Šåº”ç”¨çš„ä¸€ä¸ªç®€å•æ‹“å±•ã€‚ä½¿ç”¨ä¸€ä¸ªè½®æ’­(broadcasting)çš„æ–¹å¼ï¼Œ å°†å®¢æˆ·ç«¯ä¼ æ¥çš„æ¶ˆæ¯æ˜¾ç¤ºç»™æ¯ä¸€ä¸ªåœ¨çº¿çš„ç”¨æˆ·ã€‚</p>
<p><a href="https://github.com/chocoluffy/chatroom" target="_blank" rel="external">githubæºä»£ç     </a></p>
<p><a href="http://chatroom.sb6imr3gpx.us-west-2.elasticbeanstalk.com/" target="_blank" rel="external">åœ¨çº¿Demo-ç½‘é¡µç‰ˆ</a></p>
<p>åœ¨æ‰‹æœºä¸Šä¹Ÿæ˜¯å¯ä»¥ç”¨çš„ï¼Œ ä¸è¿‡UIæ²¡æœ‰ä¸“é—¨é’ˆå¯¹ç§»åŠ¨ç«¯ä¼˜åŒ–ï¼Œ ä¼šæœ‰ç‚¹ç³—çš„æ„Ÿè§‰ğŸ˜­ã€‚æœ‰bugæ±‡æŠ¥åˆ°Issueå‘€ï¼Œ è°¢è°¢~</p>
<p>æ•ˆæœå›¾Demo:</p>
<p>[1] pick a nickname:<br><img src="http://ac-TC2Vc5Tu.clouddn.com/8d0dd106f5f226f4.png" alt="demo-nickname"></p>
<p>[2] chatroom initialization:<br><img src="http://ac-TC2Vc5Tu.clouddn.com/8b9309129959f85e.png" alt="demo-init"></p>
<p>[3] multi users chatting(one in chrome, another in safari):<br><img src="http://ac-TC2Vc5Tu.clouddn.com/4aa537ca52ea8080.png" alt="demo-multusers"></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// A fragment of server.js</span></span><br><span class="line"><span class="keyword">var</span> port = process.env.PORT || <span class="number">3000</span>;</span><br><span class="line">server.listen(port);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'listen on '</span> + port);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> io = socketIO(server);</span><br><span class="line"><span class="keyword">var</span> sockets = [];</span><br><span class="line"><span class="keyword">var</span> ID2user = &#123;&#125;; <span class="comment">// username </span></span><br><span class="line"></span><br><span class="line">io.on(<span class="string">'connection'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">socket</span>)</span>&#123;</span><br><span class="line">	sockets.push(socket);</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">var</span> updateUserNum = <span class="function"><span class="keyword">function</span>(<span class="params">skt</span>)</span>&#123;</span><br><span class="line">		<span class="keyword">var</span> people = sockets.length === <span class="number">1</span> ? <span class="string">'person'</span> : <span class="string">'people'</span>;</span><br><span class="line">		skt.emit(<span class="string">'greeting-from-server'</span>, &#123;</span><br><span class="line">			greeting: <span class="string">'Welcome! '</span> + sockets.length + <span class="string">' '</span> + people + <span class="string">' online now!'</span></span><br><span class="line">		&#125;);</span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line">	updateUserNum(socket);</span><br><span class="line"></span><br><span class="line">	<span class="comment">// boardcast?!</span></span><br><span class="line">	socket.on(<span class="string">'message'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">message</span>)</span>&#123;</span><br><span class="line">		<span class="keyword">var</span> userlistChanged = <span class="literal">false</span>;</span><br><span class="line">		<span class="keyword">if</span>(!ID2user[socket.id])&#123; <span class="comment">// if new user comes in.</span></span><br><span class="line">			<span class="keyword">var</span> profile = &#123;</span><br><span class="line">				username: message.username,</span><br><span class="line">				avatar: message.avatar</span><br><span class="line">			&#125;;</span><br><span class="line">			ID2user[socket.id] = profile;</span><br><span class="line">			userlistChanged = <span class="literal">true</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>; i &lt; sockets.length; i++)&#123;</span><br><span class="line">			sockets[i].emit(<span class="string">'message'</span>, message);</span><br><span class="line">			<span class="keyword">if</span>(userlistChanged)&#123; <span class="comment">// update userlist when new user comes in.</span></span><br><span class="line">				<span class="built_in">console</span>.log(ID2user[socket.id].username + <span class="string">'(id: '</span> + socket.id + <span class="string">' )'</span> + <span class="string">'joins!'</span>);</span><br><span class="line">				sockets[i].emit(<span class="string">'userlist'</span>, ID2user);</span><br><span class="line">				updateUserNum(sockets[i]);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;);</span><br><span class="line"></span><br><span class="line">	socket.on(<span class="string">'disconnect'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>; i&lt;sockets.length; i++)&#123;</span><br><span class="line">			<span class="keyword">if</span>(sockets[i].id === socket.id)&#123;</span><br><span class="line">				sockets.splice(i, <span class="number">1</span>);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">var</span> usernameOut = ID2user[socket.id].username;</span><br><span class="line">		<span class="keyword">delete</span> ID2user[socket.id]; <span class="comment">// remove user from online users.</span></span><br><span class="line">		<span class="comment">// send to client an updated userlist.</span></span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>; i &lt; sockets.length; i++)&#123;</span><br><span class="line">			<span class="built_in">console</span>.log(usernameOut + <span class="string">'(id: '</span> + socket.id + <span class="string">' )'</span> + <span class="string">'leaves...'</span>);</span><br><span class="line">			sockets[i].emit(<span class="string">'userlist'</span>, ID2user);</span><br><span class="line">			updateUserNum(sockets[i]);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="built_in">console</span>.log(<span class="string">"There are "</span> + sockets.length + <span class="string">" active sockets remaining."</span>);</span><br><span class="line">	&#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>ç”±äºæˆ‘ä»¬éœ€è¦å°†è¿™ä¸ªåº”ç”¨æ”¾åœ¨æœåŠ¡å™¨ä¸Šçœ‹æ•ˆæœï¼Œ æ‰€ä»¥port numberå°±ä¸èƒ½ä¸€ç›´æ˜¯æœ¬åœ°çš„localhostäº†ï¼Œ éœ€è¦æ”¹æˆ<code>var port = process.env.PORT || 3000;</code>ã€‚</p>
<p>è¾¾åˆ°çš„æ•ˆæœï¼š</p>
<ul>
<li>æ˜¾ç¤ºåŒæ—¶åœ¨çº¿çš„äººæ•°å’Œuser listã€‚æ ¹æ®ä½ è‡ªå·±é€‰çš„nicknameåœ¨user listä¸Šæ˜¾ç¤ºã€‚</li>
<li>æ¯å½“æœ‰äººåŠ å…¥æˆ–è€…disconnectçš„æ—¶å€™ï¼Œæ›´æ–°æ‰€æœ‰å®¢æˆ·ç«¯çš„user listã€‚åŒæ—¶consoleéƒ½ä¼šæœ‰è®°å½•ã€‚</li>
<li>æ¯å½“æœ‰å®¢æˆ·ç«¯å‘é€æ¶ˆæ¯çš„æ—¶å€™ï¼Œ broadcastingç»™æ‰€æœ‰åœ¨çº¿ç”¨æˆ·ã€‚</li>
</ul>
<p>TODOsï¼š</p>
<ul>
<li>local cache most frequent online users, to make the message transfer much much more efficient and effective. </li>
<li>support image transfer, which should be quite similar to text message, but rather using binary image data. </li>
<li>introduce animation!! this part should be quite familiar to me but Iâ€™s just being lazyâ€¦â€¦</li>
<li>social media ;)</li>
</ul>
<p>ä¸‹é¢æ˜¯éƒ¨åˆ†clientç«¯çš„ä»£ç ï¼šç”±äºç›‘å¬äº†ä¸€äº›äº‹ä»¶ï¼ˆæ¯•ç«Ÿæˆ‘è¿˜æ˜¯è°ƒæ•´äº†å‰ç«¯çš„ğŸ˜‚ï¼‰, æ‰€ä»¥ä»£ç æœ‰ç‚¹é•¿ï¼Œ ä¸‹é¢åªæ˜¾ç¤ºæ ¸å¿ƒéƒ¨åˆ†ï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">// part of index.html's script</span><br><span class="line">var socket = io();</span><br><span class="line">socket.on('connect', function()&#123;</span><br><span class="line"></span><br><span class="line">    // ... some codes here ...</span><br><span class="line"></span><br><span class="line">	socket.on('greeting-from-server', function(msg)&#123;</span><br><span class="line">		$('#greeting').empty();</span><br><span class="line">		$('<span class="tag">&lt;<span class="title">div</span>&gt;</span><span class="tag">&lt;/<span class="title">div</span>&gt;</span>').addClass('headline').text(msg.greeting).appendTo($('#greeting'));</span><br><span class="line">	&#125;)</span><br><span class="line"></span><br><span class="line">    // MAIN IDEA: if message comes, append to right place, and self adjust the view!</span><br><span class="line">	socket.on('message', function(msg)&#123;</span><br><span class="line"></span><br><span class="line">		var container = $('<span class="tag">&lt;<span class="title">div</span>&gt;</span><span class="tag">&lt;/<span class="title">div</span>&gt;</span>').attr('id', 'container');</span><br><span class="line">		var bubble = $('<span class="tag">&lt;<span class="title">div</span>&gt;</span><span class="tag">&lt;/<span class="title">div</span>&gt;</span>').addClass('talk-bubble tri-right left-in border');</span><br><span class="line">		var textWrapper = $('<span class="tag">&lt;<span class="title">div</span>&gt;</span><span class="tag">&lt;/<span class="title">div</span>&gt;</span>').addClass('talktext').appendTo(bubble);</span><br><span class="line">		$('<span class="tag">&lt;<span class="title">p</span>&gt;</span><span class="tag">&lt;/<span class="title">p</span>&gt;</span>').html(msg.messageText).appendTo(textWrapper);</span><br><span class="line"></span><br><span class="line">		// append the jquery clone to target destination.</span><br><span class="line">		var nameClone = username2jqy(msg.username);</span><br><span class="line">		var avaClone = avatar2jqy(msg.avatar);</span><br><span class="line"></span><br><span class="line">		avaClone.appendTo(container);</span><br><span class="line">		nameClone.appendTo(container);</span><br><span class="line">		bubble.clone().appendTo(container);</span><br><span class="line">		container.clone().appendTo($('#messages'));</span><br><span class="line"></span><br><span class="line">		$('<span class="tag">&lt;<span class="title">br</span>&gt;</span>').appendTo($('#messages'));</span><br><span class="line"></span><br><span class="line">		// self-adjust scrolling height.</span><br><span class="line">		var msgWrapper = document.getElementById('messages');</span><br><span class="line">		msgWrapper.scrollTop = msgWrapper.scrollHeight;</span><br><span class="line">	&#125;);</span><br><span class="line"></span><br><span class="line">    // MAIN IDEA: when user list need to update, do it!</span><br><span class="line">	socket.on('userlist', function(userlist)&#123;</span><br><span class="line">		$('#userlist').empty();</span><br><span class="line">		$('<span class="tag">&lt;<span class="title">h2</span>&gt;</span><span class="tag">&lt;/<span class="title">h2</span>&gt;</span>').text('Online users:').appendTo($('#userlist'));</span><br><span class="line">		Object.keys(userlist).map(function(d)&#123;</span><br><span class="line">			var usrImg = $('<span class="tag">&lt;<span class="title">img</span>&gt;</span><span class="tag">&lt;/<span class="title">img</span>&gt;</span>').attr('src', userlist[d].avatar);</span><br><span class="line">			var usrName = $('<span class="tag">&lt;<span class="title">div</span>&gt;</span><span class="tag">&lt;/<span class="title">div</span>&gt;</span>').text(userlist[d].username).addClass('listname');</span><br><span class="line">			var profileWrapper = $('<span class="tag">&lt;<span class="title">div</span>&gt;</span><span class="tag">&lt;/<span class="title">div</span>&gt;</span>').addClass('userlistProfile');</span><br><span class="line">			usrImg.appendTo(profileWrapper);</span><br><span class="line">			usrName.appendTo(profileWrapper);</span><br><span class="line">			profileWrapper.appendTo($('#userlist'));</span><br><span class="line">		&#125;)</span><br><span class="line">	&#125;);</span><br><span class="line"></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h2 id="èƒŒæ™¯çŸ¥è¯†è¡¥å……">èƒŒæ™¯çŸ¥è¯†è¡¥å……</h2><p>å®Œæˆä¸€ä¸ªå°demoçš„å¼€å‘åŒæ ·ä¼šéœ€è¦å¾ˆå¤šè¾¹è§’æ–™ä¿¡æ¯çš„è¡¥å……ï¼Œ æ²¡æœ‰äººä¼šè®°å¾—æ‰€æœ‰javascriptå„ç§å¤„ç†å¯¹è±¡çš„å‡½æ•°ï¼Œ ä¹Ÿæ²¡æœ‰äººéœ€è¦è®°å¾—ã€‚ç•™ä¸ªnoteç»™è‡ªå·±ï¼Œ ä¹Ÿå†ä»¥åæŸ¥çº çš„ä¹‹åæ–¹ä¾¿å›å¿†ã€‚</p>
<ul>
<li><a href="http://ios.jobbole.com/85230/" target="_blank" rel="external">å¾®ä¿¡,QQè¿™ç±»IM appæ€ä¹ˆåšâ€”â€”è°ˆè°ˆWebsocket</a></li>
<li><a href="http://betterexplained.com/articles/a-simple-introduction-to-computer-networking/" target="_blank" rel="external">A Simple Introduction To Computer Networking</a></li>
<li><code>array.splice(i, 1);</code> will remove one item from ith index in that array, namely, in this case, remove the ith item from array.</li>
<li><code>docuemnt.createTextNode(string) \ document.createElement(&#39;div&#39;); \  document.getElementById(&#39;SOMEID&#39;).appendChild(element);</code> are some common DOM objects munipulations example.</li>
<li>refer to this post: <a href="http://stackoverflow.com/questions/8894226/javascript-submit-textbox-on-enter" target="_blank" rel="external">send message by pressing enter</a>, by adding an eventlistener function to message-box, we listent on the keyCode we press, if it is 13(Enter key), then we trigger the message send function.</li>
<li>refer to this post: <a href="http://codepen.io/Founts/pen/gmhcl" target="_blank" rel="external">styling for chat bubble</a></li>
<li>Know how to create DOM elements in jquery: <code>$(&#39;&lt;div&gt;&lt;/div&gt;&#39;).addClass(&#39;headline&#39;).html(msg).appendTo($(&#39;#greeting&#39;));</code></li>
<li>create modal in a visually good-looking way, refer to this post: <a href="https://github.com/kylefox/jquery-modal" target="_blank" rel="external">jquery.modal.js</a></li>
<li>add user a good-looking avatar! <a href="https://github.com/adorableio/avatars-api" target="_blank" rel="external">adorable avatar!</a></li>
<li>change html input focus, refer to this post: <a href="https://api.jquery.com/focus/" target="_blank" rel="external">html input focus</a></li>
<li>auto-adjust the scrolling top to the latest message, refer to this post: <a href="http://stackoverflow.com/questions/15432691/css-overflow-value-for-chat" target="_blank" rel="external">srollTop = scrollHeight</a></li>
</ul>
]]></content>
    <summary type="html">
    <![CDATA[<p>ç”¨socket.ioæ­é…expresså†™çš„ä¸€ä¸ªå¤šäººèŠå¤©å®¤åº”ç”¨ï¼Œ åŒæ—¶å€Ÿè¿™ä¸ªæœºä¼šå¤ä¹ äº†ä¸€ä¸‹socketåŠTCP/IPçš„ä¸€äº›ç»†èŠ‚çŸ¥è¯†ï¼Œ åœ¨UIä¸Šç”¨jqueryï¼Œ ç®€æ´è€Œå¿«é€Ÿåœ°å®Œæˆä¸€äº›åŸºç¡€å‰ç«¯æ ·å¼çš„å¼€å‘ï¼Œ å¼€å‘æ—¶ç”¨nodemonå’Œbrowser-syncæ¥è¾…åŠ©å¼€å‘æµç¨‹ã€‚<a href="http://chatroom.sb6imr3gpx.us-west-2.elasticbeanstalk.com/">åœ¨çº¿Demo-ç½‘é¡µç‰ˆ</a>, <a href="https://github.com/chocoluffy/chatroom">githubæºä»£ç </a>, æ¬¢è¿æäº¤bug issueæˆ–è€…pull request~</p>]]>
    
    </summary>
    
      <category term="AWS" scheme="http://chocoluffy.com/tags/AWS/"/>
    
      <category term="nodejs" scheme="http://chocoluffy.com/tags/nodejs/"/>
    
      <category term="web design" scheme="http://chocoluffy.com/tags/web-design/"/>
    
      <category term="æŠ€æœ¯" scheme="http://chocoluffy.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[å‰ç«¯å¼€å‘å·¥å…·åº“[ç¬¬ä¸€æœŸ]-npm script]]></title>
    <link href="http://chocoluffy.com/2016/05/15/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7%E5%BA%93-%E7%AC%AC%E4%B8%80%E6%9C%9F-npm-script/"/>
    <id>http://chocoluffy.com/2016/05/15/å‰ç«¯å¼€å‘å·¥å…·åº“-ç¬¬ä¸€æœŸ-npm-script/</id>
    <published>2016-05-15T21:48:45.000Z</published>
    <updated>2016-05-25T17:30:43.000Z</updated>
    <content type="html"><![CDATA[<p>åœ¨è‡ªåŠ¨æ„å»ºå·¥å…·grunt\webpackç­‰çº¢å™ªä¸€æ—¶çš„èƒŒæ™¯ä¸‹ï¼Œä¸ºä»€ä¹ˆæˆ‘æƒ³ç”¨npm scriptè€Œä¸æ˜¯gruntå’Œgulpç­‰å…¶ä»–å·¥å…·?</p>
<a id="more"></a>
<h2 id="å‰è¨€">å‰è¨€</h2><p>ä¸ºä»€ä¹ˆæˆ‘ä»¬éœ€è¦è‡ªåŠ¨æ„å»ºå·¥å…·ï¼Ÿ</p>
<p>åœ¨å‰ç«¯å¼€å‘çš„æ—¶å€™ï¼Œä¼šé‡åˆ°å¾ˆå¤šå®é™…äº§å“å¼€å‘ä¹‹å¤–ä¸Šçš„éœ€æ±‚ï¼Œæ¯”å¦‚å¼€å‘è€…å¸Œæœ›åšåˆ°â€œæ‰€å†™å³æ‰€å¾—â€ï¼Œå¯ä»¥ä¸€è¾¹åœ¨ç¼–è¾‘å™¨é‡Œé¢ä¿®æ”¹å’Œå¼€å‘ä»£ç ï¼Œæµè§ˆå™¨å¯ä»¥åŒæ­¥æ›´æ–°è€Œä¸éœ€è¦æˆ‘ä»¬æ‰‹åŠ¨å»refreshé¡µé¢ï¼› æ¯”å¦‚æˆ‘ä»¬å¸Œæœ›å¯ä»¥å‹ç¼©æœ€åçš„æˆå“ä»£ç ï¼Œ å›¾ç‰‡èµ„æºçš„å¤§å°ï¼Œè®©æ¯æ¬¡æµè§ˆå™¨ä¸‹è½½æ‰€éœ€è¦çš„jsä»£ç çš„æ—¶é—´å¯ä»¥æ›´çŸ­ï¼Œæˆ–è€…è€ƒè™‘CDNï¼› æ¯”å¦‚æˆ‘ä»¬å¸Œæœ›æˆ‘ä»¬å†™çš„scsså¯ä»¥é€‚é…ä»»ä½•ç±»å‹çš„æµè§ˆå™¨ç­‰ç­‰ã€‚</p>
<p>å¾ˆå¤šåŠŸèƒ½æ›¾ç»æ˜¯è¦å¼€å‘è€…æ‰‹åŠ¨å¼•å…¥scriptæ–‡ä»¶çš„ï¼Œä½†é‰´äºnpmä¸Šæ´»è·ƒçš„å¼€å‘è€…å°†å¾ˆå¤šéœ€æ±‚çš„moduleå¼€å‘å¹¶å‘å¸ƒå‡ºæ¥ï¼Œ æˆ‘ä»¬å¯ä»¥åˆ©ç”¨npmè¿™ä¸ªåŒ…ç®¡ç†å™¨æ¥é…ç½®ä½¿ç”¨è¿™äº›æ–¹ä¾¿çš„moduleï¼Œåœ¨èƒ½å¤Ÿè¾¾åˆ°åŒæ ·åŠŸèƒ½çš„å·¥å…·é‡Œé¢æ¯”å¦‚bower, grunt, gulpï¼Œæˆ‘è®¤ä¸ºå¯¹äºä¸€ä¸ªè½»é‡çš„å°é¡¹ç›®ï¼Œ ä¸ªäººé¡¹ç›®æ¥è¯´, npm scriptæ˜¯æœ€æ–¹ä¾¿çš„ï¼Œ æœ€å®¹æ˜“ä¸Šæ‰‹çš„ã€‚<strong>æ²¡æœ‰æœ€å¥½çš„å·¥å…·ï¼Œ åªæœ‰æœ€åˆé€‚çš„ä½¿ç”¨åœºæ™¯ã€‚</strong></p>
<p>è€Œä»Šå¤©çš„ä¸»é¢˜ï¼šåœ¨é…ç½®å·¥å…·grunt\webpackç­‰çº¢å™ªä¸€æ—¶çš„èƒŒæ™¯ä¸‹ï¼Œä¸ºä»€ä¹ˆæˆ‘æƒ³ç”¨npm scriptè€Œä¸æ˜¯gruntå’Œgulpç­‰å…¶ä»–å·¥å…·?</p>
<p><strong>å› ä¸ºsimplicity mattersã€‚</strong>æ²¡æœ‰å¿…è¦åœ¨éœ€è¦ç”¨çš„æ—¶å€™æ‰å»æ‰¾é‚£äº›æ•°é‡æœ‰é™çš„grunt, gulp pluginsï¼Œè€Œç›´æ¥å°†node modulesæ‹¿æ¥ç”¨ã€‚å¯¹äºä¸ªäººå¼€å‘å’Œç»´æŠ¤çš„å°é¡¹ç›®ï¼Œ æœ‰æ²¡æœ‰å¿…è¦èŠ±æ—¶é—´å»ç ”ç©¶Gruntfile.jsæ€ä¹ˆå»é…ç½®ï¼Œ æˆ–è€…è¯´ï¼Œ åœ¨é…ç½®ä¸ŠèŠ±çš„æ—¶é—´ç›¸å¯¹çŸ­æœŸé›†ä¸­å¼€å‘çš„æ—¶é—´æ¥è¯´å€¼ä¸å€¼ï¼Ÿä¸æ˜¯è¯´åå¯¹ä½¿ç”¨grunt, gulpå’Œwebpackç­‰å·¥å…·ï¼Œ è€Œæ˜¯æˆ‘ä»¬æ²¡æœ‰å¿…è¦æ‹¿å¤§ç‚®å»æ‰“èšŠå­ï¼Œ æˆ‘ä»¬æƒ³è¦agile developmentã€‚ ä¹Ÿæ­£æ˜¯simplicyï¼Œ æ‰€ä»¥æ‰æœ‰RoR, meteorç­‰å…¨æ ˆæ¡†æ¶çš„å‡ºç°æ¥æŒ‘æˆ˜javaç­‰è¾ƒä¸ºè‡ƒè‚¿çš„å¼€å‘æµç¨‹ä¸æ˜¯ä¹ˆï¼Ÿ</p>
<p>ä¸‹å›¾æ˜¯æˆªæ­¢è‡³ä»Šå¹´1æœˆä¸ºæ­¢çš„å„å¹³å°çš„æ’ä»¶æ•°é‡ï¼Œä»åœ¨ä¸æ–­åœ°å¢åŠ ä¸­ã€‚</p>
<p><img src="http://ac-TC2Vc5Tu.clouddn.com/f247d4b81bd3044a.png" alt="npm script"></p>
<h2 id="ä»€ä¹ˆæ˜¯npm_script">ä»€ä¹ˆæ˜¯npm script</h2><p>å…¶å®npm scriptå°±æ˜¯å¸Œæœ›æ‰§è¡Œçš„commandçš„aliasï¼Œ ç±»ä¼¼ä¸command lineé‡Œé¢çš„makeï¼Œ é€šè¿‡æå‰è®¾ç½®å¸Œæœ›æ‰§è¡Œçš„å‘½ä»¤ï¼Œ æˆ‘ä»¬å¯ä»¥é€šè¿‡<code>npm run &lt;alias&gt;</code>æ¥æ‰§è¡Œæˆ‘ä»¬é¢„å…ˆè®¾ç½®çš„å‘½ä»¤ã€‚</p>
<h2 id="å¦‚ä½•configä½ çš„npm_script">å¦‚ä½•configä½ çš„npm script</h2><p>è€Œç›®å‰npmä¸Šæœ‰å¾ˆå¤šå¾ˆæ£’çš„moduleå¯ä»¥ç›´æ¥å¤„ç†é¡¹ç›®ï¼Œ ä¸‹é¢åˆ—å‡ºæ¥çš„æ˜¯æˆ‘å¹³æ—¶è‡ªå·±ç»å¸¸ä½¿ç”¨çš„module: </p>
<p>æ¯”å¦‚: browserfyå°†æ–‡ä»¶çš„å„ç§æ–‡ä»¶å’Œæµè§ˆå™¨åŒæ­¥; postcsså’Œautofixerå¯ä»¥å°†cssæ–‡ä»¶æ·»åŠ é€‚é…å„ç§æµè§ˆå™¨çš„å‰ç¼€åŒæ—¶è¿›è¡Œå‹ç¼©; js-lintç”¨æ¥æ£€æŸ¥jsæ–‡ä»¶çš„å„ç§æ ¼å¼ç»†èŠ‚; uglifyç”¨æ¥å‹ç¼©jsæ–‡ä»¶çš„å¤§å°; imageminç”¨æ¥å‹ç¼©å„ç§å›¾ç‰‡æ–‡ä»¶çš„å¤§å°ï¼Œ åœ¨å„ç§å¤§å‹ç½‘ç«™ä¸­ï¼Œ å›¾ç‰‡çš„å¤§å°å æ®äº†å¤§éƒ¨åˆ†ã€‚</p>
<p>ä¸‹é¢æ˜¯ä¸€äº›å…·ä½“ä½¿ç”¨çš„ä¾‹å­ï¼šæ¯”å¦‚æˆ‘ä»¬æƒ³å°†sass compileæˆcssã€‚</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save-dev node-sass</span><br></pre></td></tr></table></figure>
<p>å°†<code>node-sass</code>è¿™ä¸ªmoduleè£…åœ¨developingç¯å¢ƒä¹‹åï¼Œå¯ä»¥ç›´æ¥<code>node-sass --output-style compressed -o dist/css src/scss</code>æ¥å°†â€src/scssâ€œè¿™ä¸ªæ–‡ä»¶å¤¹ä¸‹é¢çš„sassæ–‡ä»¶compileå‡ºæ¥å¹¶ä¿å­˜åœ¨â€dist/cssâ€œæ–‡ä»¶å¤¹ä¸‹é¢ï¼› æˆ–è€…ä¸€ä¸ªæ›´ä¾¿æ·çš„åšæ³•ï¼Œæ˜¯ä½¿ç”¨npm scriptï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"scripts"</span>: &#123;</span><br><span class="line">  <span class="string">"scss"</span>: <span class="string">"node-sass --output-style compressed -o dist/css src/scss"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç„¶ååœ¨consoleé‡Œrun <code>npm run scss</code>å°±å¯ä»¥æ‰§è¡Œè¿™ä¸ªç›¸åŒå‘½ä»¤äº†ã€‚å’Œmakefileçš„åŸç†å’Œä½¿ç”¨ä¹ æƒ¯å¯ä»¥ç±»æ¯”ï¼Œ åªä¸è¿‡ä½¿ç”¨åœºæ™¯å’Œå¹³å°ä¸åŒã€‚</p>
<p>åŒç†å¯¹ä¸Šæ–‡æåˆ°çš„autoprefixerè¿™ä¸ªmoduleï¼Œ <code>npm install --save-dev postcss-cli autoprefixer</code>æ¥å®‰è£…ï¼Œ ç„¶åé…ç½®scriptï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"scripts"</span>: &#123;</span><br><span class="line">  ...</span><br><span class="line">  <span class="string">"autoprefixer"</span>: <span class="string">"postcss -u autoprefixer -r dist/css/*"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>é‚£ä¹ˆ<code>npm run autoprefixer</code>è¿™ä¸ªæ•ˆæœå°±ç›¸å½“äº<code>postcss -u autoprefixer --autoprefixer.browsers &#39;&gt; 5%, ie 9&#39; -r dist/css/*</code>ï¼Œ ç±»ä¼¼åœ°è¿˜æœ‰eslintè¿™ä¸ªå¯¹jsæ–‡ä»¶è¿›è¡Œsyntax testingçš„å¸¸ç”¨moduleï¼š<code>npm install --save-dev eslint</code>æˆ–è€…ä½¿ç”¨shortcutï¼š<code>npm i -D eslint</code>, ç„¶åé…ç½®package.jsonçš„scriptéƒ¨åˆ†ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"scripts"</span>: &#123;</span><br><span class="line">  ...</span><br><span class="line">  <span class="string">"lint"</span>: <span class="string">"eslint src/js"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="é¡¹ç›®æºä»£ç ç¤ºä¾‹">é¡¹ç›®æºä»£ç ç¤ºä¾‹</h2><p>ä¸€ä¸ªå®æˆ˜é¡¹ç›®çš„æºä»£ç ä½¿ç”¨åœ¨è¿™é‡Œå’Œå¤§å®¶åˆ†äº«ï¼š</p>
<p>è€ƒè™‘åˆ°å¼€å‘å’Œç”Ÿäº§ç¯å¢ƒçš„ä¸åŒï¼Œè¿˜éœ€è¦é…ç½®ä¸åŒçš„ç¯å¢ƒï¼Œè¿™ä¸ªé¡¹ç›®åœ¨å¼€å‘ä¸Šæœ‰æµè§ˆå™¨åŒæ­¥æ›´æ–°ï¼Œè¯­æ³•æ£€æŸ¥ï¼Œå‹ç¼©æºæ–‡ä»¶ï¼Œ ç›‘å¬ç«¯å£ï¼Œ s3åŒæ­¥å¤‡ä»½çš„è‡ªåŠ¨åŒ–ä¼˜åŠ¿ï¼Œ è¿˜å¼•å…¥äº†å‰ç«¯çš„jadeæ¡†æ¶ä»£æ›¿htmlï¼Œ stylusæ¡†æ¶ä»£æ›¿cssï¼Œmochaçš„testingæ¡†æ¶å’Œkarmaé©±åŠ¨ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">"name"</span>: <span class="string">"npm-scripts-example"</span>,</span><br><span class="line">  <span class="string">"version"</span>: <span class="string">"1.0.0"</span>,</span><br><span class="line">  <span class="string">"description"</span>: <span class="string">"An example of how to use npm scripts"</span>,</span><br><span class="line">  <span class="string">"main"</span>: <span class="string">"index.js"</span>,</span><br><span class="line">  <span class="string">"license"</span>: <span class="string">"MIT"</span>,</span><br><span class="line">  <span class="string">"devDependencies"</span>: &#123;</span><br><span class="line">    <span class="string">"browserify"</span>: <span class="string">"^6.3.2"</span>,</span><br><span class="line">    <span class="string">"hashmark"</span>: <span class="string">"^2.0.0"</span>,</span><br><span class="line">    <span class="string">"http-server"</span>: <span class="string">"^0.7.3"</span>,</span><br><span class="line">    <span class="string">"jade"</span>: <span class="string">"^1.7.0"</span>,</span><br><span class="line">    <span class="string">"jshint"</span>: <span class="string">"^2.5.10"</span>,</span><br><span class="line">    <span class="string">"karma"</span>: <span class="string">"^0.12.28"</span>,</span><br><span class="line">    <span class="string">"karma-browserify"</span>: <span class="string">"^1.0.0"</span>,</span><br><span class="line">    <span class="string">"karma-cli"</span>: <span class="string">"^0.0.4"</span>,</span><br><span class="line">    <span class="string">"karma-mocha"</span>: <span class="string">"^0.1.10"</span>,</span><br><span class="line">    <span class="string">"karma-phantomjs-launcher"</span>: <span class="string">"^0.1.4"</span>,</span><br><span class="line">    <span class="string">"live-reload"</span>: <span class="string">"^0.2.0"</span>,</span><br><span class="line">    <span class="string">"minifyify"</span>: <span class="string">"^6.0.0"</span>,</span><br><span class="line">    <span class="string">"mocha"</span>: <span class="string">"^2.0.1"</span>,</span><br><span class="line">    <span class="string">"nodemon"</span>: <span class="string">"^1.2.1"</span>,</span><br><span class="line">    <span class="string">"opener"</span>: <span class="string">"^1.4.0"</span>,</span><br><span class="line">    <span class="string">"parallelshell"</span>: <span class="string">"^1.0.0"</span>,</span><br><span class="line">    <span class="string">"rimraf"</span>: <span class="string">"^2.2.8"</span>,</span><br><span class="line">    <span class="string">"s3-cli"</span>: <span class="string">"^0.11.1"</span>,</span><br><span class="line">    <span class="string">"stylus"</span>: <span class="string">"^0.49.3"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">"scripts"</span>: &#123;</span><br><span class="line">    <span class="string">"clean"</span>: <span class="string">"rimraf dist/*"</span>,</span><br><span class="line"></span><br><span class="line">    <span class="string">"prebuild"</span>: <span class="string">"npm run clean -s"</span>,</span><br><span class="line">    <span class="string">"build"</span>: <span class="string">"npm run build:scripts -s &amp;&amp; npm run build:styles -s &amp;&amp; npm run build:markup -s"</span>,</span><br><span class="line">    <span class="string">"build:scripts"</span>: <span class="string">"browserify -d assets/scripts/main.js -p [minifyify --compressPath . --map main.js.map --output dist/main.js.map] | hashmark -n dist/main.js -s -l 8 -m assets.json 'dist/&#123;name&#125;&#123;hash&#125;&#123;ext&#125;'"</span>,</span><br><span class="line">    <span class="string">"build:styles"</span>: <span class="string">"stylus assets/styles/main.styl -m -o dist/ &amp;&amp; hashmark -s -l 8 -m assets.json dist/main.css 'dist/&#123;name&#125;&#123;hash&#125;&#123;ext&#125;'"</span>,</span><br><span class="line">    <span class="string">"build:markup"</span>: <span class="string">"jade assets/markup/index.jade --obj assets.json -o dist"</span>,</span><br><span class="line"></span><br><span class="line">    <span class="string">"test"</span>: <span class="string">"karma start --singleRun"</span>,</span><br><span class="line"></span><br><span class="line">    <span class="string">"watch"</span>: <span class="string">"parallelshell \"npm run watch:test -s\" \"npm run watch:build -s\""</span>,</span><br><span class="line">    <span class="string">"watch:test"</span>: <span class="string">"karma start"</span>,</span><br><span class="line">    <span class="string">"watch:build"</span>: <span class="string">"nodemon -q -w assets/ --ext '.' --exec 'npm run build'"</span>,</span><br><span class="line"></span><br><span class="line">    <span class="string">"open:prod"</span>: <span class="string">"opener http://example.com"</span>,</span><br><span class="line">    <span class="string">"open:stage"</span>: <span class="string">"opener http://staging.example.internal"</span>,</span><br><span class="line">    <span class="string">"open:dev"</span>: <span class="string">"opener http://localhost:9090"</span>,</span><br><span class="line"></span><br><span class="line">    <span class="string">"deploy:prod"</span>: <span class="string">"s3-cli sync ./dist/ s3://example-com/prod-site/"</span>,</span><br><span class="line">    <span class="string">"deploy:stage"</span>: <span class="string">"s3-cli sync ./dist/ s3://example-com/stage-site/"</span>,</span><br><span class="line"></span><br><span class="line">    <span class="string">"serve"</span>: <span class="string">"http-server -p 9090 dist/"</span>,</span><br><span class="line">    <span class="string">"live-reload"</span>: <span class="string">"live-reload --port 9091 dist/"</span>,</span><br><span class="line"></span><br><span class="line">    <span class="string">"dev"</span>: <span class="string">"npm run open:dev -s &amp;&amp; parallelshell \"npm run live-reload -s\" \"npm run serve -s\" \"npm run watch -s\""</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¾ˆå¤šæ—¶å€™å°±æ˜¯å› ä¸ºå‡†å¤‡çš„å·¥å…·æ•ˆç‡é«˜ï¼Œ å¼€å‘è€…ä¹Ÿå› æ­¤å¾—ä»¥é›†ä¸­ç²¾åŠ›äºäº§å“é€»è¾‘ï¼Œ åœ¨æ›´çŸ­çš„æ—¶é—´å†…å¼€å‘å‡ºæ›´å¥½æ›´ç¨³å®šçš„äº§å“ã€‚</p>
<h2 id="åè®°">åè®°</h2><p>npm scriptä¸æ˜¯æ²¡æœ‰ç¼ºç‚¹çš„ï¼Œå°±åƒæˆ‘ä¸€å†å¼ºè°ƒçš„ï¼Œæ²¡æœ‰æœ€å¥½çš„å·¥å…·ï¼Œ åªæœ‰æœ€åˆé€‚çš„ä½¿ç”¨åœºæ™¯ï¼Œ åœ¨ä¸ªäººå°é¡¹ç›®é€‚åˆçš„npm scriptï¼Œåœ¨å¤§é¡¹ç›®ï¼Œ åŠ¨è¾„å‡ åä¸‡çš„å‰ç«¯é¡¹ç›®çš„æ„å»ºå’Œæµ‹è¯•ä¸‹ï¼Œ npm scriptä¼šæ˜¾å¾—ç‰¹åˆ«è‡ƒè‚¿å’Œéš¾ä»¥ç»´æŠ¤ã€‚ è€Œç›®å‰å¤§çƒ­çš„grunt\gulp\webpackä¹Ÿè¿æ¥äº†ä»–ä»¬çš„èˆå°ã€‚ä¸‹ä¸€æœŸï¼Œé›†ä¸­ä»‹ç»gruntå’Œwebpackï¼Œå…¬å¸é‡Œä½¿ç”¨çš„ä¹Ÿæ˜¯gruntï¼Œä¸ºä»€ä¹ˆå®ƒä¼šåœ¨ä¼—å¤šå·¥å…·ä¸­è„±é¢–è€Œå‡ºã€‚</p>
<h2 id="å‚è€ƒé“¾æ¥">å‚è€ƒé“¾æ¥</h2><ul>
<li><a href="https://www.zybuluo.com/yangfch3/note/249328" target="_blank" rel="external">ç”¨npmæ­é…è„šæœ¬æ‰§è¡Œ</a> npm ä¸ä»…å¯ä»¥ç”¨äºæ¨¡å—ç®¡ç†ï¼Œè¿˜å¯ä»¥ç”¨äºæ‰§è¡Œè„šæœ¬ã€‚å¯¹äºå¤šä¸ªä»»åŠ¡çš„æ“ä½œå¾ˆæ–¹ä¾¿ï¼</li>
<li><a href="https://www.nczonline.net/blog/2016/03/mimicking-npm-script-in-node-js/?utm_source=feedburner&amp;utm_medium=feed&amp;utm_campaign=Feed%3A+nczonline+%28NCZOnline+-+The+Official+Web+Site+of+Nicholas+C.+Zakas%29" target="_blank" rel="external">Mimicking npm script in Node.js</a> The underlying mechanism of using npm script is that npm modifies the PATH environment variable so that it affects the lookup of executables. Run <code>npm install --save-dev eslint</code>, then do <code>npm run lint</code>, it works because npm script is actually running <code>node_modules/.bin/eslint</code>.</li>
<li><a href="http://gon.to/2015/02/26/gulp-is-awesome-but-do-we-really-need-it/" target="_blank" rel="external">Gulp is awesome, but do we really need it?</a></li>
<li><a href="http://blog.keithcirkel.co.uk/how-to-use-npm-as-a-build-tool/" target="_blank" rel="external">How to Use npm as a Build Tool</a></li>
</ul>
]]></content>
    <summary type="html">
    <![CDATA[<p>åœ¨è‡ªåŠ¨æ„å»ºå·¥å…·grunt\webpackç­‰çº¢å™ªä¸€æ—¶çš„èƒŒæ™¯ä¸‹ï¼Œä¸ºä»€ä¹ˆæˆ‘æƒ³ç”¨npm scriptè€Œä¸æ˜¯gruntå’Œgulpç­‰å…¶ä»–å·¥å…·?</p>]]>
    
    </summary>
    
      <category term="javascript" scheme="http://chocoluffy.com/tags/javascript/"/>
    
      <category term="nodejs" scheme="http://chocoluffy.com/tags/nodejs/"/>
    
      <category term="æŠ€æœ¯" scheme="http://chocoluffy.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[å¦ä¸€ç§é¼“å£°-è¯»ã€Šé€”å®¢åœˆã€‹æœ‰æ„Ÿ]]></title>
    <link href="http://chocoluffy.com/2016/05/13/%E5%8F%A6%E4%B8%80%E7%A7%8D%E9%BC%93%E5%A3%B0-%E8%AF%BB%E3%80%8A%E9%80%94%E5%AE%A2%E5%9C%88%E3%80%8B%E6%9C%89%E6%84%9F/"/>
    <id>http://chocoluffy.com/2016/05/13/å¦ä¸€ç§é¼“å£°-è¯»ã€Šé€”å®¢åœˆã€‹æœ‰æ„Ÿ/</id>
    <published>2016-05-14T01:45:08.000Z</published>
    <updated>2016-05-15T18:03:20.000Z</updated>
    <content type="html"><![CDATA[<p>â€œå¦‚æœä½ æ¸…é†’åœ°çŸ¥é“ä½ è¦å»å“ªå„¿ï¼Œè„‘æµ·ä¸­è¿˜ä¿ç•™ç€é‚£ä»½æ†§æ†¬ï¼Œé‚£ä¹ˆä½ å°±èƒ½é€¢å±±å¼€è·¯ï¼Œé‡æ°´æ­æ¡¥ï¼Œæ‰€æœ‰çš„é˜»ç¢éƒ½å°†æˆä¸ºä¸€ä¸ªä¸ªé‡Œç¨‹ç¢‘ï¼Œè¢«è¸©åœ¨ä½ çš„èº«åâ€¦â€¦â€</p>
<a id="more"></a>
<p><img src="http://ac-TC2Vc5Tu.clouddn.com/7c3aa7a1e64bda62.png" alt="ç”Ÿå‘½ä¸èƒ½æ‰¿å—ä¹‹é‡"></p>
<p>åœ¨<a href="http://chocoluffy.com/2016/04/25/%E5%85%B3%E4%BA%8E%E5%88%9B%E4%B8%9A%EF%BC%8C-%E9%82%A3%E4%BA%9B%E4%B8%8D%E8%83%BD%E8%AF%B4%E7%9A%84%E7%A7%98%E5%AF%86/">å…³äºåˆ›ä¸š, é‚£äº›ä¸èƒ½è¯´çš„ç§˜å¯†</a>é‡Œä¸»è¦è®°å½•äº†é˜…è¯»<the hard="" thing="" about="" things="">çš„é˜…è¯»æ‰‹è®°ï¼Œ è€Œå¦ä¸€æœ¬å‡ ä¹åŒæ—¶å®Œæˆçš„ä¹¦&lt;é€”å®¢åœˆåˆ›ä¸šè®°&gt;çš„é˜…è¯»è®°å½•æ€è€ƒï¼Œåœ¨è¿™é‡Œåˆ†äº«ã€‚</the></p>
<p>åœ¨ä¸€ä¸ªå……æ–¥ç€æ¥è‡ªCEOä¹ƒè‡³é£é™©æŠ•èµ„äººè§†è§’çš„åˆ›ä¸šå›é¡¾çš„ç¯å¢ƒä¸‹ï¼Œ ä¸€ä¸ªæ¥è‡ªæŠ€æœ¯åˆä¼™äºº(CTO)çš„è§†è§’æ˜¾å¾—å°¤ä¸ºå¯è´µã€‚ ä»æœ€æ—©çš„æŠ€æœ¯é€‰å‹ï¼Œ åˆ°å¸¦é¢†å…¶å®ƒæŠ€æœ¯äººå‘˜çš„å¼€å‘å’Œç»´æŠ¤ï¼Œ åˆ°æŠ€æœ¯è¿‡æ¸¡å’Œå•†ä¸šé€‰æ‹©ï¼Œ é™ˆå¤©ç»™äº†ä¸€ä»½å¾ˆè¯¦ç»†å’ŒçœŸæŒšçš„å‚è€ƒé€‰é¡¹ã€‚</p>
<div style="text-align:center" markdown="1"><br> <img src="http://ac-TC2Vc5Tu.clouddn.com/6ceefbf6929babac.png" alt="toureet"><br></div>

<p>æ¯æœ¬ä¹¦ï¼Œ æ¯ä¸ªæ–‡å­—å¯¹ä¸åŒçš„äººæ„ä¹‰éƒ½æ˜¯ä¸åŒçš„ã€‚ ä¸‹é¢çºªå½•äº†æˆ‘åœ¨çœ‹å®Œè¿™æœ¬ä¹¦ä¹‹åçš„æƒ³æ³•ã€‚</p>
<h2 id="å…³äºåˆ›ä¸šï¼Œé‚£æ‰€æœ‰æ— å…³æŠ€æœ¯çš„äº‹">å…³äºåˆ›ä¸šï¼Œé‚£æ‰€æœ‰æ— å…³æŠ€æœ¯çš„äº‹</h2><p>ä¸€å¼€å§‹ä¸è¦è®¾ç½®è¿‡é«˜çš„æœŸæƒæ± ï¼Œ æœŸæƒæ± çš„ä¸»è¦ç›®çš„æ˜¯æœªæ¥å¸å¼•å’Œç•™ä½äººæ‰ã€‚æœŸæƒä¸è‚¡æƒä¸åŒï¼Œè‚¡æƒä»£è¡¨æ‰€æœ‰æƒï¼ŒæœŸæƒä»£è¡¨çš„åˆ™æ˜¯åœ¨ç‰¹å®šçš„æ—¶é—´ã€ä»¥ç‰¹å®šçš„ä»·æ ¼è´­ä¹°ç‰¹å®šæ‰€æœ‰æƒçš„æƒåˆ©ï¼Œå®ƒå¯è¢«è§†ä½œæ˜¯å‘˜å·¥ä¸å…¬å¸ä¹‹é—´å…³äºè‚¡æƒä¹°å–çš„ä¸€ä»½åˆåŒã€‚è¡Œæƒä¹‹åå‘˜å·¥è·å¾—çš„è‚¡ä»½æ˜¯æ™®é€šè‚¡ã€‚</p>
<p>åœ¨å’Œåˆ›æ–°å·¥åœºçš„äº¤è°ˆä¸­ï¼š</p>
<ul>
<li><p>æ¸…ç®—ä¼˜å…ˆæƒ</p>
</li>
<li><p>åç¨€é‡Šæ¡æ¬¾</p>
</li>
</ul>
<p>å¦‚ä½•é›‡ä½£åˆ°æœ€å¥½çš„äººï¼Œ çš„ç¡®æ‹¥æœ‰åˆ›æ–°å·¥åœºè¿™ä¸ªåå­—æ›´å®¹æ˜“å‘ç°æ›´å¥½çš„æŠ€æœ¯äººå‘˜ã€‚</p>
<p>nanfangå°±æ˜¯é€šè¿‡åˆ›æ–°å·¥å‚çš„æ‹›è˜è¿›æ¥çš„ã€‚åŒæ—¶alexçš„å®˜æ–¹åšå®¢å’ŒçŸ¥ä¹éƒ½å¯ä»¥ç”¨æ¥è·å–äººæ‰çš„æ¥æºã€‚</p>
<p>å½“æ—¶ä½œè€…ä½¿ç”¨çš„æ˜¯amazonçš„å››å°æœ€å°å…è´¹è®¡ç®—å•å…ƒï¼Œ ç”¨4ä¸ªè´¦å·æ³¨å†Œçš„ã€‚ä¸€å°ç”¨æ¥è·‘ç¿»è¯‘ï¼Œ ä¸€å°è·‘wordpressï¼Œ ä¸€å°è·‘toureet.comï¼Œ å’Œå¦ä¸€å°ã€‚ ç°åœ¨å›½å†…çš„äº‘æœåŠ¡å¯ä»¥è€ƒè™‘é˜¿é‡Œäº‘ã€‚</p>
<p>åœ¨UIä¸Šè¦ç›´è§‚å’Œå®ç”¨ã€‚ ä¸€å®šè¦åœ¨ç¬¬ä¸€è½®å®£ä¼ ä¹‹å‰å®ŒæˆUIçš„è®¾è®¡å’Œæ„æ¶ï¼Œ æ¯•ç«Ÿç¬¬ä¸€è½®å®£ä¼ ä¹‹åï¼Œ å¾€åçš„å®£ä¼ çš„åŠ›åº¦å’Œæ•ˆæœéƒ½å°†å¤§å¤§ä¸å¦‚ä¹‹å‰ã€‚</p>
<p>åŒæ—¶ä¹Ÿéœ€è¦è€ƒè™‘çš„å°±æ˜¯åŸŸåå’Œæ³¨å†Œçš„é—®é¢˜!!</p>
<p>è¦æŠŠé’±èŠ±åœ¨åˆ€åˆƒä¸Šï¼Œ è¦èˆå¾—å»èŠ±é’±ã€‚appçš„åˆ¶ä½œæ˜¯å¿…é¡»çš„!!!!!!!!å°½ç®¡å¤§å®¶ä½¿ç”¨webçš„æ—¶é—´å¾ˆå¤šï¼Œ ä½†æ˜¯ä¸‹è½½äº†ä¸€ä¸ªappå°±æ˜¯æŠ¤åŸæ²³ã€‚</p>
<p><strong>å¯¹äºä¸€äº›ç‰¹åˆ«ä¼˜ç§€çš„äººï¼Œ ä¸€å®šè¦å’Œä»–ä»¬ç»å¸¸è®¨è®ºäº§å“çš„å‘å±•æ–¹å‘ï¼Œ å› ä¸ºå¯¹äºä»–ä»¬æ¥è¯´ï¼Œ ä»–ä»¬ä¹‹æ‰€ä»¥åŠ å…¥ä½ ï¼Œ å·²ç»ä¸æ˜¯å› ä¸ºæŠ€æœ¯çš„å¸å¼•åŠ›äº†ï¼Œ è€Œæ˜¯å› ä¸ºä»–çš„å£°éŸ³å¾ˆå¯èƒ½åœ¨å¡‘é€ ä»–å‡†å¤‡æ¨å‡ºçš„äº§å“ï¼Œ å› ä¸ºä»æœªæœ‰çš„å¯¹äº§å“çš„æŒæ§åŠ›ã€‚è€Œè¿™ï¼Œ ä¹Ÿæ˜¯åˆ›ä¸šçš„é­…åŠ›å§!</strong></p>
<p>å†æ—¶ä¸€ä¸ªæœˆçš„æ¨å¹¿å¤§èµ›ï¼Œ çƒ§äº†30ä¸‡ï¼ˆåŠ ä¸Šå‘˜å·¥çš„å·¥èµ„ï¼‰ï¼Œ æ¢æ¥çš„æ˜¯ä¸€æ¬¡æ€§çš„ç”¨æˆ·ï¼Œ çœ‹çƒ­é—¹çš„ç”¨æˆ·ï¼Œ æ³¨å†Œäº†3ä¸‡å¤šäººï¼Œ ç„¶è€Œæ²¡æœ‰ä»€ä¹ˆç”¨ã€‚</p>
<p>å¦‚æœä½ æˆ˜ç•¥ä¸Šä¸æ˜¯å¾ˆæ¸…æ™°ï¼Œä½ å†åšä»€ä¹ˆä¹Ÿæ˜¯æ²¡æœ‰ç”¨çš„ï¼Œ<strong>æ˜¯åœ¨ç”¨æˆ˜æœ¯æ€§çš„ç–²åŠ³æ©ç›–æˆ˜ç•¥ä¸Šçš„æ‡’æƒ°</strong>ã€‚ç™¾åœºæ±‡ä¸åœåœ°åœ¨æˆ˜ç•¥å±‚é¢åšä¸€äº›è°ƒæ•´ï¼Œæ‰€ä»¥æˆ˜æœ¯ä¸Šå¤§å®¶ä¸ä¼šé‚£ä¹ˆè¾›è‹¦ã€‚ä¸€å¹´æ¥ï¼Œç™¾åœºæ±‡å…¨å…¬å¸åªæœ‰ä¸€ä¸ªäººç¦»èŒã€‚è¿™å¯¹åˆåˆ›å…¬å¸æ¥è¯´æ˜¯å¾ˆä¸å®¹æ˜“çš„ã€‚</p>
<h2 id="å…³äºåŠŸèƒ½çš„å®ç”¨å’Œå™±å¤´">å…³äºåŠŸèƒ½çš„å®ç”¨å’Œå™±å¤´</h2><p>æœ‰æ²¡æœ‰æƒ³è¿‡å¦‚æœå¾®ä¿¡æŠŠæœ‹å‹åœˆçš„åŠŸèƒ½ä½œä¸ºæ¯ä¸€æ¬¡æ‰“å¼€çš„åˆå§‹é¡µé¢ï¼Ÿè€Œä¸æ˜¯ä¸€ç›´ä»¥æ¥çš„ç¾¤ç»„æˆ–è€…å•èŠï¼Ÿé¦–å±ä¸€å®šè¦æ”¾ä½ æœ€æœ€æ ¸å¿ƒçš„åŠŸèƒ½ï¼Œ è€Œç¤¾äº¤æ˜¯æœ€ä¸ºç”¨æˆ·ç²˜æ€§çš„æ–¹å¼ä¹‹ä¸€ï¼Œ ç»å¯¹ä¸èƒ½å–§å®¾å¤ºä¸»ã€‚æˆ–è€…è¯´ï¼Œ æ‰€æœ‰çš„å·¥å…·å¼ç½‘ç«™ï¼Œ éƒ½åº”è¯¥è€ƒè™‘å›´ç»•é‚£ä¸ªå·¥å…·æ‰€æœ€æœ€åˆé€‚çš„ç¤¾äº¤åœºæ™¯ã€‚</p>
<p>æ¯”å¦‚å¾®ä¿¡çš„å·¥å…·å±æ€§æ˜¯ï¼šå³æ—¶é€šè®¯å’Œç¾¤èŠï¼Œ é‚£ä¹ˆèŠå¤©çš„ç¤¾äº¤åœºæ™¯å°±åº”è¯¥æ˜¯ï¼š è®©æ›´å¤šçš„äººå‘ç°èŠå¤©çš„å†…å®¹ï¼Œ ä¹Ÿä»çº¯æ–‡å­—è½¬æ¢åˆ°å›¾ç‰‡å’Œè§†é¢‘å’Œç›´æ’­ï¼Œ ä¹ƒè‡³å¯ä»¥è®©æ›´å¤šçš„äººåŠ å…¥å’Œæ„Ÿå—åˆ°èŠå¤©çš„è¿™ä¸ªåœºæ™¯é‡Œé¢ã€‚</p>
<p>æ¯”å¦‚ç½‘æ˜“äº‘éŸ³ä¹çš„å·¥å…·å±æ€§æ˜¯ï¼š å‘ç°å’Œäº«å—é«˜å“è´¨éŸ³ä¹ï¼Œ é‚£ä¹ˆæ‰¾éŸ³ä¹å’Œå¬éŸ³ä¹çš„ç¤¾äº¤åœºæ™¯å°±åº”è¯¥æ˜¯ï¼š è®©æ›´å¤šçš„äººå»å‘ç°ä½ å–œæ¬¢å’Œæ”¶è—çš„éŸ³ä¹ï¼Œ å¹¶åŸºäºè¿™äº›éŸ³ä¹è¿›è¡Œè¿›ä¸€æ­¥çš„äº¤æµã€‚è€Œæˆ‘è§‰å¾—ä¸€ä¸ªéå¸¸éå¸¸æ£’çš„åŠŸèƒ½å°±æ˜¯ï¼Œ ä¸ä»…ä»…å…è®¸ç”¨æˆ·åˆ†äº«ä»–ä»¬è‡ªå·±åˆ›ä½œçš„æ­Œå•ï¼Œ è€Œä¸”å…è®¸æŠŠä»–ä»¬æœ€å¸¸å¬çš„é‚£25é¦–æ­Œæ˜¾ç¤ºå‡ºæ¥ã€‚ä½ ä¸ä¼šæ¬ºéª—ä½ è‡ªå·±çš„è€³æœµã€‚å¦‚æœå¯ä»¥æŠŠè¿™ä¸€æ æ›´çªå‡ºåœ°æ˜¾ç¤ºä¼šæ›´å¥½ï¼Ÿï¼</p>
<h2 id="å…³äºå·¥å…·å’Œç¤¾åŒºçš„äº¤å å’ŒçŸ›ç›¾">å…³äºå·¥å…·å’Œç¤¾åŒºçš„äº¤å å’ŒçŸ›ç›¾</h2><p>æ¯ä¸€ä¸ªéœ€æ±‚åœ¨è¢«è§£å†³çš„æ—¶å€™ï¼Œ äº§å“æ˜¯è¢«å·¥å…·åŒ–çš„ï¼Œ è€Œå¸Œæœ›æ¨å¹¿è¿™ç§è§£å†³æ–¹æ¡ˆçš„æ—¶å€™ï¼Œ äº§å“æ˜¯è¢«ç¤¾åŒºåŒ–çš„ã€‚ ç°åœ¨å¤§éƒ¨åˆ†å›´ç»•å·¥å…·æ€§äº§å“è¿˜æ˜¯ç¤¾åŒºæ€§äº§å“çš„è®¨è®ºï¼Œ å¦‚æœè¢«æŠ½è±¡å‡ºäº†äº§å“æœ¬èº«è¦è§£å†³çš„é—®é¢˜çš„è¯ï¼Œ åŸºæœ¬éƒ½æ˜¯åºŸè¯å’Œå¹²æ‰°ã€‚ æ‹¿ä¸¤ç§ä½¿ç”¨åœºæ™¯å’Œé¢‘ç‡æ¯”è¾ƒä¸åŒçš„æ–¹å‘åšæ¯”è¾ƒï¼Œ æ¯”å¦‚å¬éŸ³ä¹å’Œæ—…æ¸¸è¿™ä¸¤ä¸ªå•†ä¸šæ–¹å‘ã€‚ </p>
<p>äººä»¬å¬éŸ³ä¹çš„ä¸¤ä¸ªéœ€æ±‚ï¼Œ åœ¨è‡ªå·±ç–²æƒ«ä¸çˆ½çš„æ—¶å€™å¬åˆ°è‡ªå·±æœ€å–œæ¬¢çš„éŸ³ä¹ï¼Œ å’Œå‘ç°é‚£äº›ä¸è®¤è¯†å´å¥½å¬çš„éŸ³ä¹ï¼› å½“ç„¶ï¼Œ äººä»¬è¿˜ä¼šä»åˆ†äº«è‡ªå·±ç»„å¥½çš„æ­Œå•æˆ–è€…è¯„è®ºé‡Œé¢å¾—åˆ°åˆ†äº«å’Œåé¦ˆçš„æ»¡è¶³ï¼Œä½†æˆ‘è®¤ä¸ºè¿™ç§è¡Œä¸ºæ˜¯å› ä¸ºç¤¾åŒºåŒ–å¸¦æ¥çš„ï¼Œå› ä¸ºåœ¨äººç¾¤ä¸­ï¼Œ æ‰€ä»¥ä¹Ÿæƒ³å¾—åˆ°äººç¾¤çš„æ¸©æš–å’Œå…±é¸£ ï¼Œä½†è¿™ç§ç¤¾ä¼šå¿ƒç†çš„éœ€æ±‚æˆ‘æš‚ä¸å½’äºå¬éŸ³ä¹æœ¬èº«çš„éœ€æ±‚ã€‚ å°±æ‹¿ç½‘æ˜“äº‘éŸ³ä¹APPä½œä¾‹å­ï¼Œ å…¶æœ¬èº«åœ¨å¾ˆå¤šç»†èŠ‚ä¸Šåšå¾—å¾ˆæ£’äº†ï¼Œ ä½†æ˜¯æˆ‘è®¤ä¸ºè¿˜å¯ä»¥æé«˜çš„åœ°æ–¹ï¼š</p>
<p>åŸºäºå–œæ¬¢åŒä¸€ä¸ªä¸“è¾‘çš„ä¹ä¼—çš„ç¤¾äº¤å…´è¶£å°ç»„ã€‚äººä»¬å¯¹è‡ªå·±å–œæ¬¢çš„ä¸œè¥¿æ°¸è¿œéƒ½æœ‰å¦‚æ•°å®¶çèˆ¬çš„çƒ­æƒ…ã€‚</p>
<p>ä»ä½ ä¸ä¼šéª—è‡ªå·±çš„è€³æœµï¼Œ ä½ æœ€æœ€ç»å¸¸å¬çš„25é¦–æ­Œã€‚</p>
<p>åŒæ ·å‘ç°åˆ«äººæœ€æœ€ç»å¸¸å¬çš„25é¦–æ­Œã€‚</p>
<p>ç”¨æˆ·å¯¹æ”¶é›†åˆ°æ­Œæ›²çš„åˆ†ç±»çš„è‡ªæˆ‘é‡ç»„ã€‚ åº”å½“æ”¯æŒåŒå‘çš„æ ‡è®°ï¼Œ ä¸€æ˜¯tagï¼Œ äºŒæ˜¯collectionã€‚åƒç®¡ç†ç¬”è®°ä¸€æ ·å»ç®¡ç†éŸ³ä¹ï¼Œ åŒæ—¶å°†ä»»ä½•collectionéƒ½æ³¨é‡ç¤¾äº¤åŒ–çš„åˆ†äº«ï¼Œ åƒpinterestçš„ç†å¿µå­¦ä¹ ã€‚</p>
<p>è¯„è®ºåˆ†ä¸ºä¸¤æ ï¼Œ ä¸€æ æ˜¯trendingï¼Œ ä¸€æ æ˜¯å†å²æœ€çƒ­ã€‚ trendingè¦åƒhackernewsä¸€æ ·çš„ä¸æ–­è®©æ–°äº‹ç‰©æ¶Œç°æ¥ä»£æ›¿æ—§è¯„è®ºï¼Œ è€Œå†å²æœ€çƒ­ï¼Œ åˆ™æ˜¯å°±ç¡¬ç¢°ç¡¬çš„è´¨é‡ã€‚åŸå› ï¼Ÿä½ ä¸ä¼šå»å‚åŠ ä¸€ä¸ªé«˜ä½èƒœè´Ÿå·²ç»åˆ†æ˜çš„æ¯”èµ›ã€‚ä½ ä¹‹æ‰€å€šè¯„è®ºï¼Œ ä½ æ€»ä¼šæœ‰è¢«åé¦ˆçš„æ¸´æœ›ï¼Œ è€Œçœ‹è§è‡ªå·±çš„æ–‡å­—è¢«æ·¹æ²¡æ˜¯æœ€æœ€å¤±è½çš„ï¼Œ å“ªæ€•ä½ çŸ¥é“è¿™çš„ç¡®ä¸æ˜¯æœ€å¥½çš„æ–‡å­—~</p>
<h2 id="å…³äºæœŸæƒæ± ">å…³äºæœŸæƒæ± </h2><p>ä»¥ä¸‹å†…å®¹ï¼Œ æ¥æºè‡ªçŸ¥ä¹ã€‚å¯å‚è€ƒï¼š<a href="http://zhuanlan.zhihu.com/p/20726127" target="_blank" rel="external">çŸ¥ä¹ä¸“æ </a>, ä½œè€…ï¼šé»„æµ·, è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚</p>
<p>å¯èƒ½æœ‰åˆ›ä¸šè€…ä¼šé—®äº†ï¼šæˆ‘ç»™äº†å‘˜å·¥è‚¡ä»½ï¼Œä»–3ä¸ªæœˆä»¥åå°±è·³æ§½äº†ï¼Œæˆ‘ä¸å°±äºäº†ã€‚å½“ç„¶ä¸ä¼šï¼Œé¦–å…ˆè®°ä½è¿™æ˜¯è‚¡æƒæ± ï¼Œä¸æ˜¯è‚¡ä»½æ± ã€‚ç»™çš„æ˜¯è‚¡æƒï¼Œä¸æ˜¯ç›´æ¥é€è‚¡ä»½ã€‚æ‰€è°“è‚¡æƒï¼Œå°±æ˜¯ä¸€å®šæ—¶å€™ï¼Œå¯ä»¥ä»¥è¡Œä½¿ä»·æ ¼ä¹°å…¥è‚¡ç¥¨ï¼Œè¿™ä¸ªè¡Œä½¿ä»·æ ¼ç”±è‘£äº‹ä¼šå†³å®šï¼Œä¸€èˆ¬ç‰¹åˆ«ä½ã€‚</p>
<p>ã€æœ‰è‚¡æƒçš„å‘˜å·¥å’Œåˆ›å§‹äººçš„åŒºåˆ«ã€‘</p>
<p>ä½ æœ€æ—©çš„å‘˜å·¥å¯èƒ½å’Œä½ ä¸€èµ·åº¦è¿‡äº†åˆ›ä¸šçš„å…¨è¿‡ç¨‹ï¼Œè€Œä¸”è¿˜é€šè¿‡è‚¡æƒæ± è·å¾—è‚¡æƒï¼Œé‚£ä½ å¯èƒ½ä¼šé—®ï¼Œé‚£ä»–ä»¬ç®—åˆ›å§‹äººä¹ˆï¼Ÿ</p>
<p>ç­”æ¡ˆæ˜¯ï¼Œä»–ä»¬ä¸åˆ›å§‹äººè¿˜æ˜¯æœ‰å¾ˆå¤§ä¸åŒçš„ã€‚é¦–å…ˆï¼Œå¦‚æœä»–ä»¬ä¸è¡Œä½¿æƒåˆ©ï¼Œä»–ä»¬ç”šè‡³éƒ½ä¸ç®—æ˜¯è‚¡ä¸œï¼Œè¯è¯­æƒå½“ç„¶ä¸ä¸€æ ·ã€‚å¦å¤–åˆ›å§‹äººå¼€å§‹éƒ½æ˜¯ã€æ²¡æœ‰å·¥èµ„ï¼Œç”šè‡³è‡ªå·±å°±æ˜¯æŠ•èµ„äººï¼Œæ‰¿æ‹…äº†æ‰€æœ‰çš„é£é™©ã€‚å‘˜å·¥å°±å¾ˆä¸ä¸€æ ·ï¼Œä¾ç„¶æ˜¯é›‡ä½£å…³ç³»ï¼Œé™¤äº†å¤±ä¸šé£é™©è¾ƒå¤§ï¼ŒåŒæ—¶åŠ³èµ„å¯èƒ½ç›¸å¯¹ä½ï¼Œä½†è¿™äº›éƒ½æ˜¯ä¸ªäººé£é™©ï¼Œè€Œä¸æ˜¯ä¼ä¸šé£é™©ã€‚æ‰€ä»¥è¿˜æ˜¯æœ‰å¾ˆå¤§åŒºåˆ«çš„ã€‚</p>
<p>è¶Šè¿ŸåŠ å…¥å…¬å¸çš„å‘˜å·¥éœ€è¦å†’çš„é£é™©è¶Šä½ã€‚</p>
<p>åˆ›å§‹äººåº”è¯¥æœ€ç»ˆæ‹¿æ•´ä¸ªå…¬å¸å¤§çº¦50%çš„è‚¡ä»½ã€‚é¦–å±‚ä¸‹é¢çš„5å±‚å‘˜å·¥çš„æ¯ä¸€å±‚æœ€ç»ˆéƒ½åˆ†åˆ«åˆ†åˆ°å¤§çº¦10%çš„å…¬å¸è‚¡ä»½ï¼Œæ¯ä¸€å±‚çš„å‘˜å·¥éƒ½å°†å¹³åˆ†è¿™10%çš„è‚¡ä»½ã€‚</p>
<p>ç°åœ¨ï¼Œä½ æå®šäº†ä¸€ä¸ªå…¬å¹³çš„ä»½è‚¡ç³»ç»Ÿï¼Œä½†è¿˜æœ‰ä¸€ä¸ªé‡è¦çš„åŸåˆ™ï¼šä½ å¿…é¡»æ‰§è¡Œâ€œè‚¡ä»½ç»‘å®šâ€(vesting)ã€‚è‚¡ä»½ç»‘å®šæœŸæœ€å¥½æ˜¯ 4 åˆ° 5 å¹´ã€‚ä»»ä½•äººéƒ½å¿…é¡»åœ¨å…¬å¸åšå¤Ÿèµ·ç  1 å¹´æ‰å¯æŒæœ‰è‚¡ä»½ï¼ˆåŒ…æ‹¬åˆ›å§‹äººï¼‰ã€‚å¥½çš„è‚¡ä»½ç»‘å®šè®¡åˆ’ä¸€èˆ¬æ˜¯å¤´ä¸€å¹´ç»™ 25%ï¼Œç„¶åæ¥ä¸‹æ¥æ¯ä¸ªæœˆè½å® 2%ã€‚å¦åˆ™ï¼Œä½ çš„åˆä½œåˆ›å§‹äººå°†åŠ å…¥å…¬å¸ 3 ä¸ªæ˜ŸæœŸåè·‘æ‰ï¼Œç„¶å 7 å¹´ååˆå‡ºç°ï¼Œå¹¶å£°ç§°ä»–æ‹¥æœ‰å…¬å¸çš„ 25% çš„è‚¡ä»½ã€‚</p>
<p>æ²¡æœ‰â€œè‚¡ä»½ç»‘å®šâ€æ¡æ¬¾ï¼Œä½ æ´¾è‚¡ä»½ç»™ä»»ä½•äººéƒ½æ˜¯ä¸é è°±çš„ï¼</p>
<p>æ²¡æœ‰æ‰§è¡Œâ€œè‚¡ä»½ç»‘å®šâ€æ˜¯æå…¶æ™®éçš„ç°è±¡ï¼Œåæœå¯ä»¥ååˆ†ä¸¥é‡ã€‚ä½ çœ‹åˆ°æœ‰äº›å…¬å¸çš„ 3 ä¸ªåˆ›å§‹äººæ²¡æ—¥æ²¡å¤œåœ°å·¥ä½œäº† 5 å¹´ï¼Œç„¶åä½ å‘ç°æœ‰äº›æ··è›‹åŠ å…¥å 2 ä¸ªæ˜ŸæœŸå°±ç¦»å¼€ï¼Œè¿™æ··è›‹è¿˜ä»¥ä¸ºä»–ä»ç„¶æ‹¥æœ‰å…¬å¸ 25% çš„è‚¡ä»½ï¼Œå°±å› ä¸ºä»–å·¥ä½œè¿‡çš„é‚£ 2 ä¸ªæ˜ŸæœŸã€‚</p>
<p>å¥½äº†ï¼Œè®©æˆ‘ä»¬æ¸…ç†ä¸€ä¸‹æ•´ä¸ªè®¾è®¡è“å›¾ä¸­æ²¡æå®šçš„å°é—®é¢˜ã€‚</p>
<p>å¦‚æœä½ çš„å…¬å¸èèµ„äº†ï¼Œè‚¡ä»½å¦‚ä½•åˆ†å‰²ï¼Ÿ</p>
<p>æŠ•èµ„å¯ä»¥æ¥è‡ªä»»ä½•æ–¹å‘ï¼Œä¸€ä¸ªå¤©ä½¿æŠ•èµ„äººï¼Œä¸€ä¸ªé£é™©æŠ•èµ„å…¬å¸ï¼Œæˆ–è€…æ˜¯æŸäººçš„è€çˆ¸ã€‚åŸºæœ¬ä¸Šï¼Œå›ç­”å¾ˆç®€å•ï¼š</p>
<p>æ–°çš„æŠ•èµ„å°†â€œç¨€é‡Šâ€æ‰€æœ‰äººçš„è‚¡ä»½ã€‚</p>
<p>åƒä¸‡ä¸è¦ç”¨åˆ†é…è‚¡æƒæ¥è§£å†³è¿™äº›é—®é¢˜ã€‚</p>
<p>å…¶å®ï¼Œä½ åªéœ€è¦é’ˆå¯¹æ¯ä½åˆ›å§‹äººæ‹¿çš„å·¥èµ„åšå¥½è®°å¸ï¼šä¸æ‹¿å·¥èµ„åˆ›å§‹äººå°±ç»™ å¥¹è®°ç€å·¥èµ„â€œæ¬ æ¡â€ã€‚å½“å…¬å¸æœ‰äº†è¶³å¤Ÿç°é‡‘ï¼Œå°±æ ¹æ®è¿™ä¸ªå·¥èµ„æ¬ æ¡è¡¥å‘å·¥èµ„ç»™å¥¹ã€‚æ¥ä¸‹æ¥çš„å‡ å¹´ä¸­ï¼Œå½“å…¬å¸ç°é‡‘æ”¶å…¥é€æ­¥å¢åŠ ï¼Œæˆ–è€…å½“å®Œæˆç¬¬ä¸€è½®é£é™©æŠ•èµ„åï¼Œä½ å¯ ä»¥ç»™æ¯ä¸€ä½åˆ›å§‹äººè¡¥å‘å·¥èµ„ï¼Œä»¥ç¡®ä¿æ¯ä¸€ä½åˆ›å§‹äººéƒ½å¯ä»å…¬å¸å¾—åˆ°å®Œå…¨ä¸€æ ·çš„å·¥èµ„æ”¶å…¥ã€‚</p>
<p><strong>åˆ›ä¸šæ„æƒ³æ˜¯æˆ‘æå‡ºçš„ï¼Œéš¾é“æˆ‘ä¸åº”è¯¥å¤šæ‹¿è‚¡ä»½å—ï¼Ÿ</strong></p>
<p>ä¸æ‹¿ã€‚æ„æƒ³åŸºæœ¬ä¸Šæ˜¯ä¸å€¼é’±çš„ã€‚ä»…ä»…å› ä¸ºæå‡ºåˆ›ä¸šæ„æƒ³å°±è·å¾—æ›´å¤šè‚¡ æƒï¼Œå› æ­¤å¯¼è‡´çº·äº‰æ˜¯ä¸å€¼å¾—çš„ã€‚å¦‚æœä½ ä»¬å½“ä¸­æœ‰äººé¦–å…ˆæå‡ºçš„åˆ›ä¸šæ„æƒ³ï¼Œä½†ä½ ä»¬éƒ½åŒæ—¶è¾å·¥å¹¶åŒæ—¶å¼€å§‹åˆ›ä¸šï¼Œä½ ä»¬åº”è¯¥æ‹¿åŒç­‰çš„è‚¡ä»½ã€‚ä¸ºå…¬å¸å·¥ä½œæ‰æ˜¯åˆ›é€ ä»·å€¼çš„åŸ å› ï¼Œè€Œä½ æ´—æ¾¡çš„æ—¶å€™çªå‘å¥‡æƒ³çš„â€œåˆ›ä¸šç‚¹å­â€æ ¹æœ¬ä¸å€¼ä»€ä¹ˆé’±ã€‚</p>
<p><strong>å¦‚æœåˆ›å§‹äººä¹‹ä¸€ä¸æ˜¯å…¨èŒæŠ•å…¥åˆ›ä¸šå…¬å¸å·¥ä½œï¼Œè¯¥æ€ä¹ˆåŠï¼Ÿ</strong></p>
<p>é‚£ä¹ˆï¼Œä»–ï¼ˆä»¬ï¼‰å°±ä¸èƒ½ç®—æ˜¯â€œåˆ›å§‹äººâ€ã€‚åœ¨æˆ‘çš„æ¦‚å¿µä¸­ï¼Œå¦‚æœ ä¸€ä¸ªäººä¸å…¨èŒæŠ•å…¥å…¬å¸çš„å·¥ä½œå°±ä¸èƒ½ç®—æ˜¯åˆ›å§‹äººã€‚ä»»ä½•è¾¹å¹²ç€ä»–ä»¬å…¶å®ƒçš„å…¨èŒå·¥ä½œè¾¹å¸®å…¬å¸å¹²æ´»çš„äººåªèƒ½æ‹¿å·¥èµ„æˆ–è€…å·¥èµ„â€œæ¬ æ¡â€ï¼Œä½†æ˜¯ä¸è¦ç»™è‚¡ä»½ã€‚å¦‚æœè¿™ä¸ªâ€œåˆ› å§‹äººâ€ä¸€ç›´å¹²ç€æŸä»½å…¨èŒå·¥ä½œç›´åˆ°å…¬å¸æ‹¿åˆ°é£æŠ•ï¼Œç„¶åè¾å·¥å…¨èŒè¿‡æ¥å…¬å¸å¹²æ´»ï¼Œä»–ï¼ˆä»¬ï¼‰å’Œç¬¬ä¸€æ‰¹å‘˜å·¥ç›¸æ¯”å¥½ä¸äº†å¤šå°‘ï¼Œæ¯•ç«Ÿä»–ä»¬å¹¶æ²¡æœ‰å†’å…¶ä»–åˆ›å§‹äººä¸€æ ·çš„é£é™©ã€‚</p>
<p><strong>å¦‚æœæœ‰äººä¸ºå…¬å¸æä¾›è®¾å¤‡æˆ–å…¶å®ƒæœ‰ä»·å€¼çš„ä¸œè¥¿ï¼ˆä¸“åˆ©ã€åŸŸåç­‰ï¼‰ï¼Œæ€ä¹ˆå¤„ç†ï¼Ÿ</strong></p>
<p>å¾ˆå¥½å•Šã€‚æŒ‰è¿™äº›ä¸œè¥¿çš„ä»·å€¼æ”¯ä»˜ç°é‡‘æˆ–å¼€ä¸ªâ€œæ¬ æ¡â€å’¯ï¼Œåˆ«ç»™è‚¡ä»½ã€‚ä½ å‡†ç¡®ç®—ä¸€ä¸‹ä»–ç»™å…¬å¸å¸¦æ¥çš„é‚£å°ç”µè„‘çš„ä»·å€¼ï¼Œæˆ–è€…ä»–ä»¬è‡ªå¸¦çš„æŸä¸ªèªæ˜çš„å­—å¤„ç†ä¸“åˆ©çš„ä»·æ ¼ï¼Œç»™ä»–ä»¬å†™ä¸‹æ¬ æ¡ï¼Œå…¬å¸æœ‰é’±åå†å¿è¿˜å³å¯ã€‚åœ¨åˆ›ä¸šåˆæœŸå°±ç”¨è‚¡æƒæ¥è´­ä¹°æŸäº›å…¬å¸éœ€è¦çš„ä¸œè¥¿å°†å¯¼è‡´ä¸å¹³ç­‰ï¼Œçº·äº‰å’Œä¸å…¬å¹³ã€‚</p>
<p><strong>å†é‡å¤ä¸€é!! ç”¨æ¬ æ¡ï¼Œ è€Œä¸æ˜¯è‚¡ä»½è§£å†³é—®é¢˜!!!!è§£å†³å¤§éƒ¨åˆ†çš„èµ„é‡‘çº·äº‰å’Œå„ç§å¸®åŠ©!!</strong></p>
<p>ä»Šå¤©ä¹°æ¥çš„ç”¨æˆ·ï¼Œæ˜å¤©è¿˜æ˜¯ä¸ä¼šæˆä¸ºä½ çš„å“ç‰Œç”¨æˆ·ã€‚</p>
]]></content>
    <summary type="html">
    <![CDATA[<p>â€œå¦‚æœä½ æ¸…é†’åœ°çŸ¥é“ä½ è¦å»å“ªå„¿ï¼Œè„‘æµ·ä¸­è¿˜ä¿ç•™ç€é‚£ä»½æ†§æ†¬ï¼Œé‚£ä¹ˆä½ å°±èƒ½é€¢å±±å¼€è·¯ï¼Œé‡æ°´æ­æ¡¥ï¼Œæ‰€æœ‰çš„é˜»ç¢éƒ½å°†æˆä¸ºä¸€ä¸ªä¸ªé‡Œç¨‹ç¢‘ï¼Œè¢«è¸©åœ¨ä½ çš„èº«åâ€¦â€¦â€</p>]]>
    
    </summary>
    
      <category term="åˆ›ä¸š" scheme="http://chocoluffy.com/tags/%E5%88%9B%E4%B8%9A/"/>
    
      <category term="å•†ä¸šè¯„è®º" scheme="http://chocoluffy.com/tags/%E5%95%86%E4%B8%9A%E8%AF%84%E8%AE%BA/"/>
    
      <category term="è¯»ä¹¦ç¬”è®°" scheme="http://chocoluffy.com/tags/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"/>
    
      <category term="åŸåˆ›" scheme="http://chocoluffy.com/categories/%E5%8E%9F%E5%88%9B/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[Angularå…¥é—¨-moduleå’Œservice]]></title>
    <link href="http://chocoluffy.com/2016/05/12/Angular%E5%85%A5%E9%97%A8-module%E5%92%8Cservice/"/>
    <id>http://chocoluffy.com/2016/05/12/Angularå…¥é—¨-moduleå’Œservice/</id>
    <published>2016-05-13T02:43:51.000Z</published>
    <updated>2016-05-13T13:51:50.000Z</updated>
    <content type="html"><![CDATA[<p>è‡ªå·±å­¦ä¹ angularæ—¶å€™è®°å½•çš„å­¦ä¹ ç¬”è®°ï¼Œè¿™ä¸€ç¯‡ä¸»è¦è®¨è®ºmoduleå’Œserviceã€‚</p>
<a id="more"></a>
<h2 id="How_to_define_a_module?">How to define a module?</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// define a module</span></span><br><span class="line">angular.module(<span class="string">'notesApp'</span>,</span><br><span class="line">    [<span class="string">'notesApp.ui'</span>, <span class="string">'thirdCompany.fusioncharts'</span>]);</span><br><span class="line"></span><br><span class="line"><span class="comment">// look up a module.</span></span><br><span class="line">angular.module(<span class="string">'notesApp'</span>);</span><br></pre></td></tr></table></figure>
<p>Also, make sure the file that defines the module is loaded first.</p>
<p>After defining the module, we use Angular to use these modules to bootstrap the application. <code>ng-app</code> takes an optional argument, the name of the modulr to load.</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">html</span> <span class="attribute">ng-app</span>=<span class="value">"notesApp"</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="title">head</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="title">title</span>&gt;</span>Hello AngularJS<span class="tag">&lt;/<span class="title">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">body</span>&gt;</span></span><br><span class="line">      Hello &#123; &#123; 1 + 1 &#125; &#125;nd time AngularJS</span><br><span class="line"><span class="tag">&lt;<span class="title">script</span> <span class="attribute">src</span>=<span class="value">"https://ajax.googleapis.com/ajax/libs/angularjs/1.2.19/angular.js"</span>&gt;</span><span class="undefined"></span><br><span class="line"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">script</span> <span class="attribute">type</span>=<span class="value">"text/javascript"</span>&gt;</span><span class="actionscript"></span><br><span class="line">angular.module(<span class="string">'notesApp'</span>, []); </span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="Controller_in_Angular">Controller in Angular</h2><ul>
<li>fetching data from server to UI.</li>
<li>presentation logic.</li>
<li>user interaction, what will happen when user clicks something. </li>
</ul>
<p>An AngularJS controller is almost always directly linked to a view or HTML. We will <strong>never have a controller that is not used in the UI</strong> (that kind of business logic goes into services).</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">script</span> <span class="attribute">type</span>=<span class="value">"text/javascript"</span>&gt;</span><span class="javascript"></span><br><span class="line">angular.module(<span class="string">'notesApp'</span>, []) .controller(<span class="string">'MainCtrl'</span>, [<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">          <span class="comment">// Controller-specific code goes here</span></span><br><span class="line">          <span class="built_in">console</span>.log(<span class="string">'MainCtrl has been created'</span>);</span><br><span class="line">        &#125;]);</span><br><span class="line"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>The above code define a module that depends on nothing, and a controller and its dependencies in the second argument, an array(the last argument in that array is the actual function itself).</p>
<p>We also introduce a new directive, ng-controller. This is used to tell AngularJS to go instantiate an instance of the controller with the given name, and attach it to the DOM element. In this case, it would load MainCtrl, which would end up printing the console.log() statement.</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">html</span> <span class="attribute">ng-app</span>=<span class="value">"notesApp"</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="title">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">title</span>&gt;</span>Notes App<span class="tag">&lt;/<span class="title">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">body</span> <span class="attribute">ng-controller</span>=<span class="value">"MainCtrl as ctrl"</span>&gt;</span></span><br><span class="line">      &#123; &#123; ctrl.helloMsg &#125; &#125; AngularJS.</span><br><span class="line">      <span class="tag">&lt;<span class="title">br</span>/&gt;</span></span><br><span class="line">      &#123; &#123; ctrl.goodbyeMsg &#125; &#125; AngularJS</span><br><span class="line"><span class="tag">&lt;<span class="title">script</span> <span class="attribute">src</span>=<span class="value">"https://ajax.googleapis.com/ajax/libs/angularjs/1.2.19/angular.js"</span>&gt;</span><span class="undefined"></span><br><span class="line"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">script</span> <span class="attribute">type</span>=<span class="value">"text/javascript"</span>&gt;</span><span class="actionscript"></span><br><span class="line">angular.module(<span class="string">'notesApp'</span>, [])</span><br><span class="line">  .controller(<span class="string">'MainCtrl'</span>, [<span class="function"><span class="keyword">function</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.helloMsg = <span class="string">'Hello '</span>;</span><br><span class="line">    <span class="keyword">var</span> goodbyeMsg = <span class="string">'Goodbye '</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">);</span><br><span class="line"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>The reason why it only shows the the hello message it that: We <strong>defined the variable helloMsg on the controllerâ€™s instance</strong> (using the â€œthisâ€ keyword, and it is how we expose the data from controller to front-end UI), and the variable goodbyeMsg as a local inner variable in the controllerâ€™s inâ€ stance (using the var keyword).</p>
<p>By using <code>ng-controller</code>, it allows us to associate an instance of controller with a UI element, in this case, the <body> tag.</body></p>
<p>â€œThisâ€ in javascipt, since it will be easily modified by whoever call the function, which causes the case that â€œthisâ€ inside and outside the function(the asychcronous function) may refer to two different objects. Thus, using a proxy variable will help!! Since with the help of the closure, that proxy varibale will always stay the same(pointing to â€œthisâ€) inside the function.</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">div</span> <span class="attribute">ng-repeat</span>=<span class="value">"note in ctrl.notes"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">span</span> <span class="attribute">class</span>=<span class="value">"label"</span>&gt;</span> &#123; &#123; note.label &#125; &#125;<span class="tag">&lt;/<span class="title">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">span</span> <span class="attribute">class</span>=<span class="value">"status"</span> <span class="attribute">ng-bind</span>=<span class="value">"note.done"</span>&gt;</span><span class="tag">&lt;/<span class="title">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>The two methods appear above are the same effect, but we recommend the second way, since the second one will be replaced before the the first one. </p>
<h2 id="Angularâ€™s_working_flow">Angularâ€™s working flow</h2><p>After the entire HTML is loaded, angular.js starts to find the <code>ng-app</code> directive, then using that directive, it looks for the angular modules defined and attached to that DOM element. </p>
<p>Then it starts to find other directive and binding elements inside the range. Every it meets <code>ng-controller</code> or <code>ng-repeat</code>, it creates a scope for that part of element. <strong>scopr is the context of that element</strong>, and it dictates what each DOM has access to in terms of functions, variables and so on.</p>
<p>Angular also adds <strong>watcher and listeners</strong> on HTMLâ€™s DOM element.</p>
<p>The way angular update the UI, only happens for a certain events including XHR, server calls, page loads and user interaction such clicks and type.</p>
<p><strong>what is XHR?</strong></p>
<p>XMLHttpRequest (XHR) is an API available to web browser scripting languages such as JavaScript. It is used to send HTTP or HTTPS requests to a web server and load the server response data back into the script.</p>
<p>Data from the response can be used to alter the current document in the browser window without loading a new web page, and despite the name of the API, this data can be in the form of not only XML, but also JSON, HTML or plain text.</p>
<p>Ajax depends heavily on XHR.</p>
<h2 id="More_directive">More directive</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">div</span> <span class="attribute">ng-repeat</span>=<span class="value">"note in ctrl.notes"</span> <span class="attribute">ng-class</span>=<span class="value">"ctrl.getNoteClass(note.done)"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">span</span> <span class="attribute">class</span>=<span class="value">"label"</span>&gt;</span> &#123; &#123; note.label &#125; &#125;<span class="tag">&lt;/<span class="title">span</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">span</span> <span class="attribute">class</span>=<span class="value">"assignee"</span> <span class="attribute">ng-show</span>=<span class="value">"note.assignee"</span> <span class="attribute">ng-bind</span>=<span class="value">"note.assignee"</span>&gt;</span><span class="tag">&lt;/<span class="title">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">self.getNoteClass = <span class="function"><span class="keyword">function</span>(<span class="params">status</span>) </span>&#123; </span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    done: status,</span><br><span class="line">    pending: !status</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p><code>ng-show</code> and <code>ng-hide</code> can help display or hide the DOM element. <code>ng-class</code> will add class to DOM element depending on the [1] if it is string [2] it is a json object, assign the key by the value of that key. <code>ng-switch on=&quot;&lt;some variable value in scopr&gt;&quot;</code> with <code>ng-switch-when=&quot;&lt;the conditional value of that variable&gt;&quot;</code> will create the if-else effect directly in html.</p>
<h2 id="Testing_in_Angularjs">Testing in Angularjs</h2><p><strong>Test Runner Versus Testing Framework</strong></p>
<p>We have often noticed that developers can sometimes get confused between the test runner and the testing framework. This could be because the same library often handles both responsibilities.</p>
<p>When working with JS (and AngularJS), we have two separate tools/ libraries for each purpose. Karma, which is the test runner, is solely responsible for finding all the unit tests in our codebase, opening browsers, running the tests in them, and capturing results. It does not care what language or framework we use for writing the tests; it simâ€ ply runs them.</p>
<p>Jasmine is the testing framework we will use. Jasmine defines the syntax with which we write our tests, the APIs, and the way we write our assertions. It is possible to not use Jasmine, and instead use something like mocha or some other framework to write tests for AngularJS.</p>
<h2 id="Model_in_angular">Model in angular</h2><p>The <code>ng-bind</code> and â€œ{ {  } }â€ we see in the above example demonstrates the one-way data-binding in angular, to use two-way data-binding, we opt for <code>ng-model</code>. As expected, such functionality is heavily used in user form.</p>
<h2 id="Angularâ€™s_service">Angularâ€™s service</h2><p>service refers to reuseable api that can be shared across the applications. One obvious difference between controllers and services is <strong>services are independent of views</strong>, while controllers drives UI.  </p>
<p><strong>Dependency injection</strong></p>
<p><strong>Dependency injection is a concept that started more on the server side.</strong> Dependency injection states that instead of creating an instance of the dependent service when we need it, the class or function should ask for it instead and the â€œinjectorâ€ will be responsible for figuring out how to create it.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Without Dependency Injection</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fetchDashboardData</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> $http = <span class="keyword">new</span> HttpService();</span><br><span class="line">  <span class="keyword">return</span> $http.get(<span class="string">'my/url'</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// With Dependency Injection</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fetchDashboardData</span>(<span class="params">$http</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> $http.get(<span class="string">'my/url'</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>The two probable ways to write service and why the latter is better? In the first example, we use â€œnewâ€ keyword, we have new instance everytime we use service while <strong>service in angular is singletons for the scope of our application, </strong> and two controllers ask for service A will get the vary same instance!</p>
<p>To use built-in services, we should remember that the built-in services are prefixed with â€œ<code>$</code>â€œ sign like â€œ<code>$log</code>â€œ, â€œ<code>$http</code>â€œ and so on.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">myModule.controller(<span class="string">"MainCtrl"</span>, [<span class="string">"$log"</span>, <span class="function"><span class="keyword">function</span>(<span class="params">$log</span>) </span>&#123;&#125;]);</span><br><span class="line"></span><br><span class="line">myModule.controller(<span class="string">"MainCtrl"</span>, <span class="function"><span class="keyword">function</span>(<span class="params">$log</span>) </span>&#123;&#125;);</span><br></pre></td></tr></table></figure>
<p>And here are the two ways we usually inject services, but why we prefer the former one, the one with safe style of dependency injection. </p>
<p>Because of the â€œuglifyâ€ procedure. During the uglifing process, the variable will be shortened to some random string, while at that time, we wonâ€™t be able to tell which service it is using! Also, since the â€œuglifyâ€ wonâ€™t change string constant, it will help to identify which service we are using. </p>
<p>Why we call â€œinjectionâ€? because the way we use those services like <code>myModule.controller(&quot;MainCtrl&quot;, [&quot;$log&quot;, &quot;$window&quot;, function($l, $w) {}]);</code> is similar to injecting those services for the function to use. </p>
<p><strong>Some common services</strong></p>
<p><strong>$location</strong></p>
<p>The <code>$location</code> service in AngularJS allows us to interact with the URL in the browser bar, and get and manipulate its value. Any changes made to the <code>$location</code> service get reflected in the browser, and any changes in the browser are imâ€ mediately captured in the <code>$location</code> service. The <code>$location</code> service has the folâ€ lowing functions, which allow us to work with the URL:</p>
<ul>
<li>absUrl. A getter that gives us the absolute URL in the browser (called <code>$location</code>. absUrl()).</li>
<li>url. A getter and setter that gets or sets the URL. If we give it an argument, it will set the URL; otherwise, it will return the URL as a string.</li>
<li>path. Again, a getter and setter that sets the path of the URL. Automatically adds the forward slash at the beginning. So <code>$location.path()</code> would give us the current path of the application, and <code>$location.path(&quot;/new&quot;)</code> would set the path to /new.</li>
<li>search. Sets or gets the search or query string of the current URL. Calling <code>$location.search()</code> without any arguments returns the search parameter as an obâ€ ject. Calling <code>$location.search(&quot;test&quot;)</code> removes the search parameter from the URL, and calling <code>$location.search(&quot;test&quot;, &quot;abc&quot;);</code> sets the search parameter test to abc.</li>
</ul>
<p><strong>$http</strong></p>
<p>We will deal with <code>$http</code> extensively in Chapter 6, but it is the core AngularJS service used to make XHR requests to the server from the application. Using the <code>$http</code> service, we can make GET and POST requests, set the headers and caching, and deal with server responses and failures.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">angular.module(<span class="string">'notesApp'</span>, [])</span><br><span class="line">  .controller(<span class="string">'MainCtrl'</span>, [<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> self = <span class="keyword">this</span>;</span><br><span class="line">    self.tab = <span class="string">'first'</span>;</span><br><span class="line">    self.open = <span class="function"><span class="keyword">function</span>(<span class="params">tab</span>) </span>&#123;</span><br><span class="line">      self.tab = tab;</span><br><span class="line">    &#125;;</span><br><span class="line">    &#125;])</span><br><span class="line">  .controller(<span class="string">'SubCtrl'</span>, [<span class="string">'ItemService'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">ItemService</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> self = <span class="keyword">this</span>; self.list = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> ItemService.list(); </span><br><span class="line">    &#125;;</span><br><span class="line">    </span><br><span class="line">    self.add = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      ItemService.add(&#123;</span><br><span class="line">        id: self.list().length + <span class="number">1</span>,</span><br><span class="line">        label: <span class="string">'Item '</span> + self.list().length</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;;</span><br><span class="line">    &#125;])</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// we created ItemService using angular's module function: factory. </span></span><br><span class="line">  .factory(<span class="string">'ItemService'</span>, [<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; </span><br><span class="line">    <span class="keyword">var</span> items = [</span><br><span class="line">      &#123;id: <span class="number">1</span>, label: <span class="string">'Item 0'</span>&#125;,</span><br><span class="line">      &#123;id: <span class="number">2</span>, label: <span class="string">'Item 1'</span>&#125;</span><br><span class="line">    ];</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      list: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> items; </span><br><span class="line">      &#125;,</span><br><span class="line">      add: <span class="function"><span class="keyword">function</span>(<span class="params">item</span>) </span>&#123;</span><br><span class="line">        items.push(item);</span><br><span class="line">      &#125; </span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;]</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<p>The point in the above example is that if we add one more item in one of the tabs, we can also see that item in the other tab, because the itemService instance in both tabs are the same. To summerize:</p>
<p>AngularJS guarantees the following:</p>
<ul>
<li>The service will be lazily instantiated. The very first time a controller, service, or directive asks for the service, it will be created.</li>
<li>The service definition function will be called once, and the instance stored. Every caller of this service will get this same, singleton instance handed to them.</li>
</ul>
<p><strong>There are several ways to defining a service: factory, provider and service.</strong></p>
<p>we use â€œfactoryâ€ if we define the service in a more functional way, like in the previous example, we return an object that contains functions; or we can use â€œserviceâ€ if we define the service in a classic class\OO way, which doesnâ€™t return anything. </p>
<p>An example of using â€œseriveâ€ is followed:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">ItemService</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> items = [</span><br><span class="line">        &#123;id: <span class="number">1</span>, label: <span class="string">'Item 0'</span>&#125;,</span><br><span class="line">        &#123;id: <span class="number">2</span>, label: <span class="string">'Item 1'</span>&#125;</span><br><span class="line">      ];</span><br><span class="line">  <span class="keyword">this</span>.list = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> items;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">this</span>.add = <span class="function"><span class="keyword">function</span>(<span class="params">item</span>) </span>&#123;</span><br><span class="line">        items.push(item);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">angular.module(<span class="string">'notesApp'</span>, [])</span><br><span class="line">  .service(<span class="string">'ItemService'</span>, [ItemService])</span><br><span class="line">  .controller(<span class="string">'MainCtrl'</span>, [<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> self = <span class="keyword">this</span>;</span><br><span class="line">    self.tab = <span class="string">'first'</span>; self.open = <span class="function"><span class="keyword">function</span>(<span class="params">tab</span>) </span>&#123;</span><br><span class="line">          self.tab = tab;</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;])</span><br><span class="line">  .controller(<span class="string">'SubCtrl'</span>, [<span class="string">'ItemService'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">ItemService</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> self = <span class="keyword">this</span>; self.list = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> ItemService.list(); </span><br><span class="line">    &#125;;</span><br><span class="line">    self.add = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      ItemService.add(&#123;</span><br><span class="line">            id: self.list().length + <span class="number">1</span>,</span><br><span class="line">            label: <span class="string">'Item '</span> + self.list().length</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;]</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<h2 id="Communication_with_server">Communication with server</h2><p><code>$http</code> is a core AngularJS service that allows us to communicate with server endpoints using XHR. Like XHR such tedious task, we usually instantiate a XMLHttpRequest Object and read the response, check the error codes and so on, or using jqueryâ€™s <code>$.ajax</code> syntax. </p>
<p>Also, it follows the Promise interface.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">angular.module(<span class="string">'resourceApp'</span>, [<span class="string">'ngResource'</span>])</span><br><span class="line">    .factory(<span class="string">'ProjectService'</span>, [<span class="string">'$resource'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">$resource</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> $resource(<span class="string">'/api/project/:id'</span>); </span><br><span class="line">    &#125;]);</span><br></pre></td></tr></table></figure>
<p><strong>use <code>ngResource</code> to handle RESTful API </strong> as it will make it extremely easy to send the â€œGETâ€\â€POSTâ€ request to the server. In the above example, we produce a service called â€œProjectServiceâ€, which depends on the built-in module called â€œ<code>$resource</code>â€œ, which wraps the RESTful endpoint to make our life easier as we can then use:</p>
<ul>
<li>ProjectService.query() to get a list of projects.</li>
<li>ProjectService.save({id: 15}, projectObj) to update a project with ID 15.</li>
<li>ProjectService.get({id: 19}) to get an individual project with ID 19.</li>
</ul>
<p>The following is a full-fledged example, showing how to use <code>ngResource</code> in front end to cooperate with the back end.</p>
<div style="text-align:center" markdown="1"><br>  <iframe src="http://angular-example-dev.us-east-1.elasticbeanstalk.com/http-post-example.html" width="100%" height="500"><br>    <p>Your browser does not support iframes.</p><br>  </iframe><br></div>

<p>The source code is listed as followed:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// server.js (Express 4.0)</span></span><br><span class="line"><span class="keyword">var</span> express        = <span class="built_in">require</span>(<span class="string">'express'</span>);</span><br><span class="line"><span class="keyword">var</span> morgan         = <span class="built_in">require</span>(<span class="string">'morgan'</span>);</span><br><span class="line"><span class="keyword">var</span> bodyParser     = <span class="built_in">require</span>(<span class="string">'body-parser'</span>);</span><br><span class="line"><span class="keyword">var</span> methodOverride = <span class="built_in">require</span>(<span class="string">'method-override'</span>);</span><br><span class="line"><span class="keyword">var</span> app            = express();</span><br><span class="line"></span><br><span class="line">app.use(express.static(__dirname + <span class="string">'/public'</span>)); <span class="comment">// this line is important as we will serve those html file directly in screen as option, in those html front-end example, we will use angular's ngResource to create http request for the backend of this server.js (the endpoint we just created using express's router).</span></span><br><span class="line">app.use(morgan(<span class="string">'dev'</span>)); 					<span class="comment">// log every request to the console</span></span><br><span class="line">app.use(bodyParser()); 						<span class="comment">// pull information from html in POST</span></span><br><span class="line">app.use(methodOverride()); 					<span class="comment">// simulate DELETE and PUT</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> router = express.Router();</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> notes = [</span><br><span class="line">  &#123;id: <span class="number">1</span>, label: <span class="string">'First Note'</span>, author: <span class="string">'Shyam'</span>&#125;,</span><br><span class="line">  &#123;id: <span class="number">2</span>, label: <span class="string">'Second Note'</span>, author: <span class="string">'Brad'</span>&#125;,</span><br><span class="line">  &#123;id: <span class="number">3</span>, label: <span class="string">'Middle Note'</span>, author: <span class="string">'Someone'</span>&#125;,</span><br><span class="line">  &#123;id: <span class="number">4</span>, label: <span class="string">'Last Note'</span>, author: <span class="string">'Shyam'</span>&#125;,</span><br><span class="line">  &#123;id: <span class="number">5</span>, label: <span class="string">'Really the last Note'</span>, author: <span class="string">'Shyam'</span>&#125;</span><br><span class="line"></span><br><span class="line">];</span><br><span class="line"><span class="keyword">var</span> lastId = <span class="number">6</span>;</span><br><span class="line"></span><br><span class="line">router.get(<span class="string">'/note'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">  res.send(notes);</span><br><span class="line">&#125;);</span><br><span class="line">router.post(<span class="string">'/note'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> note = req.body;</span><br><span class="line">  note.id = lastId; <span class="comment">// An smart way to keep track of the last id.</span></span><br><span class="line">  lastId++;</span><br><span class="line">  notes.push(note);</span><br><span class="line">  res.send(note);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">router.post(<span class="string">'/note/:id/done'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> noteId = req.params.id;</span><br><span class="line">  <span class="keyword">var</span> note = <span class="literal">null</span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; notes.length; i++) &#123;</span><br><span class="line">    <span class="keyword">if</span> (notes[i].id == req.params.id) &#123;</span><br><span class="line">      note = notes[i];</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  note.label = <span class="string">'Done - '</span> + note.label;</span><br><span class="line">  res.send(notes);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">router.get(<span class="string">'/note/:id'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; notes.length; i++) &#123;</span><br><span class="line">    <span class="keyword">if</span> (notes[i].id == req.params.id) &#123;</span><br><span class="line">      res.send(notes[i]);</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  res.send(&#123;msg: <span class="string">'Note not found'</span>&#125;, <span class="number">404</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">router.post(<span class="string">'/note/:id'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; notes.length; i++) &#123;</span><br><span class="line">    <span class="keyword">if</span> (notes[i].id == req.params.id) &#123;</span><br><span class="line">      notes[i] = req.body;</span><br><span class="line">      notes[i].id = req.params.id;</span><br><span class="line">      res.send(notes[i]);</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  res.send(&#123;msg: <span class="string">'Note not found'</span>&#125;, <span class="number">404</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">router.post(<span class="string">'/login'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'API LOGIN FOR '</span>, req.body);</span><br><span class="line">  res.send(&#123;msg: <span class="string">'Login successful for '</span> + req.body.username&#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">app.use(<span class="string">'/api'</span>, router);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">app.listen(<span class="number">8000</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'Open http://localhost:8000 to access the files now'</span>); <span class="comment">// shoutout to the user</span></span><br></pre></td></tr></table></figure>
<p>And the front-end part code is:</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- File: chapter6/public/http-post-example.html --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">html</span> <span class="attribute">ng-app</span>=<span class="value">"notesApp"</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="title">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">title</span>&gt;</span>HTTP Post Example<span class="tag">&lt;/<span class="title">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">style</span>&gt;</span><span class="css"></span><br><span class="line">    <span class="class">.item</span> <span class="rules">&#123;</span><br><span class="line">      <span class="rule"><span class="attribute">padding</span>:<span class="value"> <span class="number">10px</span></span></span>;</span><br><span class="line">    &#125;</span></span><br><span class="line">  </span><span class="tag">&lt;/<span class="title">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="title">body</span> <span class="attribute">ng-controller</span>=<span class="value">"MainCtrl as mainCtrl"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">h1</span>&gt;</span>Hello Servers!<span class="tag">&lt;/<span class="title">h1</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">div</span> <span class="attribute">ng-repeat</span>=<span class="value">"todo in mainCtrl.items"</span></span><br><span class="line">       <span class="attribute">class</span>=<span class="value">"item"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">div</span>&gt;</span><span class="tag">&lt;<span class="title">span</span> <span class="attribute">ng-bind</span>=<span class="value">"todo.label"</span>&gt;</span><span class="tag">&lt;/<span class="title">span</span>&gt;</span><span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">div</span>&gt;</span>- by <span class="tag">&lt;<span class="title">span</span> <span class="attribute">ng-bind</span>=<span class="value">"todo.author"</span>&gt;</span><span class="tag">&lt;/<span class="title">span</span>&gt;</span><span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">div</span>&gt;</span><span class="tag">&lt;<span class="title">span</span> <span class="attribute">ng-bind</span>=<span class="value">"todo.messege"</span>&gt;</span><span class="tag">&lt;/<span class="title">span</span>&gt;</span><span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="title">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">form</span> <span class="attribute">name</span>=<span class="value">"addForm"</span></span><br><span class="line">          <span class="attribute">ng-submit</span>=<span class="value">"mainCtrl.add()"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">input</span> <span class="attribute">type</span>=<span class="value">"text"</span></span><br><span class="line">             <span class="attribute">placeholder</span>=<span class="value">"Label"</span></span><br><span class="line">             <span class="attribute">ng-model</span>=<span class="value">"mainCtrl.newTodo.label"</span></span><br><span class="line">             <span class="attribute">required</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">input</span> <span class="attribute">type</span>=<span class="value">"text"</span></span><br><span class="line">             <span class="attribute">placeholder</span>=<span class="value">"Author"</span></span><br><span class="line">             <span class="attribute">ng-model</span>=<span class="value">"mainCtrl.newTodo.author"</span></span><br><span class="line">             <span class="attribute">required</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">input</span> <span class="attribute">type</span>=<span class="value">"text"</span> <span class="attribute">placeholder</span>=<span class="value">"messege"</span> <span class="attribute">ng-model</span>=<span class="value">"mainCtrl.newTodo.messege"</span> <span class="attribute">required</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">input</span> <span class="attribute">type</span>=<span class="value">"submit"</span></span><br><span class="line">             <span class="attribute">value</span>=<span class="value">"Add"</span></span><br><span class="line">             <span class="attribute">ng-disabled</span>=<span class="value">"addForm.$invalid"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">form</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="title">script</span></span><br><span class="line">  <span class="attribute">src</span>=<span class="value">"https://ajax.googleapis.com/ajax/libs/angularjs/1.3.11/angular.js"</span>&gt;</span><span class="undefined"></span><br><span class="line"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">script</span>&gt;</span><span class="actionscript"></span><br><span class="line">  angular.module(<span class="string">'notesApp'</span>, [])</span><br><span class="line">    .controller(<span class="string">'MainCtrl'</span>, [<span class="string">'$http'</span>, <span class="function"><span class="keyword">function</span><span class="params">($http)</span> </span>&#123;</span><br><span class="line">      <span class="keyword">var</span> self = <span class="keyword">this</span>;</span><br><span class="line">      self.items = [];</span><br><span class="line">      self.newTodo = &#123;&#125;;</span><br><span class="line">      <span class="keyword">var</span> fetchTodos = <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> $http.<span class="keyword">get</span>(<span class="string">'/api/note'</span>).then(</span><br><span class="line">            <span class="function"><span class="keyword">function</span><span class="params">(response)</span> </span>&#123;</span><br><span class="line">              self.items = response.data; <span class="comment">// set the items to be the return data.</span></span><br><span class="line">            &#125;, <span class="function"><span class="keyword">function</span><span class="params">(errResponse)</span> </span>&#123;</span><br><span class="line">              console.error(<span class="string">'Error while fetching notes'</span>);</span><br><span class="line">            &#125;);</span><br><span class="line">      &#125;;</span><br><span class="line"></span><br><span class="line">      fetchTodos();</span><br><span class="line"></span><br><span class="line">      self.add = <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        $http.post(<span class="string">'/api/note'</span>, self.newTodo)</span><br><span class="line">            .then(fetchTodos) <span class="comment">// update items.</span></span><br><span class="line">            .then(<span class="function"><span class="keyword">function</span><span class="params">(response)</span> </span>&#123;</span><br><span class="line">              self.newTodo = &#123;&#125;; <span class="comment">// clear the form.</span></span><br><span class="line">            &#125;);</span><br><span class="line">      &#125;;</span><br><span class="line"></span><br><span class="line">    &#125;]);</span><br><span class="line"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="$http">$http</h2><p>Promise-style syntax.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">angular.module(<span class="string">'notesApp'</span>, [])</span><br><span class="line">  .controller(<span class="string">'MainCtrl'</span>, [<span class="string">'$http'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">$http</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> self = <span class="keyword">this</span>;</span><br><span class="line">    self.items = [];</span><br><span class="line">    $http.get(<span class="string">'/api/note'</span>).then(<span class="function"><span class="keyword">function</span>(<span class="params">response</span>) </span>&#123;</span><br><span class="line">      self.items = response.data;</span><br><span class="line">      &#125;, <span class="function"><span class="keyword">function</span>(<span class="params">errResponse</span>) </span>&#123;</span><br><span class="line">          <span class="built_in">console</span>.error(<span class="string">'Error while fetching notes'</span>);</span><br><span class="line">        &#125;);</span><br><span class="line">  &#125;]</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<p>why Promise is better? try thinking about a case when we have to make 3 http request in a row, when the latter ones will depend on the information from the first ones. If using callbacks, we will need to nest them all together!</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">$http.get(<span class="string">'/api/server-config'</span>)</span><br><span class="line">  .then(<span class="function"><span class="keyword">function</span>(<span class="params">configResponse</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> $http.get(<span class="string">'/api/'</span> + configResponse.data.USER_END_POINT);</span><br><span class="line">  &#125;)</span><br><span class="line">  .then(<span class="function"><span class="keyword">function</span>(<span class="params">userResponse</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> $http.get(<span class="string">'/api/'</span> + userResponse.data.id + <span class="string">'/items'</span>);</span><br><span class="line">  &#125;)</span><br><span class="line">  .then(<span class="function"><span class="keyword">function</span>(<span class="params">itemResponse</span>) </span>&#123; </span><br><span class="line">    <span class="comment">// Display items here</span></span><br><span class="line">  &#125;, <span class="function"><span class="keyword">function</span>(<span class="params">error</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// Common error handling</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h2 id="Additional_information">Additional information</h2><p><strong>difference between Promise and callback in js?</strong></p>
<p>As for their effect, they are pretty like the same in terms of being asynchronous while Promiseâ€™s syntax looks far more clear than nested callbacks.</p>
<p>Promises provide a more succinct and clear way of representing sequential asynchronous operations in javascript. They are effectively a different syntax for achieving the same effect as callbacks. The advantage is increased readability. Something like this</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">aAsync()</span><br><span class="line">  .then(bAsync)</span><br><span class="line">  .then(cAsync)</span><br><span class="line">  .done(finish);</span><br><span class="line"><span class="comment">// Promise is much more readable then the equivalent of passing each of those individual functions as callbacks, like:</span></span><br><span class="line"></span><br><span class="line">Async(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> bAsync(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> cAsync(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">            finish()</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>ç®€å•æ¥è¯´ï¼Œ Promiseå°±æ˜¯syntactic sugarã€‚Everything that can be written in Promise can be written in nested callbacks.</p>
<p><strong>difference between websocket and RESTful API?</strong></p>
<p>It really depends on the context, whether it requires less interaction like reading a blog, or requires time browsing; or it requires rich interaction and messege sending. For the former, close the connection during reading or browsing may actually save resources, which is exactly what HTTP does, while the latter one calls for websocket!!</p>
<p><strong>HTTP is a pull service, while websocket is bidirectional.</strong></p>
<p>å‚è€ƒ<a href="https://www.pubnub.com/blog/2015-01-05-websockets-vs-rest-api-understanding-the-difference/" target="_blank" rel="external">è¿™ç¯‡åšå®¢</a>ä»‹ç»å¾—éå¸¸è¯¦ç»†!!</p>
]]></content>
    <summary type="html">
    <![CDATA[<p>è‡ªå·±å­¦ä¹ angularæ—¶å€™è®°å½•çš„å­¦ä¹ ç¬”è®°ï¼Œè¿™ä¸€ç¯‡ä¸»è¦è®¨è®ºmoduleå’Œserviceã€‚</p>]]>
    
    </summary>
    
      <category term="angularjs" scheme="http://chocoluffy.com/tags/angularjs/"/>
    
      <category term="javascript" scheme="http://chocoluffy.com/tags/javascript/"/>
    
      <category term="æŠ€æœ¯" scheme="http://chocoluffy.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[ä¸€æ´¾èƒ¡è¨€[ç¬¬ä¸‰æœŸ]-æ°‘ä¸»çš„ä¸æ»¡]]></title>
    <link href="http://chocoluffy.com/2016/05/07/%E4%B8%80%E6%B4%BE%E8%83%A1%E8%A8%80-%E7%AC%AC%E4%B8%89%E6%9C%9F-%E6%B0%91%E4%B8%BB%E7%9A%84%E4%B8%8D%E6%BB%A1/"/>
    <id>http://chocoluffy.com/2016/05/07/ä¸€æ´¾èƒ¡è¨€-ç¬¬ä¸‰æœŸ-æ°‘ä¸»çš„ä¸æ»¡/</id>
    <published>2016-05-08T01:07:37.000Z</published>
    <updated>2016-05-12T18:12:40.000Z</updated>
    <content type="html"><![CDATA[<p>æˆ‘ä¸æ¸…æ¥šæˆ‘çš„é€‰æ‹©ä¼šæ˜¯ä»€ä¹ˆï¼Œ ä½†è¿™å¹¶ä¸æ˜¯æˆ‘æ‹’ç»å»çœ‹è¿™ä¸ªé—®é¢˜çš„ç†ç”±ï¼Œ æˆ–è®¸åœ¨ç›¸ä¿¡ä»–ä»¬é’ˆé”‹ç›¸å¯¹çš„èƒŒåï¼Œ å°±æ˜¯æˆ‘çš„ç«‹åœºã€‚</p>
<a id="more"></a>
<div style="text-align:center" markdown="1"><img src="http://ac-TC2Vc5Tu.clouddn.com/772fc5772b052551.jpeg" alt="flower"></div>

<p>è‡ªç”±ï¼Œ å°±åœ¨äºäººä»¬é€‰æ‹©ä»–ä»¬ä»·å€¼ä¸ç›®æ ‡çš„èƒ½åŠ›ã€‚</p>
<p>æˆ‘ä»¬åœ¨æ”¿æ²»ç”Ÿæ´»ä¸­å…¬æ°‘çš„æˆ–è€…å¡‘é€ æ€§çš„ä¸€é¢åœ¨å¾ˆå¤§ç¨‹åº¦ä¸Šï¼Œ å·²ç»è®©ä½äºè‡ªç”±ä¸»ä¹‰ã€‚ è€Œè¿™æ­£æ˜¯æˆ‘ä»¬ç°åœ¨å‚ä¸æ”¿æ²»æ´»åŠ¨çš„å›°å¢ƒï¼Œ æ”¿æ²»ï¼Œ æˆ–è€…è¯´ï¼Œ å…¬å…±å“²å­¦ï¼Œ æ˜¯å¦åº”è¯¥å…·æœ‰å¡‘é€ æ€§ã€‚</p>
<p>å¤ä»£çš„æ”¿æ²»ç†è®ºï¼Œ æ¯”å¦‚äºšé‡Œå£«å¤šå¾·ï¼Œ è®¤ä¸ºæ”¿æ²»çš„ç›®æ ‡å°±æ˜¯åŸ¹å…»å¾·è¡Œå’Œè¾¾åˆ°æŸç§çš„å–„ã€‚è€Œè¿™ç§è¾¾åˆ°æŸç§å–„çš„è§‚ç‚¹ï¼Œ åœ¨ç°åœ¨éå¸¸å®¹æ˜“è¢«åé©³ï¼Œ æˆ‘ä»¬å¾ˆå®¹æ˜“è¯´ï¼Œ è¿™æ˜¯ä»·å€¼åˆ¤æ–­ï¼Œ ä»€ä¹ˆæ˜¯å–„å‘¢ï¼Ÿä»€ä¹ˆæ˜¯ä½ è®¤ä¸ºçš„å–„çš„å‘¢ï¼Ÿå…ˆæŠ›å¼€ä»·å€¼åˆ¤æ–­çš„è¿™ç§åšæ³•æ¥è¯´ï¼Œ æ¯•ç«Ÿå¦‚æœåœ¨æƒ…æ„¿å¯¹ä¸€ä»¶äº‹ï¼Œ ä¸€ç§æ€åº¦æ·±å…¥äº†è§£ä¹‹å‰å°±æ”¾å¼ƒäº†è§£å®ƒçš„æœºä¼šçš„è¯ï¼Œ æˆ‘ä»¬ä¼šé”™è¿‡å¾ˆå®è´µçš„ä¸œè¥¿ã€‚å›åˆ°è¿™ç§è‰¯å–„çš„æƒ³æ³•ï¼Œ å…¶å®è¿™ç§è§‚å¿µè‡ªç„¶åœ°ä¼šå‘å±•å‡ºä¸€ç§ç¤¾ä¼šå¥‘çº¦è®ºï¼Œ è€Œè¿™ä¸ªå¥‘çº¦çš„ç›®çš„æ­£æ˜¯ä¿è¯äººä»¬å¾€é‚£ç§å–„çš„æ–¹å‘å‘å±•ã€‚å®ƒè¦æ±‚äººä»¬éœ€è¦æœ‰å¯¹å…¬å…±äº‹åŠ¡çš„çŸ¥è¯†ï¼Œ å½’å±æ„Ÿï¼Œ å¯¹é›†ä½“çš„å…³ç³»ï¼Œ å’Œå…±åŒé“å¾·çš„ç»´ç³»ï¼Œ ä¸€ç§å…¬æ°‘çš„å‚ä¸æ„Ÿï¼ˆç›¸æ¯”äºç°åœ¨çš„è‡ªç”±ä¸»ä¹‰ï¼‰ã€‚</p>
<p>å¯¹ä¸€ä¸ªå…±åŒæ–¹å‘çš„è®¤å¯ï¼Œ æ„å‘³ç€ç‰ºç‰²æŸäº›ä¸ªäººæ„æ„¿ã€‚è¿™æ˜¯æˆ‘ä»¬éƒ½èƒ½æƒ³åˆ°çš„ï¼Œ è€Œè¿™ç§å–èˆï¼Œ æˆ–è®¸å°±æ˜¯å…¶ä¸­ä¸€ä¸ªå®šä¹‰äº†è‡ªç”±ä¸»ä¹‰å’Œä¸Šè¿°å…±å’Œä¸»ä¹‰çš„åŒºåˆ«ä¹‹ä¸€ã€‚è‡ªç”±ä¸»ä¹‰çš„å®£æ‰¬è€…ä¼šè¯´ï¼Œ æ”¿æ²»ç†è®ºä¸æ˜¯æŸç§ç‰¹å®šçš„è‰¯å–„ç”Ÿæ´»è§‚å¿µï¼Œ è€Œæ˜¯åšæŒå®½å®¹ã€å…¬æ­£çš„ç¨‹åºä»¥åŠå°Šé‡ä¸ªäººæƒåˆ©ï¼Œ ä»å„ç§ç¾å›½æœ€é«˜æ³•é™¢çš„åˆ¤å†³æ¡ˆä¾‹æˆ‘ä»¬ä¹Ÿèƒ½çœ‹å‡ºä¸€äº›å€¾å‘æ€§ï¼Œ è‡ªç”±è¨€è®ºçš„æƒåˆ©æ˜¯è¢«ç¾å›½äººæ°‘é•Œåˆ»åœ¨å¿ƒçš„ä¸€ç§inbornæƒåˆ©ï¼Œ æ³•å®˜å¯¹ä»»ä½•æœ‰å¯èƒ½ä¼¤å®³åˆ°è¿™ç§è‡ªç”±çš„å—…è§‰æ˜¯å¼‚å¸¸çµæ•ï¼Œ æˆ–è®¸ä¹Ÿæ˜¯ç¼˜å› ç¾å›½äººå¿ƒé‡Œå¯¹å¤§æ”¿åºœå¤©ç”Ÿçš„åæ„Ÿã€‚</p>
<p>æˆ‘ä»¬èƒ½ä¸èƒ½ç”¨ä¹‹å‰æ‰€è¯´çš„ä»·å€¼åˆ¤æ–­è¿™ç§è¯´æ³•ï¼Œ æ¥æŒ‡å‡ºå…±å’Œä¸»ä¹‰çš„é—®é¢˜è€Œæ”¯æŒè‡ªç”±ä¸»ä¹‰å‘¢ï¼Ÿ å…¶å®ä»”ç»†æƒ³æƒ³ï¼Œ è¿™ç§ä»·å€¼åˆ¤æ–­çš„è®ºæ–­æ ¸å¿ƒæ˜¯ç›¸å¯¹ä¸»ä¹‰ã€‚ ç›¸å¯¹ä¸»ä¹‰çš„ä¸€ä¸ªæ˜æ˜¾çš„æ ‡å¿—å°±æ˜¯ï¼Œ ä¸å»ä¸»å¼ ä»€ä¹ˆï¼Œ è€Œæ˜¯å˜ç°ä¸ºè´¨é—®â€œè°æ¥åˆ¤æ–­ï¼Ÿè°æ¥å†³å®šï¼Ÿâ€ã€‚ ä»–ä»¬ä¼šé—®ï¼Œ ä»€ä¹ˆæ˜¯è‰¯å–„ï¼Ÿä»€ä¹ˆæ˜¯é«˜é›…å’Œæ±¡ç§½ï¼Ÿ ç„¶è€Œæˆ‘ä»¬ä¹Ÿå¯ç”±æ­¤é—®å›ä»–ä»¬â€œä»€ä¹ˆæ‰æ˜¯ä»–ä»¬å£ä¸­çš„å®½å®¹ã€è‡ªç”±å’Œå…¬å¹³å‘¢ï¼Ÿâ€ã€‚ä»¥ç›¸å¯¹ä¸»ä¹‰æ¥ä¸ºè‡ªç”±ä¸»ä¹‰è¾©æŠ¤æ ¹æœ¬å°±ç®—ä¸ä¸Šæ˜¯ä¸€ç§è¾©æŠ¤ã€‚</p>
<p>ä½†ä»”ç»†å»è¿½ç©¶è‡ªç”±ä¸»ä¹‰å’Œå…±å’Œä¸»ä¹‰ï¼Œ æˆ‘ä»¬ä¼šå‘ç°ä¸€ä¸ªç»å¸¸æå‡ºçš„é—®é¢˜ï¼Œ æƒåˆ©å’Œå–„å“ªä¸ªæ›´é‡è¦ï¼Ÿè¿™é‡Œçš„å–„ï¼Œ æˆ‘ä»¬å¯ä»¥æƒ³ä¸ºæ˜¯ä¸€ç§é“å¾·ä¸Šçš„ä¹‰åŠ¡ï¼Œ å’Œè®¤åŒã€‚æˆ‘ä»¬ç©¶ç«Ÿæ˜¯ä¸€å‰¯æ— è´Ÿè·è‡ªæˆ‘ï¼ˆthe unencumbered selfï¼‰çš„è‡ªç”±ä¸»ä¹‰å½¢è±¡, è¿˜æ˜¯ä¸ºæˆ‘ä»¬å®¶åº­ã€æ°‘æ—ã€æ–‡åŒ–çš„èº«ä»½æ‰€èµ‹äºˆçš„ç›®æ ‡æ‰€æŸç¼šï¼Ÿåœ¨å¾ˆå¤šæƒ…å†µä¸‹ï¼Œ ä¹Ÿæ­£æ˜¯è¿™äº›æŸç¼šå¸¦ç»™æˆ‘ä»¬å›°å¢ƒå’Œç—›è‹¦ã€‚</p>
<p>ä¸¾ä¸€ä¸ªæ —å­ï¼Œ å†…æˆ˜å‰çš„ç½—ä¼¯ç‰¹æå¤§å°†å†›ï¼Œ èº«ä¸ºè”é‚¦å†›é˜Ÿçš„ä¸€åé«˜çº§å°†é¢†ï¼Œ æå°†å†›åå¯¹åˆ†è£‚ï¼Œ ç„¶åå†æˆ˜äº‰è¿«è¿‘çš„æ—¶å€™ï¼Œ ä»–è®¤ä¸ºä»–å¯¹å¼—å‰å°¼äºšå·çš„è´£ä»»è¶…è¿‡äº†ä»–å¯¹è”é‚¦çš„è´£ä»»ï¼Œ äºæ˜¯ä»–æ¯…ç„¶ä¼šåˆ°å®¶ä¹¡ï¼Œ å’Œä»–çš„å®¶ä¹¡äººæ°‘å…±æ‚£éš¾ã€‚ä¸€ä¸ªè®©äººå¿ƒé…¸çš„å›°å¢ƒã€‚å¦‚æœæˆ‘ä»¬è®¤ä¸ºï¼Œä¸è‡ªå·±äººæ°‘ç«™åœ¨ä¸€èµ·çš„å¬å”¤æ˜¯ä¸€ç§é“å¾·è¦æ±‚è€Œä¸æ˜¯æƒ…æ„Ÿè¡¨è¾¾çš„è¯ï¼Œ è¿™æ­£æ˜¯å°è¯äº†å‰æ–‡å…³äºè‰¯å–„ï¼Œ å…³äºé“å¾·ä¹‰åŠ¡ä¸Šçš„å›°å¢ƒã€‚ç›¸åï¼Œ ä¸€ä¸ªè‡ªç”±ä¸»ä¹‰è€…ï¼Œ ä»–ä»¬æ²¡æœ‰è¿™æ ·å­çš„æŸç¼šï¼Œ ä»–ä»¬åªä¸ºä»–ä»¬é€‰æ‹©å»æ‰¿æ‹…çš„è´£ä»»æ‰€çº¦æŸï¼Œ ä¹Ÿåªå»æ‰¿æ‹…ä»–ä»¬é€‰æ‹©å»æ‰¿æ‹…çš„éƒ¨åˆ†ã€‚ä»”ç»†æƒ³æƒ³ï¼Œ æˆ‘ä»¬å…¶å®å¸¸å¸¸å´‡æ•¬è¿™äº›åƒæå°†å†›ä¸€æ ·çš„äººï¼Œä¸ä¸€å®šæ˜¯å› ä¸ºä»–ä»¬åšå‡ºçš„é€‰æ‹©ï¼Œ è€Œæ˜¯å› ä¸ºä»–ä»¬çš„è€ƒè™‘æ‰€åæ˜ çš„ç‰¹è´¨ï¼ï¼ä½œä¸ºèƒ½å¤Ÿåæ€è‡ªèº«å¤„å¢ƒçš„å­˜åœ¨è€…ï¼Œ çœ‹æ¸…æ¥šè‡ªå·±çš„ç”Ÿå‘½å¤„å¢ƒå¹¶æ‹…å½“èµ·æ¥ï¼Œ è‡ªå·±æ·±æ·±å·å…¥å…¶ä¸­çš„ç‰¹å®šç”Ÿæ´»å¯¹è‡ªå·±æœ‰æ‰€è¦æ±‚ï¼Œ è€Œè‡ªå·±åˆæ„è¯†åˆ°è¿™ç§ç”Ÿæ´»çš„ç‰¹æ®Šæ€§ï¼Œ ä¹Ÿå°±æ˜¯è¯´æ„è¯†åˆ°å­˜åœ¨æ›´åŠ å¹¿é˜”çš„ä¸–ç•Œï¼Œ å¦å¤–çš„ç”Ÿæ´»æ–¹å¼ã€‚</p>
<p>ä¹¦æ‘˜ æ‘˜è‡ªã€Šæ°‘ä¸»çš„ä¸æ»¡ã€‹</p>
<p>2015.7.26</p>
]]></content>
    <summary type="html">
    <![CDATA[<p>æˆ‘ä¸æ¸…æ¥šæˆ‘çš„é€‰æ‹©ä¼šæ˜¯ä»€ä¹ˆï¼Œ ä½†è¿™å¹¶ä¸æ˜¯æˆ‘æ‹’ç»å»çœ‹è¿™ä¸ªé—®é¢˜çš„ç†ç”±ï¼Œ æˆ–è®¸åœ¨ç›¸ä¿¡ä»–ä»¬é’ˆé”‹ç›¸å¯¹çš„èƒŒåï¼Œ å°±æ˜¯æˆ‘çš„ç«‹åœºã€‚</p>]]>
    
    </summary>
    
      <category term="å…¬ä¼—å·æ–‡ç« " scheme="http://chocoluffy.com/tags/%E5%85%AC%E4%BC%97%E5%8F%B7%E6%96%87%E7%AB%A0/"/>
    
      <category term="ç¤¾ä¼šäººç‰©" scheme="http://chocoluffy.com/tags/%E7%A4%BE%E4%BC%9A%E4%BA%BA%E7%89%A9/"/>
    
      <category term="è¯»ä¹¦ç¬”è®°" scheme="http://chocoluffy.com/tags/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"/>
    
      <category term="åŸåˆ›" scheme="http://chocoluffy.com/categories/%E5%8E%9F%E5%88%9B/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[AWS elastic beanstalkä½¿ç”¨ä½“éªŒ]]></title>
    <link href="http://chocoluffy.com/2016/05/04/AWS-elastic-beanstalk%E4%BD%BF%E7%94%A8%E4%BD%93%E9%AA%8C/"/>
    <id>http://chocoluffy.com/2016/05/04/AWS-elastic-beanstalkä½¿ç”¨ä½“éªŒ/</id>
    <published>2016-05-05T01:03:58.000Z</published>
    <updated>2016-05-13T17:55:01.000Z</updated>
    <content type="html"><![CDATA[<p>æœ¬æ–‡å¯¹ç›®å‰å¸‚é¢ä¸Šçš„ä¸»æµPaas(platform as a service)æä¾›å•†è¿›è¡Œäº†æ¯”è¾ƒï¼Œ æ¯”å¦‚herokuå’Œamazonå®¶çš„æ–°æ˜Ÿelastic beanstalkã€‚å¹¶ä»¥ä¸€ä¸ªnodejsçˆ¬è™«çš„å®ä¾‹éƒ¨ç½²åœ¨äº†ebçš„æœåŠ¡å™¨ä¸Šã€‚å¾ˆå¤šå…³äºæœåŠ¡å™¨ç«¯çš„æ¦‚å¿µä¹Ÿå› æ­¤ç†æ¸…äº†ï¼Œ æ¯”å¦‚reverse proxy server, dynamic IP addressingå’Œåç«¯çš„ä¸€äº›é…ç½®ã€‚ä¹Ÿåœ¨æ–‡ç« ä¸­åšä¸ªå°ç»“ï¼Œ åˆ†äº«ç»™æ„Ÿå…´è¶£çš„å¤§å®¶ã€‚</p>
<a id="more"></a>
<div style="text-align:center" markdown="1"><img src="http://ac-TC2Vc5Tu.clouddn.com/de08e7610183200c.png" alt="aws"></div>

<h2 id="æ¦‚è§ˆ">æ¦‚è§ˆ</h2><p>å°†ä¹‹å‰ç”¨nodejså†™çš„å¯¹<a href="https://cnodejs.org/?tab=good" target="_blank" rel="external">cnodeç¤¾åŒºç²¾åå¸–</a>çš„çˆ¬è™«æ”¾åœ¨AWSçš„EC2 instanceä¸‹ç®¡ç†ï¼Œ åˆ©ç”¨elastic beanstalkæ¥å¯¹AWSèµ„æºè¿›è¡Œåˆ†é…å’Œè°ƒæ§ï¼Œ ç”±äºä½¿ç”¨çš„è¿˜æ˜¯free-tierçš„single instanceï¼Œ åˆ™elastic beanstalkæ‰€ç‰¹æœ‰çš„load-balancingçš„ä¼˜åŠ¿æ²¡æœ‰åŠæ³•äº«å—åˆ°ã€‚</p>
<div style="text-align:center" markdown="1"><img src="http://ac-TC2Vc5Tu.clouddn.com/69662ed94ae1f3ff.png" alt="ebean"></div>

<p>ä¸€å¼€å§‹å¦‚æœç›´æ¥æŒ‰ç…§AWSç»™çš„æ–¹æ³•, <code>eb init</code>åˆå§‹åŒ–ä¸€ä¸ªelastic beanstalkçš„é¡¹ç›®ï¼Œ <code>eb create</code>åˆ›å»ºä¸€ä¸ªenvironmentå’Œä¸€ä¸ªEC2å®ä¾‹, ç„¶å<code>eb deploy</code>å°†.gité‡Œé¢committedçš„æ”¹åŠ¨pushåˆ°elastic beanstalkçš„ç”Ÿäº§ç¯å¢ƒé‡Œé¢ï¼Œ ç„¶åç”¨<code>eb open</code>æ¥æ‰“å¼€è¿™ä¸ªIP addressï¼Œ å¦‚æœä¹‹åéœ€è¦ç»ˆæ­¢è¿™ä¸ªappçš„è¯ï¼Œ å°±<code>eb terminate</code>å°±å¥½äº†ã€‚</p>
<div style="text-align:center" markdown="1"><img src="http://ac-TC2Vc5Tu.clouddn.com/143c21d61cd3cf33.png" alt="heroku"></div>

<p>å¦‚æœä¹‹å‰æœ‰ä½¿ç”¨herokuçš„ç»éªŒçš„è¯ï¼Œ å…¶å®ä½ ä¼šå‘ç°å…¶å®amazon elastic beanstalkå’Œherokuæä¾›çš„æœåŠ¡éå¸¸ç›¸ä¼¼ï¼Œ å®é™…ä¸Šï¼Œ å°±è¿™ä¸¤å®¶æœåŠ¡çš„å®šä½è€Œè¨€ï¼Œ éƒ½æ˜¯platform as a serviceï¼ˆPaasï¼‰ï¼Œ ä¹Ÿå°±æ˜¯è®©developerå¯ä»¥å°†ç½‘ç«™ï¼Œ ç§»åŠ¨ç«¯éƒ¨ç½²åœ¨äº‘ç«¯(cloud)ä¸éœ€è¦é¡¾è™‘backend serverå’Œdatabaseçš„configurationã€‚ è€Œherokuæœ¬èº«ç›¸å¯¹äºå…¶ä»–å¸‚é¢ä¸Šçš„Paasåœ¨auto-scalingä¸Šåšå¾—æ›´åŠ å‡ºè‰²ï¼Œ å®ƒçš„computing resources(dyno)å¯ä»¥æŒ‰ç…§è®¡ç®—çš„éœ€æ±‚è€Œå åŠ ä»è€Œæ»¡è¶³åœ¨é«˜æµé‡ä¸‹çš„ç½‘ç«™åç«¯æµç•…è¿è¡Œã€‚è€Œè¿‘å‡ å¹´amazonçš„elastic beanstalkçš„å‡ºç°ï¼Œ åœ¨è¿™ä¸ªPaasçš„å¸‚åœºç»™æˆ‘ä»¬developerå¤šä¸€ä¸ªå¾ˆå¥½çš„é€‰æ‹©ã€‚å°±è‡ªå·±çš„ä½¿ç”¨è€Œè¨€ï¼Œ æ„Ÿè§‰ä¸¤è€…çš„command line interfaceå…¶å®è®¾è®¡å¾—å·®ä¸å¤šï¼Œ éƒ½å¾ˆç®€æ´æ–¹ä¾¿ï¼Œ ä¸è¿‡ç›¸æ¯”herokuï¼Œ amazonçš„AWSè¿˜æ¶‰åŠç§Ÿç”¨åˆ°è®¡ç®—å•å…ƒEC2, å°±é…ç½®çš„æ“ä½œæ¥è¯´ï¼Œ ä½ åœ¨é…ç½®AWSçš„æœåŠ¡ä¸Šéœ€è¦èŠ±æ›´å¤šçš„æ—¶é—´å»è®¾ç½®ç¯å¢ƒå˜é‡å’Œè€ƒè™‘å¯†é’¥å­˜å‚¨ï¼Œ æ¯•ç«Ÿä½ å¯èƒ½æœ‰æ—¶å€™æœ‰sshè¿œç¨‹ç™»é™†amazon linuxæœåŠ¡å™¨çš„éœ€æ±‚ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼Œ herokuçš„é…ç½®å°±æ˜¯å¾ˆç®€å•çš„åœ¨<code>~/.bashrc</code>æ–‡ä»¶é‡Œé¢æ·»åŠ toolbeltæ–‡ä»¶å¤¹çš„è·¯å¾„äº†ã€‚</p>
<blockquote>
<p> å…¶å®herokuå®ƒæœ¬èº«å°±æ˜¯deployåœ¨äº†AWSä¸Šçš„å‘€ğŸ˜‚ï¼Œ æ‰€ä»¥ç†è®ºä¸Šåœ¨performanceä¸Šä¸ä¼šæœ‰å¤ªå¤§çš„å·®åˆ«ã€‚</p>
</blockquote>
<p>è€Œåœ¨pricingä¸Šï¼Œ æˆ‘è®¤ä¸ºAWSçš„ä»·æ ¼å’ŒæœåŠ¡ä¼šæ›´åŠ çš„å®æƒ ï¼Œ æ¯•ç«Ÿè€ƒè™‘åˆ°ä½ æœ‰ä¸€å¼ ä¿¡ç”¨å¡å°±å¯ä»¥ç”³è¯·åˆ°ä½ ä¸€å¹´çš„free-tierçš„single instanceçš„ä½¿ç”¨æƒåˆ©ï¼Œ è€Œsingle instanceå¯¹ä¸€äº›å°å‹çš„side projectæ¥è¯´å®Œå®Œå…¨å…¨æ˜¯å¤Ÿç”¨çš„å‘€ã€‚å³ä¾¿ä¸å¤Ÿç”¨ï¼Œ æ¢æˆlarge instanceä¹Ÿæ˜¯several clicks awayï¼Œ åæ­£ä¹Ÿæ˜¯æŒ‰ç”¨é‡æ”¶è´¹ï¼Œ ç»æµå®æƒ !</p>
<h2 id="é‡åˆ°çš„é—®é¢˜">é‡åˆ°çš„é—®é¢˜</h2><p>ç¬¬ä¸€ä¸ªä½¿ç”¨EBéƒ¨ç½²çš„åº”ç”¨æ˜¯ä¸€ä¸ªnodejsçˆ¬è™«ï¼Œ è´Ÿè´£çˆ¬å»cnodeç¤¾åŒºçš„ç²¾åå¸–ï¼Œ ç„¶åè¿”å›ä¸€ä¸ªjson objectæ”¶é›†ç²¾åå¸–çš„link, æ ‡é¢˜å’Œä½œè€…avatarï¼Œ ä¸ºäº†æ˜¾ç¤ºçš„ç›´è§‚ï¼Œ æˆ‘å¹¶æ²¡æœ‰å†™å‰ç«¯çš„æ ·å¼ï¼Œ è€Œæ˜¯ç›´æ¥<code>JSON.stringify(json)</code>ç„¶åsendä¼šæµè§ˆå™¨ã€‚ä¹‹åå¦‚æœä»…ä»…ä½œä¸ºREST APIä½¿ç”¨çš„è¯ï¼Œ è¿˜éœ€è¦åœ¨routerä¸Šä¿®é¥°ä¸€ä¸‹URLã€‚ç›®å‰è¿˜æ˜¯æœ‰ç‚¹ç²—ç³™çš„ã€‚<a href="https://github.com/AirLoft/web-scraper" target="_blank" rel="external">githubé“¾æ¥</a></p>
<div style="text-align:center" markdown="1"><img src="http://ac-TC2Vc5Tu.clouddn.com/9fd7dd3d203d2d91.png" alt="demo"></div>

<p>ä¸€å¼€å§‹æˆ‘ç›´æ¥å°†åœ¨æœ¬åœ°localhostè¿è¡Œçš„ç‰ˆæœ¬deployåˆ°äº†elastic beanstalkä¸Šï¼Œ ç”±äºç¼ºå°‘äº†è¿™ä¸€è¡Œé…ç½®<code>var port = process.env.PORT || 3000;</code>ï¼Œ æˆ‘ç›´æ¥æŠŠportå®šåœ¨äº†3000ï¼Œ è€Œelastic beanstalkæ˜¯æœ‰åº”è¯¥å ç”¨çš„portçš„ï¼Œ æ‰€ä»¥å¾—åˆ°äº†â€œ502 bad gateway errorâ€ã€‚</p>
<p>è¿˜æœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„çš„æ˜¯<code>npm start</code>è¿™ä¸ªnpm scripté‡Œé¢çš„é…ç½®ï¼Œ AWS elastic beanstalkä¼šæ‰¾åˆ°è¿™æ¡æŒ‡ä»¤å¹¶å»æ‰§è¡Œæ¥æ‰§è¡Œç›¸åº”çš„jsæ–‡ä»¶ï¼Œ æ¯”å¦‚æˆ‘æŠŠå†™cnodeç½‘ç«™çš„çˆ¬è™«å†™åœ¨äº†cnode.jsé‡Œé¢ï¼Œ é‚£ä¹ˆæˆ‘éœ€è¦</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"scripts"</span>: &#123;</span><br><span class="line">  <span class="string">"start"</span>: <span class="string">"node cnode.js"</span></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p>æ¥ä¿è¯æœåŠ¡å™¨æ‰§è¡Œçš„æ˜¯æˆ‘å¯¹cnodeè¿™ä¸ªç½‘ç«™çš„çˆ¬è™«ã€‚</p>
<h2 id="Q&amp;A">Q&amp;A</h2><p>ä»¥ä¸‹å†…å®¹æ˜¯æˆ‘åœ¨è‡ªå·±æŠ˜è…¾Elastic Beanstalkçš„æ—¶å€™æ”¶é›†çš„ä¸€äº›æ¯”è¾ƒç®€ç»ƒè€Œå‡†ç¡®çš„æ€»ç»“ï¼Œ åœ¨è¿™é‡Œåˆ†äº«ç»™å¤§å®¶ã€‚ å…¶å®amazonçš„AWSæ•™ç¨‹å†™å¾—éå¸¸è¯¦ç»†çš„ï¼Œ å¤§å®¶è‡ªå·±å¦‚æœæœ‰èƒ½åŠ›æœ€å¥½å»å°è¯•è‡ªå·±é˜…è¯»å’Œå®è·µå®ƒç»™çš„ä¾‹å­!</p>
<p><strong>How elastic beanstalk works?</strong><br>Now you have a web app running in AWS Elastic Beanstalk. As Elastic Beanstalk creates your environment, it <strong>interacts with several other AWS services</strong> to create the resources required to run your web app securely and resiliently.</p>
<p><strong>How EC2 instance works?</strong><br>EC2 instance â€“ A virtual machine that runs Amazon Linux or Microsoft Windows Server and that is configured to run web apps on the platform that you choose.<br>Each platform runs a different set of software, configuration files, and scripts to support a specific language version, framework, web container, or combination thereof. Most platforms <strong>use either Apache or nginx as a reverse proxy</strong> that sits in front of your web app, forwards requests to it, serves static assets, and generates access and error logs.</p>
<p><strong>What is reverse proxy server?</strong><br>A proxy server is a go-between or intermediary server that forwards requests for content from multiple clients to different servers across the Internet. A reverse proxy server is a type of proxy server that typically <strong>sits behind the firewall in a private network</strong> and directs client requests to the appropriate backend server. A reverse proxy provides an additional level of abstraction and control to ensure the smooth flow of network traffic between clients and servers.</p>
<p>Common uses for a reverse proxy server include:</p>
<ul>
<li>Load balancing â€“ A reverse proxy server can act as a â€œtraffic cop,â€ sitting in front of your backend servers and distributing client requests across a group of servers in a manner that maximizes speed and capacity utilization while ensuring no one server is overloaded, which can degrade performance. If a server goes down, the load balancer redirects traffic to the remaining online servers.</li>
<li>Web acceleration â€“ Reverse proxies can compress inbound and outbound data, as well as cache commonly requested content, both of which speed up the flow of traffic between clients and servers. They can also perform additional tasks such as SSL encryption to take load off of your web servers, thereby boosting their performance.</li>
<li>Security and anonymity â€“ By intercepting requests headed for your backend servers, a reverse proxy server protects their identities and acts as an additional defense against security attacks. It also ensures that multiple servers can be accessed from a single record locator or URL regardless of the structure of your local area network.</li>
</ul>
<p><strong>What is amazon s3 bucket?</strong><br>Amazon S3 bucket â€“ A storage location for your source code, logs, and other artifacts that are created when you use Elastic Beanstalk.</p>
<p><strong>How your domain will look like?</strong><br>Domain name â€“ A domain name that routes to your web app in the form subdomain.region.elasticbeanstalk.com.</p>
<p><strong>When should I use AWS Lambda versus Amazon EC2?</strong></p>
<p>Amazon Web Services offers a set of compute services to meet a range of needs.</p>
<p>Amazon EC2 offers flexibility, with a wide range of instance types and the option to customize the operating system, network and security settings, and the entire software stack, allowing you to easily move existing applications to the cloud. With Amazon EC2 you are responsible for provisioning capacity, monitoring fleet health and performance, and designing for fault tolerance and scalability. AWS Elastic Beanstalk offers an easy-to-use service for deploying and scaling web applications in which you retain ownership and full control over the underlying EC2 instances. Amazon EC2 Container Service is a scalable management service that supports Docker containers and allows you to easily run distributed applications on a managed cluster of Amazon EC2 instances.<br>AWS Lambda makes it easy to execute code in response to events, such as changes to Amazon S3 buckets, updates to an Amazon DynamoDB table, or custom events generated by your applications or devices. With Lambda you do not have to provision your own instances; Lambda performs all the operational and administrative activities on your behalf, including capacity provisioning, monitoring fleet health, applying security patches to the underlying compute resources, deploying your code, running a web service front end, and monitoring and logging your code. AWS Lambda provides easy scaling and high availability to your code without additional effort on your part.</p>
<p><strong>To create a hosted zone in Amazon Route 53</strong></p>
<ul>
<li>Open the Amazon Route 53 management console.</li>
<li>Choose Hosted Zones.</li>
<li>Choose Create Hosted Zone.</li>
</ul>
<p>For Domain Name, type the domain name that you own. For example: example.com.</p>
<p>Choose Create.</p>
<p>Next, add a CNAME record to the hosted zone. A CNAME record registers a domain name that you own as an alias of your web app environmentâ€™s elasticbeanstalk.com subdomain.</p>
<p>When an Amazon Route 53 DNS server receives a name request for your custom domain name, it resolves to the elasticbeanstalk.com subdomain, which resolves to the public DNS name of your Elastic Load Balancing load balancer, which resolves to your web appâ€™s IP address.</p>
<p>Note<br>In a single-instance environment, the elasticbeanstalk.com subdomain resolves to an Elastic IP address attached to the instance running your web app.</p>
<p><strong>å…³äºelastic beanstalkçš„ä»·æ ¼</strong><br>æœ‰å°ä¼™ä¼´åœ¨commenté‡Œé¢æé—®ï¼Œ å¦‚æœç”¨å®Œäº†ä¸€å¹´çš„free-tierçš„è¯ï¼Œ ä»·æ ¼æ€ä¹ˆè®¡ç®—å‘¢? å¯ä»¥å‚è€ƒä¸‹amazonçš„<a href="https://aws.amazon.com/elasticbeanstalk/pricing/" target="_blank" rel="external">è¿™ç¯‡ä»‹ç»</a>é‡Œé¢è¯¦ç»†è®°å½•äº†EC2, S3, DBç­‰ç­‰AWSç›¸å…³æœåŠ¡çš„ä»·æ ¼ã€‚å¦‚æœæ˜¯ä¸ªäººçš„side project, å¯¹CPUå’Œå›¾ç‰‡ç­‰ç”¨æˆ·ä¿¡æ¯å­˜å‚¨çš„éœ€æ±‚ä¸æ˜¯ç‰¹åˆ«å¤§çš„è¯ï¼Œ å…è´¹çš„planæˆ–è€…æ˜¯microçš„instanceæ˜¯å®Œå…¨å¤Ÿç”¨çš„ï¼Œ å¦‚æœæ˜¯åœ¨æŸæ–¹é¢çš„éœ€æ±‚ç‰¹åˆ«å¤§ï¼Œ æ¯”å¦‚è¯´unsplashè¿™ä¸ªé«˜æ¸…æ‘„å½±å›¾ç‰‡åˆ†äº«çš„ç¤¾åŒºã€‚</p>
<p><img src="http://ac-TC2Vc5Tu.clouddn.com/bb0b5ef1d0298d11.png" alt="unsplash"></p>
<p> unsplashå°†ç”¨æˆ·ä¸Šä¼ çš„ç…§ç‰‡å­˜å‚¨åœ¨Amazonçš„S3æœåŠ¡ä¸Šä¼šæ¯”è¾ƒå®‰å…¨å’Œä¾¿æ·ï¼Œ(æ­é…ç€Imgixè¿™ä¸ªserviceä½¿ç”¨)ï¼Œ å…·ä½“çš„ç½‘ç«™èŠ±é”€å¯ä»¥å‚è€ƒ<a href="http://backstage.crew.co/what-does-unsplash-cost/" target="_blank" rel="external">è¿™ç¯‡åšæ–‡</a>ï¼Œ é‡Œé¢è®°å½•äº†unsplashä¸€ä¸ªæœˆç½‘ç«™ä½¿ç”¨çš„å„ç§æœåŠ¡çš„æ˜ç»†è®°å½•ï¼Œ ä¹Ÿå¯ä»¥ç»™ä¸€äº›å¸Œæœ›åšå›¾ç‰‡åˆ†äº«ç¤¾åŒºçš„åˆ›ä¸šè€…ä»¬ä¸€ä¸ªå‚è€ƒã€‚ä¸€ä¸ªå€¼å¾—æ³¨æ„çš„ç‚¹æ˜¯ï¼Œ unsplashçš„èŠ±é”€æ˜¯æ¯”è¾ƒé€‚åˆå€Ÿé‰´çš„ï¼Œ å› ä¸ºunsplashå’Œç›®å‰è®¸å¤šçš„åˆ›ä¸šå…¬å¸ä¸€æ ·ï¼Œ é€‰æ‹©å°†è‡ªå·±çš„ä¸»æœåŠ¡hoståœ¨herokuè¿™ä¸ªå¹³å°ï¼Œ é€‰æ‹©S3ç­‰ç­‰ä¸»æµçš„æœåŠ¡ï¼Œ ä¸åƒä¸€äº›æ›´geekyçš„å…¬å¸å¯èƒ½ä¸ºäº†çœé’±å°±è‡ªå·±æ¥æ­å»ºå’Œç®¡ç†è‡ªå·±çš„æœåŠ¡å™¨å’Œæ•°æ®åº“ã€‚ å½“ç„¶ï¼Œ ç®¡ç†æˆæœ¬å’Œç»´æŠ¤æˆæœ¬éƒ½è¦è€ƒè™‘è¿›å»ï¼Œ æ‰€ä»¥ç»¼ä¸Šæˆ‘æ‰è®¤ä¸ºunsplashçš„ä¾‹å­æ˜¯éå¸¸å€¼å¾—å€Ÿé‰´çš„!</p>
<h2 id="å‚è€ƒé“¾æ¥">å‚è€ƒé“¾æ¥</h2><p>ä¸‹é¢çš„é“¾æ¥æ˜¯æˆ‘åœ¨è‡ªå·±å°è¯•æ­å»ºç¯å¢ƒæ—¶å‚è€ƒçš„å†…å®¹ï¼Œ ä»¥åŠæˆ‘é€‰æ‹©free-tierçš„configurationçš„é¡µé¢ã€‚å…¶ä¸­å°±æœ‰ä»¥expressä¸ºä¾‹å­çš„æœåŠ¡ç«¯ç¯å¢ƒæ­å»ºã€‚</p>
<ul>
<li><a href="http://docs.aws.amazon.com/AWSEC2/latest/CommandLineReference/set-up-ec2-cli-linux.html#set_aes_home_linux" target="_blank" rel="external">setting up EC2 cli on mac</a> we store EC2 api tool, aws-access-key and aws-secret-key in <code>~/.bashrc</code>, so that we can use the shortcut commands to do <code>init\create\deploy\open</code>. The common commands are listed as followed.</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">eb init</span><br><span class="line">eb create</span><br><span class="line">eb deploy</span><br><span class="line">eb open</span><br></pre></td></tr></table></figure>
<ul>
<li><a href="https://docs.aws.amazon.com/quickstarts/latest/webapp/welcome.html" target="_blank" rel="external">A high level explanation of what EB does and what can we config</a> trying to give a high-level description of what is the use and purpost of each AWS service, including EC2, the reverse proxy server sitting in front of servers, router 53 and so on so forth.</li>
<li><a href="http://docs.aws.amazon.com/elasticbeanstalk/latest/dg/create_deploy_nodejs_express.html" target="_blank" rel="external">A detailed explanation of how to host an express app on EB full-step tutorial</a> The tutorial uses an express app to explain how to use EB.</li>
<li><a href="http://docs.aws.amazon.com/elasticbeanstalk/latest/dg/create_deploy_nodejs.html" target="_blank" rel="external">How to deploy a nodejs project to EB</a> similar to the previous tutorial post.</li>
<li><a href="http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/AccessingInstancesLinux.html" target="_blank" rel="external">how to connect to EC2 instance using ssh</a><br>by using <code>ec2-describe-instances</code>, we can get the id of my instance.</li>
</ul>
<p>So after we have created an project, we go to the elastic beanstalk console, we will see the dashboard of all the application I host on EB such as the recent one(webscraper). The following is a screen capture of the configuration of that application on EB as in a free-tier plan:<br><img src="http://ac-TC2Vc5Tu.clouddn.com/7c3a33a6cfab0843.png" alt="configuration"> In this page, we can set the scaling option from single instance to load-balanced configuration, and when we add a load-balancer, it will automatically adjust the number of instances depending on the need.</p>
<p>When you turn on load balancing, Elastic Beanstalk creates a load balancer, deletes the Elastic IP address from your environment, and provisions a new EC2 instance. Elastic Beanstalk also updates DNS records to point the web appâ€™s domain name to the load balancer instead of to the IP address of a single instance.</p>
]]></content>
    <summary type="html">
    <![CDATA[<p>æœ¬æ–‡å¯¹ç›®å‰å¸‚é¢ä¸Šçš„ä¸»æµPaas(platform as a service)æä¾›å•†è¿›è¡Œäº†æ¯”è¾ƒï¼Œ æ¯”å¦‚herokuå’Œamazonå®¶çš„æ–°æ˜Ÿelastic beanstalkã€‚å¹¶ä»¥ä¸€ä¸ªnodejsçˆ¬è™«çš„å®ä¾‹éƒ¨ç½²åœ¨äº†ebçš„æœåŠ¡å™¨ä¸Šã€‚å¾ˆå¤šå…³äºæœåŠ¡å™¨ç«¯çš„æ¦‚å¿µä¹Ÿå› æ­¤ç†æ¸…äº†ï¼Œ æ¯”å¦‚reverse proxy server, dynamic IP addressingå’Œåç«¯çš„ä¸€äº›é…ç½®ã€‚ä¹Ÿåœ¨æ–‡ç« ä¸­åšä¸ªå°ç»“ï¼Œ åˆ†äº«ç»™æ„Ÿå…´è¶£çš„å¤§å®¶ã€‚</p>]]>
    
    </summary>
    
      <category term="AWS" scheme="http://chocoluffy.com/tags/AWS/"/>
    
      <category term="javascript" scheme="http://chocoluffy.com/tags/javascript/"/>
    
      <category term="nodejs" scheme="http://chocoluffy.com/tags/nodejs/"/>
    
      <category term="æŠ€æœ¯" scheme="http://chocoluffy.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[[ç¬¬ä¸€æœŸ]AirLoftç»„ç»‡åŠ¨å‘˜å®£è¨€]]></title>
    <link href="http://chocoluffy.com/2016/04/27/%E7%AC%AC%E4%B8%80%E6%9C%9F-AirLoft%E7%BB%84%E7%BB%87%E5%8A%A8%E5%91%98%E5%AE%A3%E8%A8%80/"/>
    <id>http://chocoluffy.com/2016/04/27/ç¬¬ä¸€æœŸ-AirLoftç»„ç»‡åŠ¨å‘˜å®£è¨€/</id>
    <published>2016-04-28T01:46:44.000Z</published>
    <updated>2016-04-28T01:49:28.000Z</updated>
    <content type="html"><![CDATA[<p>The best education comes from inside. </p>
<a id="more"></a>
<div style="text-align:center" markdown="1"><img src="http://ac-TC2Vc5Tu.clouddn.com/b000a844b66d48d1.jpg" alt="pink"></div>

<h2 id="Orientation">Orientation</h2><p>è¿™ä¸ªadaå†…éƒ¨ç»„ç»‡airloftæˆç«‹çš„ç›®çš„ï¼Œ æ˜¯æˆ‘å¸Œæœ›å¤§å®¶èƒ½åœ¨ä¸€ä¸ªæ›´åŠ ç´§å¯†å’Œç†Ÿæ‚‰çš„ç¯å¢ƒä¸‹åˆ†äº«å’Œå­¦ä¹ è¯¾å¤–çŸ¥è¯†ï¼Œ é‡‡ç”¨githubæ‰˜ç®¡çš„å½¢å¼æ˜¯å› ä¸ºå®ƒç®¡ç†ä»£ç çš„é«˜åä½œæ•ˆç‡å’Œpeer reviewçš„ä¾¿æ·ã€‚</p>
<p>ä¸ºäº†ä¿è¯å¤§å®¶è‡ªå­¦æ­¥éª¤çš„ä¸€è‡´æ€§å’Œè‡ªç”±å‘æŒ¥çš„ç©ºé—´ï¼Œ æˆ‘å†³å®šé‡‡å–çš„æ˜¯ä»»åŠ¡å‘å¸ƒå½¢å¼ã€‚ <strong>æ¯å‘¨ä¼šç”±æˆ‘æˆ–æˆ‘æŒ‡å®šçš„è´Ÿè´£äººå‘å¸ƒ1-2ç¯‡çš„æ•™ç¨‹æˆ–ä»»åŠ¡</strong>ï¼Œ ä»»åŠ¡å†…å®¹ä»åˆšå…¥é—¨çš„gitçš„ä½¿ç”¨ä¸åä½œï¼Œ åˆ°ä¹‹åçš„ç½‘ç«™æ ·å¼å¸ƒå±€ï¼Œ ç§»åŠ¨ç«¯ï¼ŒåŠ¨æ•ˆè®¾è®¡ï¼Œåç«¯ç¼–ç¨‹éƒ½ä¼šæ¶‰åŠï¼Œ è€Œæ•™ç¨‹åˆ™ä¸»è¦æ¥æºäº<strong>æ‰€æœ‰æœ‰å¿ƒäººå¯¹æŸäº›åˆ›æ„ç‚¹å­çš„å®ç°è¿‡ç¨‹æ— è®ºæˆè´¥çš„è®°å½•(ä»»ä½•äººéƒ½å¯ä»¥å‘å¸ƒ)</strong>ã€‚ æˆ‘ä¸ä¼šåœ¨ä»»åŠ¡å®Œæˆåº¦ä¸Šç»™å¤§å®¶å¤ªå¤šå‹åŠ›ï¼Œ ä½†æ˜¯æ‰€æœ‰çš„ä»»åŠ¡éƒ½ä¼šæŒ‡å‘æœ€ç»ˆAirLoftç§»åŠ¨ç«¯APPåŠä¸€ç³»åˆ—é…å¥—web appçš„è¯ç”Ÿï¼Œ èƒ½å¤Ÿæ·±å…¥äº’åŠ¨å‚ä¸æ¯ä¸ªæ–¹å‘è®¨è®ºå’Œå®è·µå¹¶è‡ªå·±åŠ¨æ‰‹codingçš„äººï¼Œ ä¹Ÿä¼šæ”¶è·è¿œæ¯”å®Œæˆä¸€ä¸ªä½œå“ï¼Œ ä¸€ä¸ªäº§å“æ›´å¤šä¹Ÿæ›´é‡è¦çš„ä¸œè¥¿ï¼Œ being insightful and clear of what you really want to doã€‚</p>
<p>ç»„ç»‡å†…éƒ¨å¤§è‡´çš„æ–¹å‘ï¼š<br>æˆ‘ä¸»å¯¼çš„ - AirLoft reactive nativeçš„å¼€å‘ï¼Œ å¹¶å°†Airloftç½‘ç«™ç«¯ä»angular1.4å…¨éƒ¨ç”±reacté‡å†™ã€‚<br>æœ±å­å®ä¸»å¯¼çš„ - çˆ¬è™«scriptsï¼Œ å¯¹äºæ ¡å›­å†…éƒ¨çƒ­é—¨æ´»åŠ¨æ¶ˆæ¯ï¼Œæ•™åŠ¡ä¿¡æ¯å’Œå‘¨è¾¹æ¶ˆæ¯çš„æ”¶é›†å’Œå‘ˆç°ã€‚<br>Joyceä¸»å¯¼çš„ - èµ°è¿›å¤šå¤§çš„web appåŠhtml5å¾®ä¿¡ç§»åŠ¨é¡µé¢ã€‚<br>Jerryä¸»å¯¼çš„ - åŸºäºGPSçš„é¤é¥®å¤–å–ä¿¡æ¯å‘ˆç°å’Œæˆäº¤å¹³å°ã€‚</p>
<p>æ¯ä¸ªæ–¹å‘éƒ½ç”±ä¸åŒçš„codingä¾§é‡ç‚¹ï¼Œ æ¯ä¸ªäººå¯è‡ªç”±å‚ä¸ä»»æ„æ–¹å‘ï¼Œ <strong>ä¸å¼ºåˆ¶ä»»åŠ¡è¿›åº¦ï¼Œ ä½†å¼ºåˆ¶å®šæœŸåˆ†äº«ã€‚</strong>å°±æœ€ç»ˆæˆæœè€Œè¨€ï¼Œ ä½œå“ä¸ä½œå“ä¹‹é—´å¯ä»¥ç›¸äº’é…åˆå’Œæ”¹å–„ï¼Œ ä¸¾ä¸ªä¾‹å­ï¼Œ æˆ‘ä¼šä½¿ç”¨æœåŠ¡å™¨ç«¯çš„çˆ¬è™«æ¥æ”¶é›†å…´è¶£å°ç»„çš„è®¯æ¯ï¼Œ ä¼šåœ¨ä¹‹åçš„å®£ä¼ é˜¶æ®µç”¨html5å†™ç§»åŠ¨ç«¯çš„å®£ä¼ é¡µé¢ï¼Œ è€ŒåŸºäºGPSæœ¬èº«å°±æ˜¯AirLoftçš„åŠŸèƒ½åŸºç¡€ã€‚</p>
<p>è€Œéœ€è¦å†å¼ºè°ƒä¸€éçš„æ˜¯ï¼Œ <strong>ä»»ä½•äººï¼Œ åœ¨ä»»ä½•æ—¶å€™ï¼Œ éƒ½å¯ä»¥æå‡ºæ–°çš„å¼€å‘æ–¹å‘å’Œæƒ³æ³•ï¼Œ æ— è®ºå…³ä¹æŠ€æœ¯è¿˜æ˜¯è®¾è®¡è¿˜æ˜¯ç¾å·¥è¿˜æ˜¯ç”¨æˆ·ä½“éªŒã€‚</strong>æˆ‘ä¼šæ¬¢è¿è„‘æ´ï¼Œ æŠ˜è…¾äº›å¥½ç©å´å¯èƒ½â€œæ— ç”¨â€çš„ä¸œè¥¿ï¼Œ æ¯”å¦‚å“ªä¸€å‘¨ä¸»é¢˜æˆ–è®¸å°±æ˜¯è‡ªå­¦Sketchæ¥ç»™AirLoftæ¢ä¸ªå›¾æ ‡ï¼Ÿæˆ–è€…å°±å¼€ä¸ªrepoå»å‚åŠ HackerRankï¼Ÿèƒ½å¸¦ä½ è‡ªå·±ä¸€ç›´èµ°ä¸‹å»çš„ï¼Œ ä¸æ˜¯å‹åŠ›ï¼Œ æ˜¯å…´è¶£ã€‚</p>
<p>å¾ˆå¤šäººä¼šå¥½å¥‡æˆ‘è‡ªå·±çš„æˆé•¿è½¨è¿¹ï¼Œ è€Œå¦‚æœçœŸçš„å¾€å›çœ‹ï¼Œ æˆ‘æ˜¯åœ¨2015å¹´3æœˆ29å·é‚£å¤©ï¼Œ åœ¨äº¤æ¢æ—¶æœŸå‚åŠ çš„ä¸€æ¬¡hacker meetingä¸Šï¼Œ ç¬¬ä¸€æ¬¡è§è¯†åˆ°html\css\jsï¼Œ é‚£å¤©çš„ä¸»é¢˜æ˜¯ç”¨meteor.jså’Œmongoåœ¨5minå†…æ­å»ºä¸€ä¸ªtodoåº”ç”¨ï¼Œ å˜‰å®¾æ˜¯ä¼¯å…‹åˆ©å¤§äºŒçš„ä¸€ä¸ªå­¦ç”Ÿã€‚åˆ°ç°åœ¨å­¦CSå¤§æ¦‚æœ‰1å¹´äº†å§ï¼Œ ä»ä¸€å¼€å§‹å†™javascriptå„ç§è¿åŠ¨æ¡†æ¶å¼€å§‹ï¼Œ åˆ°ç”¨ruby on railsè‡ªå·±å‰åç«¯æŠ˜è…¾äº†5ï¼Œ 6ä¸ªä¸­å‹blogging, socialæˆ–è€…APIç½‘ç«™ï¼Œ åˆ°ä¸Šå­¦æœŸç”¨reacté‡å†™å„ç§ç½‘ç«™åŠè€—æ—¶ä¸€ä¸ªæœˆçš„SPAåº”ç”¨Airloftï¼Œ å’Œç°åœ¨react nativeã€‚ æˆ‘å¹¶ä¸è§‰å¾—è‡ªå·±å·²ç»æœ‰èƒ½åŠ›å¼€å§‹å›é¡¾è‡ªå·±è¿‡å»çš„ä½œå“å’Œè£èª‰ï¼Œ åªæ˜¯æœ€è¿‘æŒºå¤šäººé—®æˆ‘â€œå¦‚æœæƒ³åšè¯¾å¤–çš„é¡¹ç›®åº”è¯¥å­¦äº›ä»€ä¹ˆçš„é—®é¢˜â€ï¼Œ æˆ‘æŠŠæˆ‘è‡ªå·±çš„è½¨è¿¹æ‹¿å‡ºæ¥ç»™å¤§å®¶å‚è€ƒã€‚æ°¸è¿œæ²¡æœ‰ä¸€æ­¥ç™»å¤©çš„æˆå°±ï¼Œ å»å‡­ç€å…´è¶£æ‘¸ç´¢ï¼Œ å› ä¸ºå¥½å¥‡è€ŒåšæŒï¼Œ æ˜¯æˆ‘èƒ½ç»™çš„æœ€å¥½çš„å»ºè®®ã€‚</p>
<p>OrientationåŠ¨å‘˜ä¼šçš„æœ€åï¼Œ å’Œå¤§å®¶åˆ†äº«ä¸¤å¥è¯ï¼Œ ç¬¬ä¸€å¥æ¥è‡ªè‡ªå·±çš„ä½“ä¼šï¼Œ ç¬¬äºŒå¥æ¥è‡ªECE516 prof: Steve Mannï¼š</p>
<ul>
<li>the best education comes from inside.</li>
<li>the best way to learn is to teach.</li>
</ul>
<h2 id="ç¬¬ä¸€æœŸä»»åŠ¡">ç¬¬ä¸€æœŸä»»åŠ¡</h2><p>å­¦ä¼šgitçš„ç®€å•ä½¿ç”¨, ç›´æ¥åœ¨orgå†…åˆ›å»ºä¸€ä¸ªæ–°çš„repoï¼Œ æ·»åŠ ä¸€ä¸ªreadme.mdæ–‡ä»¶ï¼Œ åœ¨é‡Œé¢å†™ä¸Šä½ å¯¹ä¸¤ä»¶äº‹çš„æƒ³æ³•ï¼Œ <strong>1ã€å…³äºç¤¾åŒºå»ºé€ ã€‚ ä½ è®¤ä¸ºåº”è¯¥æ€æ ·æ‰“é€ ä¸€ä¸ªç»ä¹…ä¸è¡°çš„ç¤¾åŒºï¼Ÿä¸¾ä¸ªç°å®ç”Ÿæ´»ä¸­çš„ä¾‹å­ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ æ€ä¹ˆè®¾è®¡å›é¦ˆå’Œå¥–åŠ±æœºåˆ¶èƒ½å¤Ÿé€ å°±ä¸€ä¸ªå¥½çš„ç¤¾åŒºï¼Ÿå“ªäº›è®¾è®¡ä½“ç°æˆ–è€…æš—ç¤ºäº†è¿™äº›æœºåˆ¶ï¼Ÿ2ã€ä½ å¯¹å“ªä¸ªå…·ä½“å¼€å‘æ–¹å‘æ„Ÿå…´è¶£ï¼Ÿå¦‚æœåœ¨è¿™æ–¹é¢æœ‰å……è¶³çš„èƒ½åŠ›ï¼Œ ä½ å¯ä»¥æ€æ ·è´¡çŒ®åˆ°å“ªä¸ªä»»åŠ¡é‡Œï¼Ÿåšå‡ºæ€æ ·çš„ä½œå“ï¼Ÿ</strong>ï¼Œ æˆ–è€…ç›´æ¥åœ¨githubç½‘é¡µç«¯æ“ä½œåˆ›å»ºæ–°çš„repoå’Œæ·»åŠ æ–°æ–‡ä»¶ï¼Œ æˆ–è€…æ›´ä½³æ¨èçš„æ–¹å¼æ˜¯æœ¬åœ°ä»£ç å¤‡ä»½ç„¶åå…³è”åˆ°githubçš„ç›¸å…³repoå†pushä½ çš„æœ¬åœ°ä¿®æ”¹ã€‚</p>
<p>åˆ›å»ºå¥½ä¹‹åï¼Œ åšç¬¬ä¸‰ä»¶äº‹ï¼Œ <strong>3ã€è‡³å°‘åœ¨å…¶ä»–ä¸€ä¸ªåˆ«äººçš„repoé‡Œé¢çš„issue panelæå‡ºä½ å¯¹ä»–è¿™ä¸ªæƒ³æ³•çš„çœ‹æ³•å’Œè¡¥å……</strong>ã€‚</p>
<blockquote>
<p>ä»»åŠ¡è§£é‡Šï¼Œ æ¯”å¦‚æˆ‘å–œæ¬¢çœ‹hackernewsï¼Œ æˆ‘å¯¹å®ƒçš„æŠ•ç¥¨æœºåˆ¶ç‰¹åˆ«æ„Ÿå…´è¶£ï¼Œ æˆ‘å°±æ‹¿è¿™ä¸ªç¤¾åŒºçš„å„ç§æœºåˆ¶æ¥ä¸¾ä¾‹ï¼Œ åˆæˆ–è€…æˆ‘å–œæ¬¢Bç«™ï¼Œ å»å°è¯•åˆ†æBç«™å“ªäº›è®¾è®¡æ˜¯ç‰¹åˆ«æœ‰ç”¨æˆ·å¸å¼•åŠ›çš„ï¼Œ è®°å½•ä¸‹æ¥ï¼Œ æ–°åˆ›repoåˆ†äº«ã€‚æ‰€æœ‰å¯èƒ½é‡åˆ°çš„é—®é¢˜ï¼Œ å°è¯•è®°å½•ä¸‹æ¥è‡ªå·±è§£å†³ï¼Œ æ‰¾ä¸åˆ°åŠæ³•ï¼Œ openä¸€ä¸ªæ–°çš„issueç„¶ååœ¨å¾®ä¿¡ç¾¤é‡Œè®¨è®ºè®¨è®ºã€‚</p>
</blockquote>
<p>å‚è€ƒçš„é“¾æ¥ï¼Œ æˆ‘åœ¨ç¬¬äºŒæœŸä»»åŠ¡å‘å¸ƒçš„æ—¶å€™å…¬å¸ƒã€‚å¼€å§‹æŠ˜è…¾èµ·æ¥å§ã€‚</p>
<h2 id="é¢˜å¤–è¯">é¢˜å¤–è¯</h2><ul>
<li>æš‘å‡å°±æ˜¯è¦å¥½å¥½æµªçš„ã€‚å‘¨æœ«å»éª‘trailï¼Œ æ‰“çƒï¼Œ èšé¤ä»€ä¹ˆçš„éƒ½è¦çº¦èµ·æ¥å•Šã€‚</li>
<li>æˆ‘å–œæ¬¢çˆ±æŠ˜è…¾çš„å°ä¼™ä¼´ã€‚ æœ‰ä»€ä¹ˆæƒ³è¯´çš„è¯éƒ½å¯ä»¥ç§æˆ³æˆ‘ã€‚</li>
<li>è®¤çœŸå¯¹å¾…æ¢¦æƒ³ã€‚ å¯èƒ½è¿™ä¸ªæ—¶ä»£æœ€ä¸€æ–‡ä¸å€¼å’Œè¢«è½»æ˜“ä½ä¼°çš„ï¼Œ å°±æ˜¯æ¢¦æƒ³äº†ã€‚</li>
</ul>
]]></content>
    <summary type="html">
    <![CDATA[<p>The best education comes from inside. </p>]]>
    
    </summary>
    
      <category term="åˆ›ä¸š" scheme="http://chocoluffy.com/tags/%E5%88%9B%E4%B8%9A/"/>
    
      <category term="æ—¥è®°" scheme="http://chocoluffy.com/tags/%E6%97%A5%E8%AE%B0/"/>
    
      <category term="åŸåˆ›" scheme="http://chocoluffy.com/categories/%E5%8E%9F%E5%88%9B/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[å…³äºåˆ›ä¸š, é‚£äº›ä¸èƒ½è¯´çš„ç§˜å¯†]]></title>
    <link href="http://chocoluffy.com/2016/04/25/%E5%85%B3%E4%BA%8E%E5%88%9B%E4%B8%9A%EF%BC%8C-%E9%82%A3%E4%BA%9B%E4%B8%8D%E8%83%BD%E8%AF%B4%E7%9A%84%E7%A7%98%E5%AF%86/"/>
    <id>http://chocoluffy.com/2016/04/25/å…³äºåˆ›ä¸šï¼Œ-é‚£äº›ä¸èƒ½è¯´çš„ç§˜å¯†/</id>
    <published>2016-04-26T03:39:01.000Z</published>
    <updated>2016-05-15T18:05:23.000Z</updated>
    <content type="html"><![CDATA[<p>æ¯ä¸ªäººï¼Œ åœ¨æ¯ä¸ªé˜¶æ®µï¼Œ éƒ½ä¼šæœ‰ä¸ªä¸å®¹åˆ†è¯´çš„ç†ç”±ã€‚</p>
<a id="more"></a>
<p><img src="http://ac-TC2Vc5Tu.clouddn.com/88dd510b8366b952.jpg" alt="preface image"></p>
<p>è¶ç€è€ƒå®ŒæœŸæœ«è€ƒçš„ä¸€æ®µè‡ªç”±æ—¶é—´ï¼Œ æŠŠä¹‹å‰ä¸€ç›´ç§¯å‹ç€çš„ä¸¤æœ¬ä¹¦ç»™è¯»å®Œäº†ã€‚</p>
<div style="text-align:center" markdown="1"><br><img src="http://ac-TC2Vc5Tu.clouddn.com/e98f89a56b7989aa.jpeg" alt="the hard thing about hard things"><br></div>

<p>ç¬¬ä¸€æœ¬æ˜¯æ¥è‡ªBen Horowitzçš„åˆ›ä¸šç»´è‰°ï¼Œ å‰åŠæ®µæè¿°äº†ä»–ç®¡ç†Loudcloudåˆ°Opswareå°†ä¸€ä¸ªæ¿’ä¸´ç ´äº§çš„å…¬å¸å¸¦åˆ°æœ€åä»¥16äº¿ç¾å…ƒçš„ä»·æ ¼è¢«æƒ æ™®æ”¶è´­çš„ä¼ å¥‡ç»å†ï¼Œ ååŠæ®µåˆ™è®°å½•ä¸‹äº†ä»–å¯¹å…¬å¸ç®¡ç†çš„å„ä¸ªç»†èŠ‚çš„å¿ƒå¾—æ€è€ƒã€‚å·§åˆçš„æ—¶ï¼Œ å°±åœ¨æˆ‘é˜…è¯»è¿™æœ¬ä¹¦çš„æœŸé—´ï¼Œ æ›¾ä»»å¤šå®¶ä¸Šå¸‚å…¬å¸è‘£äº‹ï¼Œ Bençš„ç²¾ç¥å¯¼å¸ˆBill Campbellé€ä¸–äº†ã€‚ ä»–å¯¹Benè¯´çš„é‚£å¥ï¼Œ â€œè¦å’Œå‘˜å·¥ä¸€èµ·å®£å¸ƒè¿™ä¸ªæ¶ˆæ¯â€çš„å‘Šè¯«ä»¿ä½›è¿˜å†å†åœ¨ç›®ï¼Œ é€šè¿‡Bençš„æè¿°ï¼Œ çœ‹å¾—å‡ºCampbellæå…¶å¯Œæœ‰åŒç†å¿ƒ(empathy)çš„é¢†è¢–æ°”è´¨ã€‚ å‘Campbellè‡´æ•¬ã€‚</p>
<div style="text-align:center" markdown="1"><br> <img src="http://ac-TC2Vc5Tu.clouddn.com/6ceefbf6929babac.png" alt="toureet"><br></div>

<p> ç¬¬äºŒæœ¬ä¹¦æ˜¯ç¡…è°·åˆ›ä¸šè€…é™ˆå¤©çš„éšç¬”ã€‚ åœ¨ä¸€ä¸ªå……æ–¥ç€æ¥è‡ªCEOä¹ƒè‡³é£é™©æŠ•èµ„äººè§†è§’çš„åˆ›ä¸šå›é¡¾çš„ç¯å¢ƒä¸‹ï¼Œ ä¸€ä¸ªæ¥è‡ªæŠ€æœ¯åˆä¼™äºº(CTO)çš„è§†è§’æ˜¾å¾—å°¤ä¸ºå¯è´µã€‚ ä»æœ€æ—©çš„æŠ€æœ¯é€‰å‹(ä¸ºä»€ä¹ˆç”¨Django)ï¼Œ åˆ°å¸¦é¢†å…¶å®ƒæŠ€æœ¯äººå‘˜çš„å¼€å‘å’Œç»´æŠ¤(4å°EC2)ï¼Œ åˆ°æŠ€æœ¯è¿‡æ¸¡å’Œå•†ä¸šé€‰æ‹©ï¼Œ é™ˆå¤©ç»™äº†ä¸€ä»½å¾ˆè¯¦ç»†å’ŒçœŸæŒšçš„å‚è€ƒé€‰é¡¹ï¼Œ ä¹Ÿè®©ä¸€ä¸ªéå•†åœˆçš„å­¦ç”Ÿï¼Œ æ…¢æ…¢äº†è§£åˆ°å›½å†…ç™½æ‰‹èµ·å®¶åˆ›ä¸šçš„ä¸€æ¡éå¸¸æœ‰ä»£è¡¨æ€§çš„é“è·¯ã€‚æ„Ÿæ¿€é™ˆå¤©è€å¸ˆçš„åˆ†äº«ã€‚</p>
<p>æ›¾ç»ä¸€ç›´ä»¥ä¸ºï¼Œ åˆ›ä¸šæ˜¯ä¸€ä»¶ç¦»è‡ªå·±å¾ˆè¿œçš„äº‹æƒ…ã€‚ç›´åˆ°ä¸€ä¸ªæœˆå‰ï¼Œ ä¸€ä¸ªå¤šä¼¦å¤šå¤§å­¦æ¯•ä¸šçš„ç›´ç³»å¸ˆå…„æ‰¾åˆ°æˆ‘æ¥èŠèŠåˆ›ä¸šçš„å¯èƒ½ã€‚ ä»–å¸Œæœ›æˆ‘èƒ½å¤Ÿä»¥æŠ€æœ¯åˆä¼™äººçš„èº«ä»½å¸®ä»–åšå‡ºä¸€ä¸ªç±»ä¼¼airbnbçš„ç½‘ç«™å’Œç§»åŠ¨ç«¯ï¼Œ å·²ç»æœ‰å¦å¤–ä¸¤ä¸ªå•†ç§‘æ¯•ä¸šå·²ç»å·¥ä½œçš„å­¦å§æ„¿æ„å‚ä¸å¸‚åœºè¥é”€å’Œæ¨å¹¿ï¼Œ ä¸‡äº‹å…·å¤‡ï¼Œ å°±å·®ä¸ªç¨‹åºå‘˜äº†ã€‚</p>
<p>ä¹Ÿæ˜¯ç¬¬ä¸€æ¬¡ï¼Œ æˆ‘æ„Ÿè§‰åˆ°åˆ›ä¸šï¼Œ å…¶å®ä¹Ÿåªæ˜¯ä¸€ç§é€‰æ‹©ç½¢äº†ï¼Œ çªç„¶æƒ³åˆ°ä¸€å¥å¾®åšä¸Šçœ‹åˆ°çš„è¯ï¼Œ â€œå¯¹æœ‰èƒ½åŠ›çš„äººæ¥è¯´ï¼Œ å¾ˆå¤šäº‹æƒ…ä¸æ˜¯æœºä¼šï¼Œ è€Œæ˜¯é€‰æ‹©ã€‚â€ï¼Œ æˆ‘å½“ç„¶ä¸è§‰å¾—æˆ‘è‡ªå·±æœ‰èƒ½åŠ›å’ŒæŠŠæ¡åœ¨è¿™ä¸ªé˜¶æ®µå°±åˆé€‚æŠ€æœ¯åˆä¼™äººçš„èº«ä»½ï¼Œ åªæ˜¯å½“æˆ‘åœ¨ä¸€ä¸ªæ—è§‚è€…çš„è§’åº¦å»çœ‹æˆ‘èº«è¾¹çš„æ•…äº‹æ—¶ï¼Œ å¥½åƒåˆ›ä¸šï¼Œ ä¹Ÿå¹¶æ²¡æœ‰å€¾å®¶è¡äº§ï¼Œ å­¤æ³¨ä¸€æ·èˆ¬çš„æƒŠå¤©åŠ¨åœ°ï¼Œ å¥½åƒåˆ›ä¸šï¼Œ æ›´åƒæ˜¯åˆ›å§‹äººåœ¨ç”Ÿå‘½æŸä¸ªæ—¶æœŸèµ´çš„ä¸€åœºçº¦ï¼Œ é€‰æ‹©äº†ä¸€æ¡äººè¿¹ç½•è‡³çš„è·¯ï¼Œ ä¹Ÿç”±æ­¤ä¹‰æ— åé¡¾ã€‚</p>
<p>ä¸‹é¢æ˜¯æˆ‘åœ¨é˜…è¯»æ—¶è®°å½•ä¸‹çš„æ–‡å­—ï¼Œ ä»æˆ‘çš„è§’åº¦å‡ºå‘ï¼Œ æˆ–æ‘˜å½•ï¼Œ æˆ–ç›´æ¥æ˜¯è‡ªå·±çš„æ„Ÿå—ï¼Œ åƒã€Šé‡‘è”·è–‡ã€‹é‡Œé‚£ä¸ªæ”¶é›†ç€é‡‘è‰²å°˜åœŸçš„è€äººï¼Œ æˆ‘æŠŠå®ƒä»¬ç•™åœ¨è¿™é‡Œï¼š</p>
<h2 id="The_hard_thing_about_hard_things">The hard thing about hard things</h2><ul>
<li>åœ¨å›¢é˜Ÿæœ‰åå‡ ä¸ªäººçš„æ—¶å€™ï¼Œ æˆ‘æ‹›äº†ä¸€ä¸ªäººåŠ›ç®¡ç†äººå‘˜ï¼Œ ä¸“é—¨å¸®æˆ‘ä»¬æ‹›è˜æœ€èªæ˜çš„äººä»ç¡…è°·ã€‚</li>
<li>Benä»ä¸€ä¸ªåŒäº‹åˆ†äº«çš„mosaicæµè§ˆå™¨ï¼Œ å‘ç°è¿™å°±æ˜¯æœªæ¥ï¼Œ äºæ˜¯ç¬¬äºŒå¤©å°±å»é¢è¯•mosaicå…¬å¸ã€‚</li>
<li><strong>ç©¶ç«Ÿä¸ºä»€ä¹ˆè¦ä¸Šå¸‚ï¼Ÿ</strong> åœ¨æ–‡ä¸­ï¼Œ ä½œè€…æ˜¯åœ¨2000å¹´äº’è”ç½‘æ³¡æ²«çš„æ—¶å€™ï¼Œ å‘ç°ç§äººèµ„é‡‘å·²ç»æ²¡æœ‰å‡ºè·¯çš„æ—¶å€™ï¼Œ æƒ³åˆ°å…¬å¼€ä¸Šå¸‚ï¼Œ è®¤ä¸ºå…¬å¼€å¸‚åœºï¼Œ ä¼šæœ‰æ›´å¤šçš„äººæ¥ç»™è‡ªå·±æŠ•èµ„ï¼Œ è€Œä¸æ˜¯ä¸€ç›´ä»¥æ¥ç§äººæŠ•èµ„è€…çš„é’±ã€‚</li>
<li><strong>å¦‚ä½•åšèµ„äº§é‡ç»„ï¼Ÿ</strong> åœ¨Benå³å°†ç ´äº§çš„æ—¶å€™ï¼Œ ä»–é—®ä»–è‡ªå·±ï¼Œ å¦‚æœè¦é€€å‡ºï¼Œ ä»–ä¼šæ€ä¹ˆåšï¼Œ ä»–è¯´ä»–ä¼šæŠŠopswareå¸¦å‡ºæ¥å–ç»™åˆ«äººç”¨ï¼Œ å› ä¸ºè¿™æ˜¯ä»–è‡ªå·±å¼€å‘çš„ï¼Œ ä»–çŸ¥é“è¿™ä¸ªç‰¹åˆ«å¥½ç”¨ï¼Œ ä½†æ˜¯åŸºäºå½“æ—¶çš„æƒ…å†µï¼Œ è¿™ä¸ªè½¯ä»¶è¢«é™åˆ¶ä½ï¼Œ æ²¡æ³•å’Œloudcloudåˆ†ç¦»å¼€ç”¨ï¼Œ äºæ˜¯ä»–å›å»åˆ†é…äº†ä¸€ä¸ªç²¾è‹±å°ç»„å»å°è¯•ä»ç°æœ‰è½¯ä»¶åˆ†ç¦»å‡ºæ¥ã€‚</li>
<li>åœ¨ç´§æ€¥æƒ…å†µçš„æ—¶å€™ï¼Œ æœ‰å¾ˆæœ‰å¤šäººè®®è®ºä½ ï¼Œ ä»–ä»¬æœ‰äº›äººæ˜¯å› ä¸ºåŒæƒ…ï¼Œ å› ä¸ºå…³å¿ƒï¼Œ ä¹Ÿå¯èƒ½æ˜¯æƒ³æ‘§æ¯ä½ ã€‚ ä¹Ÿä¼šæœ‰å¾ˆå¤šäººæƒ³å¸®ä½ ï¼Œ æƒ³å¸®ä½ æ‘†è„±å›°å¢ƒï¼Œ ç»™å‡ºå„ç§å„æ ·çš„å»ºè®®ã€‚ æ°¸è¿œä»æ•°æ®å’Œå…·ä½“æƒ…å†µå‡ºå‘ï¼Œ æ²¡æœ‰ä»»ä½•ä¸€ä¸ªæ—è§‚è€…æœ‰è¿™ä¸ªè€å¿ƒå¸®ä½ ç†é¡ºæ‰€æœ‰çš„å•†ä¸šç­–ç•¥ï¼Œ å¦‚æœä½ ä»»å‡­é‚£äº›æ ¹æœ¬ä¸äº†è§£å…·ä½“æƒ…å†µçš„äººå¯¹å…¬å¸æŒ‡æ‰‹ç”»è„šï¼Œ é‚£å…¬å¸å°±æ— è¯å¯æ•‘äº†ã€‚</li>
</ul>
<p><img src="http://ac-TC2Vc5Tu.clouddn.com/93c8d666c10be4ba.png" alt="pied piper"></p>
<p><strong>å¾ˆå¤šæ—¶å€™ï¼Œ æˆ‘ä»¬éƒ½ä¼šè¯„è®ºé‚£äº›ä¼Ÿå¤§çš„CEOï¼Œ å¾ˆè‡ªæ‹è‡ªå¤§ï¼Œ narcisistï¼Œ ä¸“åˆ¶ã€‚ ç„¶è€Œä»–ä»¬åªæ˜¯æ²¡æœ‰å¬è¿›å»é‚£äº›æ„šè ¢çš„å»ºè®®å§äº†ï¼Œ åˆæœ‰è°æ¯”ä»–ä»¬æ›´æ¸…æ¥šå…¬å¸å‘å±•çš„æ¯ä¸€ä¸ªç»†èŠ‚å‘¢ï¼Ÿ</strong></p>
<ul>
<li><p>EPSçœŸæ­£æƒ³è¦çš„æ˜¯tangramè¿™å®¶å…¬å¸çš„è½¯ä»¶ï¼Œ è€Œopswareåœ¨tangramæ¯”è¾ƒä½è‚¡ä»·çš„æ—¶å€™æ”¶è´­äº†tangramï¼Œ è®©ä¸»è¦è´Ÿè´£èæ´½opswareçš„EPSè´Ÿè´£ä»»frankç‰¹åˆ«é«˜å…´ã€‚ä¹Ÿå°±æ˜¯Benä»–çš„è¦æ±‚ï¼Œ å¼„æ¸…æ¥šä¹°æ–¹åˆ°åº•æƒ³è¦ä»€ä¹ˆï¼Œ å»æä¾›ä»–æœ€æƒ³è¦çš„ä¸œè¥¿ï¼Œ è€Œä¸æ˜¯ä¸€ä¸ªåŠ²åœ°å¤¸è‡ªå·±å¥½ã€‚</p>
</li>
<li><p>åŒæ—¶éå¸¸é‡è¦çš„ä¹Ÿæ˜¯å›¢é˜Ÿä¼šè®®ï¼Œ Benåœ¨ä¸¤æ¬¡ä¼šè®®ä¸­è¡¨ç°éƒ½è¶…å‡ºäº†æˆ‘çš„æ„æ–™ã€‚ç¬¬ä¸€æ¬¡åœ¨è®¡åˆ’ä»loudcloudä¸­åˆ†ç¦»å‡ºopswareçš„æ—¶å€™ï¼Œ Benå°†æ–°å…¬å¸çš„è‚¡ç¥¨é€ç»™æ‰€æœ‰äººï¼Œ åŒæ—¶å…è®¸æœ‰äººå†³å®šé€€å‡ºã€‚ â€œæˆ‘ä¸ä¼šé€ä½ å‡ºé—¨ï¼Œ ä½†æˆ‘æ±‡å¸®ä½ æ‰¾ä»½æ–°çš„å·¥ä½œã€‚è¦æ˜ç¡®è‡ªå·±æ­¤åˆ»æ‰€ç«™çš„ä½ç½®ï¼Œ å“ªäº›äººå¯ä»¥ä¾é ã€‚å‘Šè¯‰å¤§å®¶ä½ çš„å†³å®šã€‚â€<br>ç¬¬äºŒæ¬¡ï¼Œ åœ¨é‡åˆ°bladelogicè¿™ä¸ªå¼ºåŠ²çš„å¯¹æ‰‹çš„æ—¶å€™ï¼Œ Benå†æ¬¡å¼€äº†ä¸€ä¸ªå…¨ä½“çš„ä¼šè®®ï¼Œ å’Œå¤§å®¶è¯´æ˜ç™½ï¼Œ ä»–éœ€è¦å¤§å®¶ï¼Œ åœ¨æœªæ¥çš„6ä¸ªæœˆé‡Œé¢å¯è¶³äº†åŠ²ï¼Œ â€œæˆ‘è¦ä½ ä»¬å’Œä½ ä»¬æœ€å…³å¿ƒçš„äººè®¤çœŸåœ°è°ˆä¸€æ¬¡è¯ï¼Œ æˆ‘ä»¬éœ€è¦ä¸€æ¬¡è¾¾æˆç›®æ ‡ã€‚â€</p>
</li>
<li><p>ç ”å‘å‡ºå¥½äº§å“æ˜¯åˆ›æ–°è€…çš„èŒè´£ï¼Œ è€Œä¸æ˜¯å®¢æˆ·ã€‚ <strong>å®¢æˆ·åªçŸ¥é“æ ¹æ®ç°åœ¨çš„äº§å“ä½“éªŒæ¥åˆ¤æ–­è‡ªå·±æƒ³è¦ä»€ä¹ˆã€‚</strong></p>
</li>
<li><p>åœ¨ä¼šè®®ä¸­æ·»åŠ ä¸€é¡¹ï¼Œ â€œæˆ‘ç°åœ¨æ²¡æœ‰åšä»€ä¹ˆâ€ çš„è®®ç¨‹ã€‚è€Œå¤§å®¶è§‰å¾—çš„è¿˜æ²¡æœ‰åšåˆ°çš„äº‹ï¼Œ éƒ½æ˜¯ä¸€è‡´çš„ã€‚é‚£å°±æ˜¯è‡ªåŠ¨åŒ–ã€‚åœ¨å…¬å¸æ…¢æ…¢åšå¤§çš„æ—¶å€™ï¼Œ ä¼šæœ‰å¾ˆå¤šæ”¶è´­çš„å£°éŸ³ï¼Œ å…¶ä¸­ï¼Œ ä½ ä¹Ÿä¼š<strong>ä»…ä»…å› ä¸ºåˆ«äººæ‰“ç®—æ”¶è´­çš„æ„æ„¿è€Œå¾—åˆ°è‚¡ç¥¨çš„æº¢ä»·</strong>ï¼Œ è¦çœ‹æ¸…æ¥šè‡ªå·±çš„ä»·å€¼ã€‚ åŒæ—¶ï¼Œ ä¹Ÿå……åˆ†äº†è§£è‡ªå·±çš„ç›´ç³»ä¸‹å±ä»–ä»¬çš„æ„æ„¿ã€‚</p>
</li>
<li><p>è€Œå¯¹äºä¸€ä¸ªCEOèƒ½åŠ›çš„æœ€å¥½çš„è€ƒé‡ï¼Œ æ˜¯é€†å¢ƒä¸æ˜¯é¡ºå¢ƒï¼Œ æ˜¯ä¸“å¿ƒè‡´å¿—çš„èƒ½åŠ›ï¼Œ å’Œåœ¨èµ°æŠ•æ— è·¯çš„æ—¶å€™é€‰æ‹©æœ€ä½³è·¯çº¿çš„èƒ½åŠ›ã€‚ä¸æ˜¯å»å¦‚ä½•ä¸çŠ¯é”™è¯¯ï¼Œ è€Œæ˜¯åœ¨çŠ¯é”™è¯¯ä¹‹åå¦‚ä½•å»æ·±åˆ»ç†è§£é‚£äº›ä½ å¿…é¡»è¦åšçš„äº‹ã€‚</p>
</li>
<li><p>å½“ä½ æ„è¯†åˆ°ä¸€ä¸ªCEOçš„èŒè´£å°±æ˜¯ä¸ºå…¬å¸è§£å†³é—®é¢˜çš„æ—¶å€™ï¼Œ ä½ å°±çŸ¥é“ï¼Œ æœ‰äº›æ²¡æœ‰ç”¨çš„ç©ºè¯å¯ä»¥çœå»äº†ã€‚</p>
</li>
<li><p><strong>åœ¨äººç±»çš„æ‰€æœ‰äº¤å¾€ä¸­ï¼Œ æ²Ÿé€šé‡å’Œä¿¡ä»»ç¨‹åº¦æˆåæ¯”ã€‚</strong>ç°åœ¨å¾ˆå¤šçš„å…¬å¸æ–‡åŒ–ä¼šé˜»ç¢åæ¶ˆæ¯çš„ä¼ æ’­ï¼Œ çœŸç›¸å¦‚æœæ°¸è¿œåªèƒ½è¢«æˆè°‘åœ°è¯´å‡ºæ¥ï¼Œ é‚£ä¹ˆç­‰åˆ°é‡‡å–è¡ŒåŠ¨çš„æ—¶å€™å°±æ™šäº†ã€‚å»ºç«‹ä¸€ä¸ªå¥–åŠ±æ–‡åŒ–ï¼Œ å¯¹æ‰¾åˆ°é—®é¢˜ç—‡ç»“å’Œè§£å†³æ–¹æ¡ˆçš„äººç»™äºˆå¥–åŠ±ã€‚äºæ­¤åŒæ—¶ï¼Œ å…¬å¸çš„ä»»ä½•å†³ç­–å¿…é¡»å½“æœºç«‹æ–­ï¼Œ æ¯”å¦‚åƒè£å‘˜è¿™ä¸€ç±»çš„é‡å¤§å†³å®šï¼Œ å¦‚æœä¸å°å¿ƒèµ°æ¼é£å£°ï¼Œ å½“å‘˜å·¥è¿‡æ¥è´¨é—®ç®¡ç†å±‚çš„æ—¶å€™ï¼Œ ç®¡ç†è€…å°±åªæœ‰ä¸¤ç§é€‰æ‹©äº†ï¼Œ è¦ä¹ˆè¡¨ç°å‡ºä¸çŸ¥æƒ…ï¼Œ è¦ä¹ˆå°±æ˜¯æ’’è°ï¼Œ è€Œè¿™å…¶ä¸­ä»»ä½•çš„ä¸€ä¸ªè¡Œä¸ºéƒ½ä¼šç ´åå…¬å¸æ–‡åŒ–ã€‚</p>
</li>
<li><p>å¯¹å¾…è£å‘˜ã€‚ è£å‘˜å¯¹å…¬å¸çš„æœ€å¤§ä¼¤å®³å°±æ˜¯å£«æ°”ã€‚è€Œå£«æ°”ä½ä¸‹çš„ä¸»è¦è¡¨ç°ç—‡çŠ¶å°±æ˜¯æ€€ç–‘ï¼Œ æ‰€ä»¥è¶Šæ˜¯å›°éš¾çš„æ—¶å€™ï¼Œ å°±è¶Šè¦å¦è¯šç›¸å¾…ä½ çš„å‘˜å·¥ã€‚åŒæ—¶ï¼Œ è¿™æ˜¯ä¸€ä¸ªéå¸¸ä¸¥é‡å’Œä¸¥è‚ƒçš„æ—¶åˆ»ï¼Œ éœ€è¦ä¸€åç›´æ¥äº²å±ä¸Šå¸å»æ¸©å’Œåœ°è§£å†³è¿™ä¸ªäº‹æƒ…ï¼Œ ä½ åªè¦è®°ä½ï¼Œ ä½ çš„å‘˜å·¥å¯èƒ½å¹¶æ— æ³•è®°å¾—ä»–åœ¨è¿™é‡Œå·¥ä½œçš„æ¯ä¸€å¤©ï¼Œ ä½†æ˜¯ä»–ä¸€å®šä¼šè®°ä½ä»–è¢«è¾æ‰çš„é‚£ä¸€å¤©ã€‚ <strong>æ°¸è¿œè®°å¾—ï¼Œ èªæ˜æ˜¯ä¸€ç§å¤©èµ‹ï¼Œ è€Œå–„è‰¯æ˜¯ä¸€ç§é€‰æ‹©ã€‚</strong> ä½†æ˜¯æœ‰ä¸€ç‚¹ä¹Ÿå¾ˆé‡è¦ï¼Œ <strong>è¯æ˜¯è¯´ç»™ç•™ä¸‹æ¥çš„äººå¬çš„</strong>ï¼Œ ä½ æ€ä¹ˆå¯¹å¾…é‚£äº›è¢«è¾å»çš„å‘˜å·¥ï¼Œ åœ¨å›°éš¾æ—¶å€™ï¼Œ å°±ä¼šæ˜¯ç•™ä¸‹æ¥çš„å‘˜å·¥çš„ä¸€æ¬¡è‡ªæˆ‘æ˜ ç…§ã€‚</p>
</li>
<li><p>ä¸€å®šè¦æ˜æ™°ä»€ä¹ˆæ—¶å€™ç¬¨åŠæ³•æœ€æœ‰ç”¨ï¼Œ ä¸æ˜¯æ¬ºéª—è‡ªå·±è¯´ï¼Œ â€œäº§å“æ˜¯å®Œç¾çš„ï¼Œ æ˜¯æ²¡æœ‰é—®é¢˜çš„ï¼Œ é—®é¢˜å‡ºåœ¨é”€å”®äººå‘˜ï¼Œ é—®é¢˜å‡ºåœ¨ç”¨æˆ·çš„ä¸‰åˆ†é’Ÿçƒ­åº¦ã€‚â€ï¼Œ ä¸ï¼Œ é—®é¢˜æ˜¯ï¼Œ äº§å“ä¸å¤Ÿå¥½ã€‚</p>
</li>
<li><p>ä¸è®©è¿™ä¸ªå…¬å¸æœ€ç²¾è‹±çš„äººæ‰å»å‚ä¸æœ€æ£˜æ‰‹çš„é—®é¢˜ï¼Œ å®Œå…¨å°±æ˜¯æµªè´¹ã€‚<strong>ä¸€ä¸ªäººï¼Œ æ— è®ºå¤šå‡ºè‰²ï¼Œ éƒ½è§£å†³ä¸äº†ä»–ä¸äº†è§£çš„é—®é¢˜ã€‚ä¹Ÿå°±åƒå¼€æºç¤¾åŒºæ‰€å€¡å¯¼çš„ä¸€æ ·ï¼Œ åªæœ‰æœ‰è¶³å¤Ÿå¤šçš„çœ¼é•œï¼Œ å°±å¯ä»¥è®©æ‰€æœ‰é—®é¢˜æµ®å‡ºæ°´é¢ã€‚</strong></p>
</li>
<li><p>å¾ˆå¤šæ—¶å€™ï¼Œ ä½ ä¼šå©å’å¾ˆå¤šæŒ‡ä»¤ç»™ä½ çš„ä¸‹å±ï¼Œ ä½†ä»–ä»¬å¹¶ä¸ä¸€å®šä¼šä¸¥æ ¼æ‰§è¡Œï¼Œ ç”šè‡³ä¸ä¼šæ‰§è¡Œè¿™äº›è¦æ±‚ã€‚ è€Œè¿™ç§ç°è±¡çš„èƒŒååŸå› æ˜¯ï¼Œ <strong>ä½ åªå‘Šè¯‰äº†ä»–ä»¬åº”è¯¥æ€ä¹ˆåšï¼Œ ä»–ä»¬å´ä¸çŸ¥é“ä¸ºä»€ä¹ˆè¦è¿™ä¹ˆåšã€‚</strong>ä¸€ä¸ªå¥½çš„å·¥ä½œç¯å¢ƒå°±æ˜¯ï¼Œ æ¯ä¸ªäººæ—©ä¸Šä¸€çå¼€çœ¼ç›å°±çŸ¥é“è‡ªå·±æ‰€åšçš„å·¥ä½œé«˜æ•ˆæœ‰ç”¨ã€‚ç®¡ç†å±‚éœ€è¦å’Œæ¯ä¸ªå‘˜å·¥æœ‰ä¸€å¯¹ä¸€çš„ä¼šé¢ã€‚å½“ç„¶å°±æœ‰äººé—®äº†ï¼Œ å¥½çš„å·¥ä½œç¯å¢ƒå’Œåçš„å·¥ä½œç¯å¢ƒæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œ æ˜¯çš„ï¼Œ åœ¨ä¸€åˆ‡é¡ºåˆ©çš„æ—¶å€™ï¼Œ æ²¡æœ‰åŒºåˆ«ï¼Œ ä½ çš„äº®çœ¼æˆç»©ä¼šé®ä½æ‰€æœ‰å¯èƒ½è´¨ç–‘å£°çš„å˜´ï¼Œ é—®é¢˜ä¸æ˜¯æ²¡æœ‰ï¼Œ è€Œæ˜¯è®©è§£å†³é—®é¢˜çš„äººè‡ªæˆ‘æ€€ç–‘äº†ã€‚ ä½†æ˜¯ä¸€æ—¦åœ¨äº‹æƒ…ä¸é¡ºåˆ©çš„æ—¶å€™ï¼Œ å¥½ä¸åå°±æ˜¯ç”Ÿä¸æ­»çš„å·®åˆ«ã€‚</p>
</li>
<li><p><strong>å¦‚ä½•å¯¹ç”Ÿäº§åŠ›è¿›è¡Œç›´è§‚çš„æµ‹é‡ï¼Ÿ</strong></p>
</li>
<li><p>å¥½çš„äº§å“ç»ç†ä¼šå°†ä¸€äº›é‡è¦é—®é¢˜ä»¥ä¹¦é¢å½¢å¼çºªå½•ä¸‹æ¥ï¼Œ ç«äº‰ä¸­çš„è‰¯ç­–ï¼Œ è‰°éš¾çš„æ¶æ„é€‰æ‹©ï¼Œ è‰°éš¾çš„äº§å“é€‰æ‹©ã€‚è€Œå·®çš„äº§å“ç»ç†ï¼Œ åªä¼šä»¥å£å¤´çš„æ–¹å¼è¡¨è¾¾è‡ªå·±çš„æ„è§ã€‚</p>
</li>
<li><p>å¤§å…¬å¸çš„ä¸»ç®¡éƒ½æ˜¯åº”ç­”å¼çš„, å½“æœ‰äº‹æƒ…è¦å®ä¾‹ï¼Œ æ¥å—åˆ°å‘½ä»¤ä¹‹åï¼Œ æ‰ä¼šå»æ‰§è¡Œã€‚è€Œå°å…¬å¸çš„ä¸»ç®¡ï¼Œ åˆ›ä¸šå…¬å¸çš„ç®¡ç†è€…ï¼Œ ä½ ä¸è‡ªå·±ä¸»åŠ¨æ‰¿æ‹…èµ·å¾ˆå¤šçš„è´£ä»»è¿™ä¸ªå…¬å¸å°±å€’äº†å•Šã€‚ä¸€ç§å¾ˆå±é™©çš„æƒ…å†µå°±æ˜¯ï¼Œ åœ¨åˆ›ä¸šå…¬å¸è‰°éš¾çš„æ—¶æœŸï¼Œ ä½ é›‡ç”¨äº†ä¸€ä¸ªè®¤è‚¡æ•°è¿˜ä¸å°çš„é«˜è–ªé«˜ç®¡ï¼Œ ä»–å¥½åƒå¹¶æ²¡æœ‰å¹²ä»€ä¹ˆäº‹ï¼Œ å´èƒ½å¤Ÿå åˆ°ä¸€å®šæ¯”ä¾‹çš„åˆ©æ¶¦ã€‚è¿™å°±æ˜¯å¹¶ä¸é€‚åº”èŠ‚å¥çš„ç®¡ç†å±‚ï¼Œ å¯¹åˆ›ä¸šå…¬å¸çš„å¥‹æ–—å‘˜å·¥æœ‰å¾ˆå¤§çš„æ‰“å‡»ã€‚</p>
</li>
<li><p><strong>å…³äºæ‹›è˜</strong>ã€‚ æ°¸è¿œè¦æé†’è‡ªå·±ï¼Œ æˆ‘ä»¬æ˜¯æ‰¾è°æ‹¥æœ‰è§£å†³é—®é¢˜çš„èƒ½åŠ›ï¼Œ è€Œä¸æ˜¯è°çœ‹ä¸Šå»æœ€é€‚åˆã€‚æ¯ä¸ªäººéƒ½ä¼šæœ‰æˆ–å¤šæˆ–å°‘çš„ç¼ºç‚¹ï¼Œ ä»–å¯èƒ½ä¸å–„äºè¡¨è¾¾ï¼Œ ä»–å¯èƒ½æœ‰ç‚¹è‡ªå¤§ï¼Œ æœ‰ç‚¹è„¾æ°”èºï¼Œ è¿™äº›ç‰¹è´¨éƒ½ä¸åº”è¯¥è¿·æƒ‘ä½ çœŸæ­£æ‰¾å¯»çš„ç›®æ ‡ã€‚ å°¤å…¶æ˜¯åœ¨å›½å†…è¿™ä¸ªé±¼é¾™æ··æ‚çš„æ‹›è˜å¸‚åœºï¼Œ æ˜æ˜ä¼˜ç§€çš„äººå°±å·²ç»æ˜¯å‡¤æ¯›éºŸè§’äº†ï¼Œ å¦‚æœä½ è¿˜åªå…³æ³¨ç¼ºç‚¹ï¼Œ åªå¸Œæœ›ç«™åœ¨é«˜å¤„è¯„è®ºä¸€ç•ªè‡ªæˆ‘éº»é†‰çš„è¯ï¼Œ è¿™å¯¹å…¬å¸å°±å¤ªå¯æƒœäº†ã€‚<strong>å†™ä¸‹ä½ è®¤ä¸ºæ£€éªŒäººæ‰æœ€å¥½çš„å‡ ä¸ªé—®é¢˜ï¼Œ å½¢æˆé¢è¯•çš„è§„èŒƒã€‚</strong></p>
</li>
<li><p>ä¸€ä¸ªå¥½çš„ç®¡ç†è€…æ€è€ƒé—®é¢˜ä»æ˜¯ä¼šæœ‰ä¸¤ä¸ªè§’åº¦ï¼Œ ä¸€ä¸ªæ˜¯æˆ‘æƒ³æ€ä¹ˆåšï¼Œ å¦ä¸€ä¸ªæ˜¯å‘˜å·¥ä¼šæ€ä¹ˆæƒ³ã€‚</p>
</li>
<li><p>åŠå…¬å®¤æ”¿æ²»</p>
<ul>
<li>å¦‚æœä½ çš„å‘˜å·¥ç»™ä½ æåŠ è–ªçš„è¦æ±‚ï¼Ÿ æ‹’ç»ï¼Œ å¦‚æœä½ æ¥å—äº†è¿™ä¸ªè¦æ±‚ï¼Œ å…¶ä»–å‘˜å·¥ä¼šè®¤ä¸ºä½ åŠ è–ªæ˜¯å› ä¸ºä½ æå‡ºäº†è¿™ä¸ªè¦æ±‚è€Œä¸æ˜¯å› ä¸ºä½ å‡ºè‰²çš„ä¸šç»©ã€‚ è¿™ä¸ªä¼šè®©å…¶ä»–äººæ›´åŠ è·ƒè·ƒæ¬²è¯•ã€‚åå¤„äºŒï¼Œ é‚£äº›åŠå…¬å®¤é‡Œè€å®æ²‰é»˜ï¼Œ æˆ–è€…å¯¹è¿™ç§æ”¿æ²»æ‰‹æ®µä¸æ•æ„Ÿçš„äººï¼Œ æ˜¯ä¸æ˜¯å°±é”™è¿‡äº†åŠ è–ªçš„æœºä¼šå‘¢ï¼Ÿå…¶ä¸­ä¸€ä¸ªé¿å…çš„æ–¹æ³•å°±æ˜¯<strong>ä¿è¯å‘˜å·¥æ”¶å…¥å’Œå…¬å¸æ”¶å…¥ä¹‹é—´çš„ä¸€è‡´æ€§</strong>ã€‚</li>
<li>å¦‚æœä½ çš„å‘˜å·¥ç»™ä½ æå¸Œæœ›æ‰©å¤§æƒåŠ›èŒƒå›´çš„è¦æ±‚ï¼Ÿä¸€ä¸ªç»å¯¹ä¸èƒ½è§¦ç¢°çš„åº•çº¿æ˜¯ï¼Œ ä½ ç»™ä»–ä¸€ä¸ªå£å¤´æ‰¿è¯ºï¼Œ ç»™äº†å°é“æ¶ˆæ¯ä¸€æ¬¡æœºä¼šã€‚ è®°ä½ï¼Œ åœ¨å…¬å¸çš„å†³ç­–æ–¹æ¡ˆæ˜¯ï¼Œ <strong>å†³ç­–å³å‡ºï¼Œ ç«‹å³æ‰§è¡Œï¼Œ ä¸è¦åœ¨äº¤è°ˆçš„æ—¶å€™æµéœ²å‡ºä»»ä½•å£å¤´æ‰¿è¯ºçš„å€¾å‘</strong>ã€‚</li>
</ul>
</li>
</ul>
<ul>
<li><p>ä¸è¦å› ä¸ºä½ åœ¨ä¸šåŠ¡ä¸Šç¼ºä¹ç»éªŒå°±é™ä½å¯¹ä»–ä»¬å·¥ä½œçš„è¦æ±‚ã€‚å¾ˆå¤šå¹´ç»è½»è½»çš„CEOï¼Œ ä¼šå› ä¸ºåœ¨å…¬å¸åˆ›ç«‹ä¹‹åˆåª’ä½“å‘å¸ƒçš„å‡ ç¯‡æ­£é¢æŠ¥é“è€Œå–œå‡ºæœ›å¤–ã€‚è¿™ä¸ªæ ‡å‡†å¤ªä½äº†ã€‚</p>
</li>
<li><p>ç®¡ç†ä¸€å®¶åˆ›ä¸šå…¬å¸å°±åƒé©¾é©¶ç€ä¸€è¾†é«˜é€Ÿè¡Œé©¶çš„æ±½è½¦ï¼Œ å½“ä½ ä»¥ä¸€ä¸ªé«˜é€Ÿè¿‡å¼¯çš„æ—¶å€™ï¼Œ åƒä¸‡åˆ«çœ‹å¢™ï¼Œ å¦‚æœä½ çœ‹ç€å¢™ï¼Œ ä½ å°±ç›´æ¥æ’ä¸Šå»ï¼Œ ç›¯ç€è·¯ï¼Œ ä½ å°±å®‰ç„¶æ— æ™ã€‚</p>
</li>
<li><p>Benä»–ä»¬å»ºç«‹ä¸€ä¸ªé£æŠ•å…¬å¸çš„åˆè¡·ï¼Œ å°±æ˜¯å‘ç°äº†æŠ€æœ¯æ€§åˆ›å§‹äººCEOå’ŒèŒä¸šCEOçš„åŒºåˆ«ï¼Œ é‚£äº›ä¼Ÿå¤§çš„æŠ€æœ¯å‹é©±åŠ¨çš„å…¬å¸éƒ½æ˜¯ç”±åˆ›å§‹äººç»è¥çš„ï¼Œ ç„¶è€ŒæŠ€æœ¯å‹åˆ›å§‹äººåœ¨ç®¡ç†ä¸Šï¼Œ äººè„‰ä¸Šå’Œè¥é”€å®£ä¼ ä¸Šæœ‰å¾ˆå¤§çš„ä¸è¶³ã€‚</p>
</li>
</ul>
<blockquote>
<p>åè®°:å¯¹äºã€Šé€”å®¢åœˆã€‹ä¸€ä¹¦çš„æ€»ç»“å›é¡¾å°†ä¼šåˆ†å¼€åœ¨å¦å¤–ä¸€ç¯‡åšæ–‡ä¸­ï¼Œ ä¸»è¦æ¢è®¨å·¥å…·æ€§å’Œç¤¾äº¤æ€§äº§å“çš„æ¯”è¾ƒå’Œæ›´å¤šåˆ›å§‹äººå¿…é¡»æ³¨æ„çš„å…·ä½“è‚¡æƒç»“æ„ï¼Œ æ•¬è¯·æœŸå¾…ã€‚</p>
<p>Edit:ã€Šé€”å®¢åœˆã€‹ä¸€ä¹¦çš„é˜…è¯»æ‰‹è®°å·²å®Œæˆï¼ŒğŸ‘‰<a href="http://chocoluffy.com/2016/05/13/%E5%8F%A6%E4%B8%80%E7%A7%8D%E9%BC%93%E5%A3%B0-%E8%AF%BB%E3%80%8A%E9%80%94%E5%AE%A2%E5%9C%88%E3%80%8B%E6%9C%89%E6%84%9F/">å¦ä¸€ç§é¼“å£°-è¯»ã€Šé€”å®¢åœˆã€‹æœ‰æ„Ÿ</a></p>
</blockquote>
]]></content>
    <summary type="html">
    <![CDATA[<p>æ¯ä¸ªäººï¼Œ åœ¨æ¯ä¸ªé˜¶æ®µï¼Œ éƒ½ä¼šæœ‰ä¸ªä¸å®¹åˆ†è¯´çš„ç†ç”±ã€‚</p>]]>
    
    </summary>
    
      <category term="åˆ›ä¸š" scheme="http://chocoluffy.com/tags/%E5%88%9B%E4%B8%9A/"/>
    
      <category term="è¯»ä¹¦ç¬”è®°" scheme="http://chocoluffy.com/tags/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"/>
    
      <category term="åŸåˆ›" scheme="http://chocoluffy.com/categories/%E5%8E%9F%E5%88%9B/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[åˆ›æ„è§†é¢‘åˆ†å± - HTML5 & JS]]></title>
    <link href="http://chocoluffy.com/2016/04/23/%E5%88%9B%E6%84%8F%E8%A7%86%E9%A2%91%E5%88%86%E5%B1%8F-HTML5-JS/"/>
    <id>http://chocoluffy.com/2016/04/23/åˆ›æ„è§†é¢‘åˆ†å±-HTML5-JS/</id>
    <published>2016-04-24T01:53:56.000Z</published>
    <updated>2016-05-05T18:56:44.000Z</updated>
    <content type="html"><![CDATA[<p>å’Œæœ‹å‹èŠå¤©æ—¶æ— æ„é—´å‘ç°çš„ä¸€ä¸ªåˆ›æ„è§†é¢‘åˆ†å±çš„æƒ³æ³•ï¼Œ æ¥è‡ª<a href="http://www.beoplay.com/products/beoplayh7?_ga=1.127614725.969767543.1461077943#at-a-glance" target="_blank" rel="external">beoplay</a>è¿™ä¸ªé«˜ç«¯è€³æœºçš„å®£ä¼ é¡µé¢ï¼Œ åœ¨è‡ªå·±å®ç°çš„è¿‡ç¨‹ä¸­ï¼Œ ä¹Ÿå‘ç°äº†è§†é¢‘è‡ªé€‚åº”å±…ä¸­çš„è¿™ä¸ªè®¾è®¡ç»†èŠ‚ï¼Œ è‡ªå·±ä¹Ÿæ£é¼“äº†å‡ºæ¥ï¼Œ è¯è¯´åœ¨ä¹‹åäº§å“çš„å®£ä¼ ä¸»é¡µè§†é¢‘å¯ä»¥ä¸€è¯•çš„ï¼Œ ä»ä¸¤ä¸ªè§†è§’å»è¯ é‡ŠåŒä¸€ä¸ªæ•…äº‹ï¼Œ å°±æ˜¯å¯¹è¿™æ ·æœ‰å¿ƒæ€çš„è®¾è®¡ç»†èŠ‚æ²¡æœ‰ä»»ä½•æŠµæŠ—åŠ›å‘¢ã€‚</p>
<a id="more"></a>
<div style="text-align:center" markdown="1"><br><img src="https://dl.dropboxusercontent.com/s/09k1efohvmdkphu/beoplay%20demo.gif?dl=0" alt="beoplay"><br></div>

<p>ç›®æ ‡ï¼š ä»¿é€ beoplayè¿™æ¬¾è€³æœº<a href="http://www.beoplay.com/products/beoplayh7?_ga=1.127614725.969767543.1461077943#video" target="_blank" rel="external">ä¸»é¡µçš„å®£ä¼ è§†é¢‘</a>æ¥å®ç°ä¸€ä¸ªç±»ä¼¼çš„è§†é¢‘åˆ†å±çš„æ•ˆæœã€‚</p>
<p>ç‰ˆæœ¬1.0ï¼ˆä¸åŠ è§†é¢‘è‡ªé€‚åº”å±…ä¸­ï¼‰:</p>
<div style="text-align:center" markdown="1"><br><img src="https://dl.dropboxusercontent.com/s/zppojylzfsyk6in/screensplit1.0.gif?dl=0" alt="demo1.0"><br></div>

<p>right videoæ˜¯é™æ­¢çš„ä¸åŠ¨çš„ï¼Œ åŒæ—¶ä½äºæœ€åº•å±‚ã€‚ ç›®å‰æ‰€æœ‰çš„ä¼¸ç¼©éƒ½æ˜¯åœ¨æ§åˆ¶left videoï¼Œ åŒæ—¶ç”±äºæˆ‘ä»¬è®¾ç½®äº†left videoçš„<code>z-index</code>ä¸º3ï¼Œ é‚£ä¹ˆå·¦è¾¹çš„è§†é¢‘ä¼šè¦†ç›–åœ¨å³è¾¹çš„è§†é¢‘ä¸Šã€‚æ¥ä¸‹æ¥çš„ç›®æ ‡å°±å¾ˆæ˜ç¡®äº†ï¼Œ æˆ‘ä»¬éœ€è¦è¿½è¸ªé¼ æ ‡åœ¨æ•´ä¸ªcontaineré‡Œé¢çš„ä½ç½®(æˆ‘ä»¬ä¼šç”¨å å®½åº¦çš„ç™¾åˆ†æ¯”æ¥è¡¨ç¤º)ï¼Œ ç„¶åï¼Œ é€šè¿‡æ”¹å˜å·¦è¾¹è§†é¢‘çš„å®½åº¦ï¼Œ åŒæ—¶ä¹Ÿå°±æŠŠä½äºä¸‹é¢çš„å³è¾¹è§†é¢‘æš´éœ²å‡ºæ¥äº†ï¼Œ æ¥è¾¾åˆ°åˆ‡æ¢çš„æ•ˆæœã€‚</p>
<p>ç†è§£åˆ°è¿™ä¸€æ­¥ä¹‹åï¼Œç›®æ ‡å°±æ˜¯<strong>å¦‚ä½•æ”¹å˜è§†é¢‘å®½åº¦</strong>äº†ã€‚è¿™é‡Œå…¶å®éšè—ç€ä¸€ä¸ªé™·é˜±ï¼Œ å°±æ˜¯å› ä¸ºæˆ‘ä»¬ä¸å¯ä»¥ç›´æ¥æ”¹å˜<strong>è§†é¢‘æœ¬èº«çš„å®½åº¦</strong>ï¼Œå› ä¸ºè§†é¢‘çš„é«˜å®½æ¯”åœ¨æ‹æ‘„çš„æ—¶å€™å°±å†³å®šäº†ï¼Œ æˆ‘ä»¬å¦‚æœåªæ‹‰é•¿è§†é¢‘è€Œä¸åŒæ—¶æé«˜é«˜åº¦çš„è¯ï¼Œ å°±ä¼šä½¿å¾—åœ¨çºµè½´ä¸Šéƒ¨åˆ†å†…å®¹è¢«é®ç›–åˆ°ï¼Œ å¤§è‡´æ„æ€å¦‚å›¾ï¼š</p>
<div style="text-align:center" markdown="1"><br><img src="http://ww2.sinaimg.cn/large/c5ee78b5gw1f37ixae23nj219e0oe77a.jpg" alt="oversizing"><br></div>

<p>è€Œè¿™å¹¶ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„æ•ˆæœï¼Œ æˆ‘ä»¬å¸Œæœ›ï¼Œ è§†é¢‘å¯ä»¥ç»´æŒåœ¨åŒä¸€ä¸ªå¤§å°ï¼Œè€Œæ”¹å˜çš„åªæ˜¯<strong>è§†çª—çš„æ¨ªå‘ç§»åŠ¨</strong>ï¼Œ<br>è¿™ä¸€æ­¥æˆ‘ç”¨åˆ°äº†ä¸€ä¸ªtrickï¼Œ å°±æ˜¯<code>overflow: hidden;</code>ï¼Œ æˆ‘ä»¬åœ¨å·¦è¾¹çš„è§†é¢‘å¤–é¢åŒ…ä½äº†ä¸€å±‚<code>div</code>ï¼Œ å› ä¸ºæˆ‘ä»¬æ§åˆ¶çš„å°±æ˜¯å·¦è¾¹çš„è§†é¢‘ï¼Œ ç„¶åæˆ‘ä»¬æ¥æ”¹å˜è¿™ä¸ªâ€œwrapperâ€çš„å®½åº¦ï¼ˆåŒæ—¶ä¿è¯ä¿è¯é‡Œé¢çš„left videoçš„å®½åº¦å æ¯”ä»ç„¶å æœ€å¤–é¢containerçš„100%ï¼‰ï¼Œ æ¥æ”¹å˜æˆ‘ä»¬çš„è§†çª—ï¼Œ æ‰€ä»¥è¿™ä¸ªwrapperåœ¨ç½‘é¡µä¸Šæ‰€åŒ…ä½çš„éƒ¨åˆ†ï¼Œ åŠ ä¸Šäº†<code>overflow: hidden;</code>é®å»äº†è¶…å‡ºéƒ¨åˆ†åï¼Œ æ˜¾ç¤ºçš„å°±æ˜¯å·¦è¾¹çš„è§†é¢‘äº†ã€‚</p>
<p>æ¯”å¦‚ä¸€å¼€å§‹ï¼Œ æˆ‘ä»¬å¸Œæœ›ä¸¤ä¸ªè§†é¢‘éƒ½å„å ä¸€åŠï¼Œ é‚£ä¹ˆå·¦è¾¹çš„è§†çª—ä¸€å¼€å§‹å°±ä¼šæ˜¯å æ¯”åŸcontainerçš„å®½åº¦çš„50%ï¼Œ è€ŒåŸè§†é¢‘æœ¬èº«çš„å®½åº¦åº”è¯¥ä¸å˜ï¼Œ å³containerçš„å®½åº¦çš„100%ï¼Œ æ‰€ä»¥æˆ‘ä»¬éœ€è¦ç»™left videoèµ‹ä¸Š200%çš„å®½åº¦ï¼Œ ç†ç”±æ˜¯è¿™ä¸ªå±æ€§æ˜¯å¯¹å…¶ç›´æ¥çˆ¶çº§çš„divèµ·ä½œç”¨çš„ã€‚</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* clipper å³å·¦ä¾§è§†é¢‘çš„è§†çª— */</span></span><br><span class="line"><span class="id">#clipper</span> <span class="rules">&#123;</span><br><span class="line">	<span class="rule"><span class="attribute">width</span>:<span class="value"> <span class="number">50%</span></span></span>;</span><br><span class="line">	<span class="rule"><span class="attribute">position</span>:<span class="value"> absolute</span></span>;</span><br><span class="line">	<span class="rule"><span class="attribute">top</span>:<span class="value"> <span class="number">0</span></span></span>;</span><br><span class="line">	<span class="rule"><span class="attribute">bottom</span>:<span class="value"> <span class="number">0</span></span></span>;</span><br><span class="line">	<span class="rule"><span class="attribute">overflow</span>:<span class="value"> hidden</span></span>;</span><br><span class="line">&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* è¯¥å±æ€§ä½œç”¨äºå·¦ä¾§è§†é¢‘  */</span></span><br><span class="line"><span class="id">#clipper</span> <span class="tag">video</span> <span class="rules">&#123;</span><br><span class="line">	<span class="rule"><span class="attribute">width</span>:<span class="value"> <span class="number">200%</span></span></span>;</span><br><span class="line">	<span class="rule"><span class="attribute">position</span>:<span class="value"> absolute</span></span>;</span><br><span class="line">	<span class="rule"><span class="attribute">z-index</span>:<span class="value"> <span class="number">10</span></span></span>;</span><br><span class="line">&#125;</span></span><br></pre></td></tr></table></figure>
<p>æ•ˆæœå¦‚ä¸‹ï¼š</p>
<div style="text-align:center" markdown="1"><br><img src="http://ww2.sinaimg.cn/large/c5ee78b5gw1f37j53tshej21a20o643j.jpg" alt="init"><br></div>

<p>ä¹‹åçš„äº‹æƒ…å°±æ¸…æ¥šäº†ï¼Œ æˆ‘ä»¬åªéœ€è¦æ”¹å˜<strong>å·¦è¾¹è§†çª—çš„å®½åº¦ï¼Œ å¹¶åŒæ—¶ä¿è¯è§†é¢‘æœ¬èº«ç›¸å¯¹åŸå®¹å™¨çš„å®½åº¦ä¸å˜</strong>ã€‚å†™çš„jsä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> rect = videoContainer.getBoundingClientRect(),</span><br><span class="line">offset = e.pageX - videoContainer.offsetLeft,</span><br><span class="line">position = ((e.pageX - videoContainer.offsetLeft) / videoContainer.offsetWidth) * <span class="number">100</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (position &lt;= <span class="number">100</span>) &#123;</span><br><span class="line">	videoClipper.style.width = position+<span class="string">"%"</span>;</span><br><span class="line">	leftVideo.style.width = ((<span class="number">100</span>/position)*<span class="number">100</span>)+<span class="string">"%"</span>;</span><br><span class="line">	leftVideo.style.zIndex = <span class="number">3</span>;</span><br><span class="line">ï½</span><br></pre></td></tr></table></figure>
<blockquote>
<p>ç®€å•åœ°è¯´ï¼Œ åªéœ€ä¿è¯<code>videoClipper.style.width * leftVideo.style.width = 100%</code>å³å¯ã€‚</p>
</blockquote>
<p>é‚£æœ€åä¸€ä¸ªæ”¹å˜<code>z-index</code>çš„ç›®çš„ï¼Œ å°±æ˜¯ç¡®ä¿å·¦è¾¹çš„è§†é¢‘ä¸€ç›´å åŠ åœ¨å³è¾¹çš„è§†é¢‘ä¹‹ä¸Šã€‚</p>
<p>ç‰ˆæœ¬2.0ï¼ˆå¢åŠ äº†è‡ªé€‚åº”å±…ä¸­ï¼‰ï¼š</p>
<div style="text-align:center" markdown="1"><br><img src="https://dl.dropboxusercontent.com/s/8y6fr3ib87yz9h7/screensplit2.0.gif?dl=0" alt="demo2.0"><br></div>

<p>åˆè¡·ï¼š å› ä¸ºä»æ‹æ‘„çš„è§’åº¦ï¼Œ å¤§éƒ¨åˆ†çš„æ—¶é—´ï¼Œ æˆ‘ä»¬éƒ½ä¼šæŠŠæ‹æ‘„çš„ä¸»ä½“æ”¾åœ¨è§†é¢‘çš„ä¸­é—´ä½ç½®ï¼Œ è€Œå¦‚æœæˆ‘ä»¬åªæ˜¯ç®€å•åœ°ç§»åŠ¨è§†çª—è€Œä¸æ”¹å˜è§†çª—çš„ä¸»è§’ä½ç½®çš„è¯ï¼Œ æˆ‘ä»¬åœ¨é¼ æ ‡ç§»åŠ¨çš„æ—¶å€™ï¼Œ å°±åªèƒ½çœ‹åˆ°è¾¹è¾¹è§’çš„è§†é¢‘å†…å®¹äº†ï¼Œ è¿™è¿åè®¾è®¡ç›´è§‰ã€‚</p>
<p>å› æ­¤æˆ‘ä»¬å¸Œæœ›åœ¨ç§»åŠ¨è§†çª—çš„åŒæ—¶ï¼Œ <strong>åŒæ—¶ç§»åŠ¨è§†é¢‘æœ¬èº«çš„ä½ç½®æ¥å¼¥è¡¥è§†çª—çš„åå·®</strong>ã€‚ç›¸åº”çš„jsä»£ç æ˜¯ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">offset = e.pageX - videoContainer.offsetLeft,</span><br><span class="line">offsetRight = videoContainer.offsetWidth - offset,</span><br><span class="line"></span><br><span class="line"><span class="comment">// for adaptive resizing:</span></span><br><span class="line">rightVideo.style.webkitTransform = <span class="string">"translate("</span> + offset / <span class="number">2</span> + <span class="string">"px, 0)"</span>;</span><br><span class="line">leftVideo.style.webkitTransform = <span class="string">"translate(-"</span> + offsetRight / <span class="number">2</span> + <span class="string">"px, 0)"</span>;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>ç”»å¤–éŸ³ï¼š ä½¿ç”¨<code>transform</code>æ¥æ”¹å˜DOMå…ƒç´ çš„ä½ç½®ç›¸æ¯”ç›´æ¥æ”¹å†™ä»–ä»¬çš„â€å®šä½å±æ€§â€œæœ‰å¾ˆå¤šå¥½å¤„ï¼Œ å…¶ä¸­æœ€çªå‡ºçš„å°±æ˜¯ï¼Œ transformä½¿ç”¨çš„æ˜¯GPUï¼Œ è€Œé‚£äº›<code>top\left</code>ç­‰çš„å®šä½å…ƒç´ ä½¿ç”¨çš„æ˜¯CPUï¼Œ æˆ‘ä»¬å¸Œæœ›å……åˆ†åˆ©ç”¨GPUå’Œå®ƒæä¾›çš„ç¡¬ä»¶åŠ é€Ÿï¼Œ åŒæ—¶<code>transform</code>ä¹Ÿä¸ä¼šè§¦å‘ç½‘é¡µçš„repaintï¼Œ ä»è€Œåœ¨æ¸²æŸ“ä¸Šæ›´åŠ çš„smoothå’Œfastã€‚</p>
</blockquote>
<p>é‚£è¿™ä¸ªåœ°æ–¹ï¼Œ<code>offset</code>å°±æ˜¯é¼ æ ‡åœ¨containeré‡Œé¢è·ç¦»å·¦è¾¹è¾¹æ¡†çš„è·ç¦»ï¼Œ é‚£ä¹ˆæˆ‘ä»¬åŒæ—¶æ ¹æ®è¿™ä¸ªè·ç¦»ï¼Œ è®©å·¦è¾¹çš„è§†é¢‘åœ¨è§†çª—ç§»åŠ¨æ—¶ï¼Œ <strong>å¾€ç›¸åçš„æ–¹å‘ä»¥ä¸€åŠçš„é€Ÿåº¦ç§»åŠ¨æ¥å¼¥è¡¥è§†çª—åå·®</strong>ã€‚ä½¿å¾—å¯ä»¥åœ¨è§†çª—ç§»åŠ¨çš„æ—¶å€™ï¼Œ å§‹ç»ˆä¿æŒè§†é¢‘æœ¬èº«æ‹æ‘„çš„ä¸»ä½“è§†è§’ä¹Ÿå¤„äºè¯¥è§†çª—çš„ä¸»ä½“è§†è§’! åŸç†å¯ä»¥å‚è€ƒè¿™ä¸ªå›¾ï¼š</p>
<div style="text-align:center" markdown="1"><br><img src="https://dl.dropboxusercontent.com/s/t99wbc4n3s8c4r7/screensplit3.0.gif?dl=0" alt="demo3.0"><br></div>

<p>é‚£ä¹ˆä¹Ÿå°±å¤§åŠŸå‘Šæˆå•¦!</p>
<blockquote>
<p>æ€»ç»“ï¼š HTML5å¯¹mediaæ–‡ä»¶æ›´å¤šåŠŸèƒ½ä¸Šçš„æ”¯æŒä½¿å¾—æˆ‘ä»¬å¯ä»¥æ›´å¥½çš„æ“ä½œmediaæ–‡ä»¶ï¼Œ åŒ…æ‹¬è§†é¢‘çš„å¼€å§‹æš‚åœï¼Œ ä»¥åŠå„ç§éŸ³é‡çš„è°ƒèŠ‚ï¼Œ è€Œè¿™ä¸ªç¨‹åºå®ä¾‹ï¼Œ æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„å¯¹ç›¸å…³APIçš„ä½¿ç”¨çš„ä¸€ä¸ªç¤ºèŒƒå’Œä¸€ä¸ªå°å°çš„åˆ›æ„ç»†èŠ‚ã€‚è¿™ä¸ªé¡¹ç›®ï¼Œ ä¹Ÿæ˜¯é¥­åå’Œæœ‹å‹èŠå¤©èŠå‡ºæ¥çš„å®ç°æ–¹æ¡ˆï¼Œä¹Ÿå¸Œæœ›çœ‹åˆ°æ›´å¤šçš„åˆ›æ„è„‘æ´å’Œç¾çš„è®¾è®¡!</p>
</blockquote>
<p>è¿™ä¸ªæ˜¯è¿™ä¸ªé¡¹ç›®çš„<a href="https://github.com/chocoluffy/screen-split-video" target="_blank" rel="external">github repo</a>, è¿™ä¸ªæ˜¯é¡¹ç›®çš„å±•ç¤º<a href="http://chocoluffy.com/screen-split-video/">demo</a> æ¬¢è¿è¯„è®ºå’Œstar~</p>
<h2 id="Q&amp;A">Q&amp;A</h2><p>åç»­çš„ä¸€äº›ç–‘é—®å’Œè§£ç­”ï¼š(åŸºäºV2exå’Œå¾®åšçš„è¯„è®º)</p>
<p><strong>è·Ÿ<a href="http://www.mi.com/hezi3s/" target="_blank" rel="external">è¿™ä¸ªé“¾æ¥</a>ä¸­é—´çš„ 2Kï¼4K å¯¹æ¯”å·®ä¸å¤šä¸€ä¸ªæ„æ€ï¼Ÿ</strong><br>A: å“ˆå“ˆåœ¨åˆ†å±æ•ˆæœä¸Šæ˜¯ç±»ä¼¼çš„ï¼Œ ä¸è¿‡é‚£ä¸ªå¯¹å›¾ç‰‡çš„å¤„ç†å°±ä¼šç®€å•å¾ˆå¤šå•¦ï¼Œ æ„Ÿè§‰å°±æ˜¯åœ¨æŸä¸ªä½ç½®ä»¥å·¦å åŠ ä¸€ä¸ªé«˜æ–¯æ¨¡ç³Šçš„æ»¤é•œå°±å¯ä»¥äº†~ ç›¸æ¯”ä¹‹ä¸‹ï¼Œ å¯¹è§†é¢‘çš„å¤„ç†è¿˜è¦è€ƒè™‘åˆ°è§†çª—å’Œè§†é¢‘æœ¬èº«çš„ç§»åŠ¨å‘¢! ä¸è¿‡è°¢è°¢åˆ†äº«å•¦!</p>
<p><strong>å¤šä¸ªå£°éŸ³æ€ä¹ˆåŠï¼Ÿä¸¤ä¸ªå£°éŸ³ä¼šé‡å å˜›ï¼Ÿ</strong><br>A: æˆ‘åšäº†éŸ³è½¨çš„æ¸å˜å¤„ç†ï¼Œ ä¹Ÿå°±æ˜¯æ ¹æ®è§†é¢‘çš„ç›¸å¯¹å¤§å°æ¥ç›¸å¯¹æ”¹å˜éŸ³é‡ï¼Œ ä¹Ÿå°±æ˜¯è¯´ï¼Œ å½“æŸä¸ªè§†é¢‘å ä¸»ä½“ä½ç½®çš„æ—¶å€™ï¼Œ å¦ä¸€ä¸ªè§†é¢‘çš„å£°éŸ³æ˜¯ä¼šæ¸å¼±çš„ï¼Œ è¿™æ ·å¯èƒ½ä½¿ç”¨ä½“éªŒæ›´å¥½å§! åœ¨åšæ–‡æœ€åæœ‰ demo çš„ç½‘å€ï¼Œ ä½ å¯ä»¥è¯•è¯•ï¼Œ æˆ‘ host åœ¨äº† github pages ä¸Šï¼Œ å¯¹äº†ï¼Œ è¿™ä¸ª demo åªåœ¨æ¡Œé¢ç«¯ work ï¼Œ åœ¨æ‰‹æœºç«¯è¿˜æ˜¯å®ç°ä¸äº†è¿™ä¸ªæ•ˆæœå‘¢ï¼Œ æœ‰ç‚¹å¯æƒœå•¦ï¼Œ å¦‚æœæœ‰æ”¹è¿›çš„å»ºè®®çš„è¯ï¼Œ å¸Œæœ›èƒ½æå‡ºæ¥å•¦~</p>
<p><strong>å¿«é€Ÿæ‹‰æ‰¯çš„æ—¶å€™è¾¹ç¼˜ç¼éš™æ¯”è¾ƒå¤§?</strong><br>A: å•Šå¯¹çš„ï¼æˆ‘è°ƒè¯•çš„æ—¶å€™ä¹Ÿå‘ç°æ˜¯æœ‰ï¼Œ åŸå› ä¹Ÿå¾ˆæ˜æ˜¾ï¼Œ æˆ‘åªå¯¹æ•´ä¸ª container ç»‘å®šäº† mousemove äº‹ä»¶ï¼Œ è€Œ html é¡µé¢å…¶ä»–å…ƒç´ æ˜¯ä¸ä¼šç›‘å¬ mousemove çš„ï¼Œ å› æ­¤å½“é¼ æ ‡å¿«é€Ÿç§»å‡º container çš„æ—¶å€™ï¼Œ å°±ä¼šå‘ç°è¾¹ç¼˜ç¼éš™è¾ƒå¤§äº†ï¼Œ æˆ‘ç°åœ¨å°±æ”¹æ”¹ code ï¼Œ åŠ ä¸ª condition ï¼Œ å¦‚æœé¼ æ ‡åœ¨ container ä¹‹å¤–ï¼Œ å°±æŠŠè§†é¢‘å®½åº¦è®¢æ­»ä¸ºå…¨å±~è°¢è°¢å•¦!</p>
]]></content>
    <summary type="html">
    <![CDATA[<p>å’Œæœ‹å‹èŠå¤©æ—¶æ— æ„é—´å‘ç°çš„ä¸€ä¸ªåˆ›æ„è§†é¢‘åˆ†å±çš„æƒ³æ³•ï¼Œ æ¥è‡ª<a href="http://www.beoplay.com/products/beoplayh7?_ga=1.127614725.969767543.1461077943#at-a-glance">beoplay</a>è¿™ä¸ªé«˜ç«¯è€³æœºçš„å®£ä¼ é¡µé¢ï¼Œ åœ¨è‡ªå·±å®ç°çš„è¿‡ç¨‹ä¸­ï¼Œ ä¹Ÿå‘ç°äº†è§†é¢‘è‡ªé€‚åº”å±…ä¸­çš„è¿™ä¸ªè®¾è®¡ç»†èŠ‚ï¼Œ è‡ªå·±ä¹Ÿæ£é¼“äº†å‡ºæ¥ï¼Œ è¯è¯´åœ¨ä¹‹åäº§å“çš„å®£ä¼ ä¸»é¡µè§†é¢‘å¯ä»¥ä¸€è¯•çš„ï¼Œ ä»ä¸¤ä¸ªè§†è§’å»è¯ é‡ŠåŒä¸€ä¸ªæ•…äº‹ï¼Œ å°±æ˜¯å¯¹è¿™æ ·æœ‰å¿ƒæ€çš„è®¾è®¡ç»†èŠ‚æ²¡æœ‰ä»»ä½•æŠµæŠ—åŠ›å‘¢ã€‚</p>]]>
    
    </summary>
    
      <category term="HTML5" scheme="http://chocoluffy.com/tags/HTML5/"/>
    
      <category term="javascript" scheme="http://chocoluffy.com/tags/javascript/"/>
    
      <category term="web design" scheme="http://chocoluffy.com/tags/web-design/"/>
    
      <category term="æŠ€æœ¯" scheme="http://chocoluffy.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[MEANå…¨æ ˆå¼€å‘[ç¬¬ä¸‰æœŸ-Mongoæ•°æ®åº“æ­å»ºREST API]]]></title>
    <link href="http://chocoluffy.com/2016/03/22/MEAN%E5%85%A8%E6%A0%88%E5%BC%80%E5%8F%91-%E7%AC%AC%E4%B8%89%E6%9C%9F-Mongo%E6%95%B0%E6%8D%AE%E5%BA%93%E6%90%AD%E5%BB%BAREST-API/"/>
    <id>http://chocoluffy.com/2016/03/22/MEANå…¨æ ˆå¼€å‘-ç¬¬ä¸‰æœŸ-Mongoæ•°æ®åº“æ­å»ºREST-API/</id>
    <published>2016-03-23T02:50:55.000Z</published>
    <updated>2016-03-23T02:55:29.000Z</updated>
    <content type="html"><![CDATA[<p>AirLoftçš„åŸå‹ã€‚ ç¬¬ä¸‰æœŸï¼Œ åŸºäºmongodbçš„mongooseæ¥æ­å»ºRESTful APIï¼Œ ä¸»è¦åŒ…æ‹¬äº†å…³äºå„ç±»æ¶‰åŠåˆ°å¯¹è±¡çš„GET, POST, PUT DELETEæ–¹æ³•çš„å®ç°ã€‚ åœ¨postmanä¸Šä¸æ–­çš„æ¨¡æ‹Ÿï¼Œ ä¹Ÿæœ€ç»ˆæ­å¥½ä¸€ä¸ªç¨³å®šä¸”flexibleçš„åç«¯APIå¤„ç†ï¼Œ å‰©ä¸‹çš„å°±æ˜¯å°†æ•°æ®åº“å’Œè¿™ä¸ªExpress Appçš„controllerç»“åˆï¼Œ å¹¶åœ¨å‰ç«¯ä¸Šçµæ´»çš„åº”ç”¨å•¦ï¼å¦‚æœè¯´å‰ç«¯å°±åƒä¸€ä¸ªäººçš„å¦†å®¹ï¼Œ é‚£ä¹ˆæ•°æ®åº“ä»¥åŠAPIå¤„ç†å°±æ˜¯ä»–çš„è°ˆåå’Œå†…æ¶µï¼Œ è¿™ä¸ªåº”ç”¨ä¹Ÿæœ‰äº†scalingçš„èƒ½åŠ›ï¼Œ åŠ æ²¹!</p>
<a id="more"></a>
<p><img src="http://ww1.sinaimg.cn/large/c5ee78b5jw1f26lk141v7j21kw0tjn61.jpg" alt="screenshot"></p>
<h2 id="å‰è¨€">å‰è¨€</h2><p>In MVC architecture, we need to have views without content or data. An common way to implement MVC architecture is to <strong>first build up a frontend clickable prototype, then extract the content from the view back to controller(concerned with data structure), then back to model.</strong> And now we are in the second step, we try to put variable in jade file in place of content, and put the content as variable into the controller.</p>
<h2 id="Mongoose">Mongoose</h2><p>First set up a connection URI like: <code>var dbURI = &#39;mongodb://localhost/airloft&#39;;</code>, username, password and port number is optional for localhost.</p>
<p>A stupid mistake!! Need to open the <code>mongod</code> before you tried to connect to it. One thing to notice is that Mongoose connection doesnâ€™t automatically close when the application restarts or stops. In order to do that whenever we restart the <code>nodemon</code>, we will need to listen for nodejs event. Nodemon uses <code>SIGUSR2</code>, application termination uses <code>SIGINT</code>, Heroku uses <code>SIGTERM</code>, like:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> graceShutDown = <span class="function"><span class="keyword">function</span>(<span class="params">msg, callback</span>)</span>&#123;</span><br><span class="line">	mongoose.connection.close(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">		<span class="built_in">console</span>.log(<span class="string">'Mongoose is closed through '</span> + msg);</span><br><span class="line">		callback();</span><br><span class="line">	&#125;);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">process.once(<span class="string">'SIGUSR2'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">	graceShutDown(<span class="string">'nodemon restart'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">		process.kill(process.pid, <span class="string">'SIGUSR2'</span>);</span><br><span class="line">	&#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>use <code>process.once</code> to overwrite the default <code>SIGUSR2</code> function, but then use <code>kill</code> to resend the <code>SIGUSR2</code> signal again, but this time we hook up a msg display functionality. Especially the place, we use <code>process.once()</code> instead of <code>process.on()</code> in the <code>SIGUSR2</code> case, since nodejs will listen for the same event, and if we use <code>on</code>, then it will forms a infinite loop. Note that <code>process.kill()</code> serves the functionality of sending the signal.</p>
<blockquote>
<p>Recap: Basically four step as discussed here, first define a connection URI string, then second setup the db connection; third monitor the mongoose connection events like <code>connected</code> and <code>disconnected</code>, and fourth monitor the node process event in order to close the db connection when we restart.</p>
</blockquote>
<p>From view to controller, finally to store in db is what we have gone through so far. It works pretty well, since the moment we move the data to the controller, we gradually solidy the data structure we want to use!!</p>
<p>Some technical names: â€œpathâ€ is like attribute names in relational database while â€œproperty objectâ€ is like the values but like other JS object, can be nested. Also, we can add data validation inside the schema, two advantages: </p>
<ul>
<li>save the roundtrip time to datebase</li>
<li>save the code inside the application for validation.</li>
</ul>
<p>Adding indexes can make database search more efficiently, jist like adding index to the files you want to search in your drawer. In order to add a GeoJSON path into your application, you only need to do this: <code>coords: {type: [Number], index: &#39;2dsphere&#39;}</code>; using <code>2dsphere</code> allows mongodb to be able to calculate the geolocation fast, thus <strong>it is helpful to build a location-based application.</strong></p>
<p>Subdocument is helpful when handling nested data structure, one thing to note, when creating attributes like <code>timestamp</code>, we use data type called <code>Date</code>, like:   </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> reviewSchema = <span class="keyword">new</span> mongoose.Schema(&#123;</span><br><span class="line">	rating: &#123;type: <span class="built_in">Number</span>, <span class="string">"default"</span>: <span class="number">0</span>, min: <span class="number">0</span>, max: <span class="number">5</span>&#125;,</span><br><span class="line">	author: <span class="built_in">String</span>,</span><br><span class="line">	createdOn: &#123;type: <span class="built_in">Date</span>, <span class="string">"default"</span>: <span class="built_in">Date</span>.now&#125;,</span><br><span class="line">	text: <span class="built_in">String</span>;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p><img src="http://ww3.sinaimg.cn/large/c5ee78b5gw1f1wrkszhcej218w0u6wib.jpg" alt="mongo"> è¿™å¼ å›¾è®²å¾—å¾ˆæ¸…æ¥šï¼Œ schemaæ˜¯application-sideçš„ä¸œè¥¿ï¼Œ æ¯ä¸€ä¸ªmodelæ˜¯çš„å®ä¾‹instanceé€šè¿‡schemaå¯ä»¥mapåˆ°databaseé‡Œé¢çš„æ¯ä¸€ä¸ªdocument, 1:1çš„å¯¹åº”å…³ç³»ã€‚</p>
<p>While typing in <code>mongod</code> will let you start the mongodatabase, using <code>mongo</code> will start tht shell and let you connect to the test database. And some useful commands in mongo go here:</p>
<ul>
<li><code>show dbs</code> to show all existing database so far.</li>
<li><code>use local</code> to switch to another database. And if that db doesnâ€™t exist yet, mongo will create it for us.</li>
<li><code>show collections</code></li>
<li><code>db.startup_log.find()</code> returns all the content from collection, uesful when we check whether the data has been saved.</li>
<li><code>db.missions.save({...})</code> will savev a new document into collection.</li>
<li><code>db.inventory.remove({})</code> will remove all documents in collection <code>inventory</code>.</li>
<li><code>db.missions.update()</code> will query a document and update its content. The first argument is query string, and second argument use <code>$push</code> to insert subdocuments.</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"> &gt; db.locations.update(&#123; </span><br><span class="line">   name: <span class="string">'Starcups'</span></span><br><span class="line">  &#125;, &#123; </span><br><span class="line">    $push: &#123;</span><br><span class="line">      reviews: &#123;</span><br><span class="line">        author: <span class="string">'Simon Holmes'</span>,</span><br><span class="line">        id: ObjectId(),</span><br><span class="line">        rating: <span class="number">5</span>,</span><br><span class="line">        timestamp: <span class="keyword">new</span> <span class="built_in">Date</span>(<span class="string">"Jul 16, 2013"</span>),</span><br><span class="line">        reviewText: <span class="string">"What a great place. I can't say enough good things about it."</span></span><br><span class="line">      &#125; </span><br><span class="line">      </span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>So far, we have insert a fake data document in our local computer, but in real life, <strong>we want database to be externally accessible.</strong> use <code>heroku addons:add mongolab</code> to register a db URI at mongolab as a heroku addons.<strong> And use <code>heroku addons:open mongolab</code> to go the website interface to check database details. </strong>In order to get the uri of the database, type <code>heroku config:get MONGOLAB_URI</code>. </p>
<blockquote>
<p>Note that in real practice, I have to fixed a typo bug from my previous data stored in mongolab, I have to first go to the mongo shell to <code>remove({})</code> and <code>insert({...})</code> again, then do the <code>mongodump</code> and <code>mongorestore</code> again to dump the data into the temp folder at <code>~/tmp</code> and push the data to live database. And make sure to press the â€œDelete all collectionâ€ button before we did <code>mongorestore</code> to avoid same key collision.</p>
</blockquote>
<p>After receive URI, we will first dump our localhost data into a folder in local computer, then restore the data to the live database. use <code>mkdir -p ~/tmp/mongodump</code> will create a folder to hold up the dumped data. Note that use <code>-p</code> option will create the non-existed folders on the path like â€œtmpâ€.</p>
<ul>
<li>use <code>mongodump -h localhost:27017 -d airloft -o ~/tmp/mongodump</code> to export airloft.missions data into BSON.</li>
<li>use <code>mongorestore -h &lt;host and port number&gt; -d &lt;live database name&gt; -u &lt;username(same as database name)&gt; -p &lt;password&gt; &lt;path to dump data folder&gt;</code> to push the data up to the mongolab live database.</li>
<li>Last step(testing), we can use <code>mongo hostname:port/database_name -u username -p password</code> to change the <code>mongo</code> to interact with an external database. Note that in the last two steps, database name is the same as username. Then, we can use commands introduced before to interact with live database. In summery, we have one source code and can be used to manipulate databases at two locations, one in local computer, a test database, and one in Heroku, a live database.</li>
</ul>
<p>Let application use right database. use <code>heroku config:set NODE_ENV=production</code> to set the environment variable <code>NODE_ENV</code> to be production for Heroku. <strong>Environment variable will affect the way the core process runs.</strong> When we tried to use <code>nodemon</code> to start application, one way to make sure what environemnt we are running in is to prepend a ENV variable before nodemon like <code>NODE_ENV=production nodemon</code>, and corresponds to this change, we also change the code in db.js(with a if-else block) to set the dbURI aligned with environment. In application, we can access to such variable by <code>process.env.NODE_ENV</code>, but since we post it in public repo, we donâ€™t want our credentials to be public. Instead, we use environment variables from Heroku configuration.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> dbURI = <span class="string">'mongodb://localhost/airloft'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(process.env.NODE_ENV === <span class="string">'production'</span>)&#123;</span><br><span class="line">	dbURI = process.env.MONGOLAB_URI;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">mongoose.connect(dbURI);</span><br></pre></td></tr></table></figure>
<h2 id="REST_APIs">REST APIs</h2><p>REST is an architecture style, itâ€™s stateless, meaning it will not recognize users or history. Having such program interface will allow us to talk to our database through HTTP and perform CRUD operations then send back a HTTP response. An way to construct URLs is to think about the collections in our database. In â€˜airloft.missionsâ€™ collection, we may want to allow operations like:</p>
<ul>
<li><code>/missions</code> to create an new mission.</li>
<li><code>/missions</code> to read all missions.</li>
<li><code>/missions/&lt;index&gt;</code> to read a specific mission.</li>
<li><code>/missions/&lt;index&gt;</code> to update a specific mission. And so on so forth.</li>
</ul>
<p>As we can see the urls are same for several operations, and we will use different request methods to tell the server what action to take.</p>
<ul>
<li><code>POST</code> to create new data in database(from submitting form).</li>
<li><code>GET</code> to read data.</li>
<li><code>PUT</code> to update a document.</li>
<li><code>DELETE</code> to delete a document.</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// missions</span></span><br><span class="line">router.get(<span class="string">'/missions'</span>, ctrlMissions.missionsListByDistance);</span><br><span class="line">router.post(<span class="string">'/missions'</span>, ctrlMissions.missionsCreate);</span><br><span class="line">router.get(<span class="string">'/missions/:missionid'</span>, ctrlMissions.missionsReadOne);</span><br><span class="line">router.put(<span class="string">'/missions/:missionid'</span>, ctrlMissions.missionsUpdateOne);</span><br><span class="line">router.delete(<span class="string">'/missions/:missionid'</span>, ctrlMissions.missionsDeleteOne);</span><br></pre></td></tr></table></figure>
<p>Then in the corresponding controller files, we define these functions and fill them with the simplest response to display when received such request.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> sendJsonRes = <span class="function"><span class="keyword">function</span>(<span class="params">res, status, content</span>)</span>&#123;</span><br><span class="line">	res.status(status);</span><br><span class="line">	res.json(content);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports.missionsListByDistance = <span class="function"><span class="keyword">function</span>(<span class="params">req, res</span>)</span>&#123;</span><br><span class="line">	sendJsonRes(res, <span class="number">200</span>, &#123;<span class="string">"status"</span>: <span class="string">"success"</span>&#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="â€œGETâ€_method_implementation">â€œGETâ€ method implementation</h2><p>Some useful queries in Mongoose:</p>
<ul>
<li><code>find</code> general search based on query object.</li>
<li><code>findById</code> look for specific ID.</li>
<li><code>findOne</code> get the first match document.</li>
<li><code>geoNear</code> find geo-closef query.</li>
<li><code>geoSearch</code> add query functionality to geoNear operation.</li>
</ul>
<p>After using queries, we use <code>exec</code> method execute the query and passes a callback function that will run when the operation is complete. The callback function should accept two parameters, an error object and the instance of found document.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> sendJsonRes = <span class="function"><span class="keyword">function</span>(<span class="params">res, status, content</span>)</span>&#123;</span><br><span class="line">	res.status(status);</span><br><span class="line">	res.json(content);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports.missionsReadOne = <span class="function"><span class="keyword">function</span>(<span class="params">req, res</span>)</span>&#123;</span><br><span class="line">	Missions</span><br><span class="line">		.findById(req.params.missionid)</span><br><span class="line">		.exec(<span class="function"><span class="keyword">function</span>(<span class="params">err, mission</span>)</span>&#123;</span><br><span class="line">			sendJsonRes(res, <span class="number">200</span>, mission);</span><br><span class="line">		&#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Then, we want to add error checking like this: note that we can also utilize <code>console.log</code> to print out some useful information about the data in terminal since we use <code>nodemon</code>. </p>
<p>In real practice, we may not always want to retrive a whole document from mongodb, we may only just need some specific data. Thus, we can limit the data being passed around to improve speed, using <code>select</code> to retriece only â€œnameâ€ and â€œreviewsâ€ entry from a document in collection. Like this:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports.reviewsReadOne = <span class="function"><span class="keyword">function</span>(<span class="params">req, res</span>)</span>&#123;</span><br><span class="line">	<span class="keyword">if</span>(req.params &amp;&amp; req.params.missionid &amp;&amp; req.params.reviewid)&#123;</span><br><span class="line">		Missions</span><br><span class="line">			.findById(req.params.missionid)</span><br><span class="line">			.select(<span class="string">'name reviews'</span>)</span><br><span class="line">			.exec(<span class="function"><span class="keyword">function</span>(<span class="params">err, mission</span>)</span>&#123;</span><br><span class="line">				<span class="keyword">if</span>(!mission)&#123;</span><br><span class="line">					sendJsonRes(res, <span class="number">404</span>, &#123;</span><br><span class="line">						<span class="string">"message"</span>: <span class="string">"missionid not found"</span></span><br><span class="line">					&#125;)</span><br><span class="line">					<span class="keyword">return</span>;</span><br><span class="line">				&#125;<span class="keyword">else</span> <span class="keyword">if</span>(err)&#123;</span><br><span class="line">					sendJsonRes(res, <span class="number">404</span>, err);</span><br><span class="line">					<span class="keyword">return</span>;</span><br><span class="line">				&#125;</span><br><span class="line">				<span class="keyword">var</span> response, review;</span><br><span class="line">				review = mission.reviews.id(req.params.reviewid);</span><br><span class="line">				<span class="keyword">if</span>(!review)&#123;</span><br><span class="line">					sendJsonRes(res, <span class="number">404</span>, &#123;</span><br><span class="line">						<span class="string">"message"</span>: <span class="string">"reviewid not found!"</span></span><br><span class="line">					&#125;)</span><br><span class="line">					<span class="keyword">return</span>;</span><br><span class="line">				&#125;</span><br><span class="line">				response = &#123;</span><br><span class="line">					mission: &#123;</span><br><span class="line">						name: mission.name,</span><br><span class="line">						id: req.params.missionid</span><br><span class="line">					&#125;,</span><br><span class="line">					reviews: review</span><br><span class="line">				&#125;;</span><br><span class="line">				sendJsonRes(res, <span class="number">200</span>, response);</span><br><span class="line">			&#125;);</span><br><span class="line">	&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">		sendJsonRes(res, <span class="number">404</span>, &#123;</span><br><span class="line">			<span class="string">"message"</span>: <span class="string">"No missionid or reviewid in request"</span></span><br><span class="line">		&#125;)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Apart from the error checking in the above code, we can use <code>id</code> to query subdocument the <code>_id</code> entry. <strong>note that in the raw data, I mistakenly put the entry name to be <code>id</code> instead of <code>_id</code>, which causes me to re-insert the data again to let the <code>id()</code> work for subdocument.</strong></p>
<p>These above example codes shows us how to simulate â€œGETâ€ request for mission and reviews in â€œmissionsâ€ collection in live mongolab database. When it comes to geo-query, we need to query the longtitude and latitude in <code>req.query</code> with some urls like this: <code>api/missions?lng=-12.34343434&amp;lat=51.22424224</code>.</p>
<p>Besides, the way writing the js code is quite important using closure!! I use an example that will be reused in later geo-distance calculation to illustrate how to <strong>only expost functions for later use with closure to wrap the inner variables from outer collisions.</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> theEarth = (<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">var</span> earthRadius = <span class="number">6371</span>;</span><br><span class="line">  <span class="keyword">var</span> getDistanceFromRads = <span class="function"><span class="keyword">function</span>(<span class="params">rads</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">parseFloat</span>(earthRadius * rads);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">var</span> getRadsFromDistance = <span class="function"><span class="keyword">function</span>(<span class="params">distance</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">parseFloat</span>(distance/getRadsFromDistance);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    getDistanceFromRads: getDistanceFromRads,</span><br><span class="line">    getRadsFromDistance: getRadsFromDistance</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)()</span><br></pre></td></tr></table></figure>
<p>Then the complete geo searching functions are:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// for main page listing by distance.</span></span><br><span class="line"><span class="keyword">var</span> resToList = <span class="function"><span class="keyword">function</span>(<span class="params">results</span>)</span>&#123;</span><br><span class="line">	<span class="keyword">var</span> lst = [];</span><br><span class="line">	results.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">doc</span>)</span>&#123;</span><br><span class="line">		lst.push(&#123;</span><br><span class="line">				distance: theEarth.getDistanceFromRads(doc.dis),</span><br><span class="line">				name: doc.obj.name,</span><br><span class="line">				author: doc.obj.author,</span><br><span class="line">				rating: doc.obj.rating,</span><br><span class="line">				tags: doc.obj.tag,</span><br><span class="line">				_id: doc.obj._id</span><br><span class="line">		&#125;)</span><br><span class="line">	&#125;)</span><br><span class="line">	<span class="keyword">return</span> lst;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports.missionsListByDistance = <span class="function"><span class="keyword">function</span>(<span class="params">req, res</span>)</span>&#123;</span><br><span class="line">	<span class="keyword">if</span>(req.query.lng &amp;&amp; req.query.lat)&#123;</span><br><span class="line">		<span class="keyword">var</span> lng = <span class="built_in">parseFloat</span>(req.query.lng);</span><br><span class="line">		<span class="keyword">var</span> lat = <span class="built_in">parseFloat</span>(req.query.lat);</span><br><span class="line">		<span class="keyword">var</span> point = &#123;</span><br><span class="line">			type: <span class="string">"Point"</span>,</span><br><span class="line">			coordinates: [lng, lat]</span><br><span class="line">		&#125;;</span><br><span class="line">		<span class="keyword">var</span> geoOptions = &#123;</span><br><span class="line">			spherical: <span class="literal">true</span>,</span><br><span class="line">			maxDistance: theEarth.getRadsFromDistance(<span class="built_in">parseInt</span>(req.query.maxdistance||<span class="number">2000</span>)),</span><br><span class="line">			num: <span class="number">10</span>,</span><br><span class="line">		&#125;;</span><br><span class="line">		<span class="comment">// console.log(geoOptions.maxDistance);</span></span><br><span class="line">		Missions.geoNear(point, geoOptions, <span class="function"><span class="keyword">function</span>(<span class="params">err, results, stats</span>)</span>&#123;</span><br><span class="line">			<span class="keyword">if</span>(err)&#123;</span><br><span class="line">				sendJsonRes(res, <span class="number">404</span>, err);</span><br><span class="line">				<span class="keyword">return</span> ;</span><br><span class="line">			&#125;</span><br><span class="line">			sendJsonRes(res, <span class="number">200</span>, resToList(results));</span><br><span class="line">		&#125;);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span> &#123;</span><br><span class="line">		sendJsonRes(res, <span class="number">404</span>, &#123;</span><br><span class="line">			<span class="string">"message"</span>: <span class="string">"Found no longtitue or lattitude in query string."</span></span><br><span class="line">		&#125;);</span><br><span class="line">		<span class="keyword">return</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>So far, we complete all three â€œGETâ€ methods for this website, namely, [1]ListByDistance for the main page â€œ/api/missionsâ€; [2]get a single mission information for each mission document in db â€œ/api/missions/<_id>â€œ; [3]get a single review information for reviews from each mission document as subdocument â€œ/api/missions/<_id>/reviews/<_id>â€œ. And next, we will look at other methods like â€œPOSTâ€, â€œPUTâ€ and â€œDELETEâ€.</_id></_id></_id></p>
</blockquote>
<h2 id="â€œPOSTâ€_method_implementation">â€œPOSTâ€ method implementation</h2><p>In this project, since we only involve missions and reviews, we need to implement new mission post and new review post from form data, which is stored at <code>req.body.&lt;attr&gt;</code>.<br>The way we create an document is using <code>create()</code> directly :</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports.missionsCreate = <span class="function"><span class="keyword">function</span>(<span class="params">req, res</span>)</span>&#123;</span><br><span class="line">	Missions.create(&#123;</span><br><span class="line">		name: req.body.name,</span><br><span class="line">		rating: req.body.rating,</span><br><span class="line">		tag: req.body.tags.split(<span class="string">","</span>),</span><br><span class="line">		author: req.body.author,</span><br><span class="line">		coords: [<span class="built_in">parseFloat</span>(req.body.lng), <span class="built_in">parseFloat</span>(req.body.lat)],</span><br><span class="line">		timepanel: &#123;</span><br><span class="line">			title: req.body.timetitle,</span><br><span class="line">			timeslots: req.body.timeslots.split(<span class="string">","</span>)</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;, <span class="function"><span class="keyword">function</span>(<span class="params">err, mission</span>)</span>&#123;</span><br><span class="line">		<span class="keyword">if</span>(err)&#123;</span><br><span class="line">			sendJsonRes(res, <span class="number">404</span>, err);</span><br><span class="line">		&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">			sendJsonRes(res, <span class="number">201</span>, mission);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>For subdocuments or facing with a list instead of an array, we probably just retrieve that list and <code>push</code> a new item into the list. Then we just need to <code>&lt;instance&gt;.save()</code> to save the item like this:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> addReiview = <span class="function"><span class="keyword">function</span>(<span class="params">req, res, mission</span>)</span>&#123;</span><br><span class="line">	mission.reviews.push(&#123;</span><br><span class="line">		rating: req.body.rating,</span><br><span class="line">		author: req.body.author,</span><br><span class="line">		text: req.body.text</span><br><span class="line">	&#125;)</span><br><span class="line">	mission.save(<span class="function"><span class="keyword">function</span>(<span class="params">err, mission</span>)</span>&#123;</span><br><span class="line">		<span class="keyword">var</span> thisReview;</span><br><span class="line">		<span class="keyword">if</span>(err)&#123;</span><br><span class="line">			sendJsonRes(res, <span class="number">404</span>, err);</span><br><span class="line">		&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">			updateAveRating(mission._id);</span><br><span class="line">			thisReview = mission.reviews[mission.reviews.length - <span class="number">1</span>];</span><br><span class="line">			sendJsonRes(res, <span class="number">201</span>, thisReview);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="â€œPUTâ€_method_implementation">â€œPUTâ€ method implementation</h2><p>â€œPUTâ€ method is similar to â€œPOSTâ€ in a way that they both use form data stored in <code>req.body</code>, while one is create from nothing and add to the database, the other is to find an existing one and update part of the information. </p>
<ul>
<li>One hack I thought about is to use <code>Object.keys(obj)</code> to obtain the keys from a js object, then using <code>$set</code> in <code>mongo.update()</code> to only update the value in body? <strong>Ideas:</strong> this idea only works when all field are requiring same manipulation from body data. To be more specifically, some data are needed to be processed to feed for later use, such as we add <code>.split(&quot;,&quot;);</code> for tags data, and some fields like â€œcoordsâ€ is an array. Thus, if we want to apply more operations on some data, we cannot just treat them in the same way in a for loop</li>
<li>Or, utilize the the way mongoose model treat model parameters, we can do <code>var newReview = new Review(req.body)</code> to create an instance of â€œReviewâ€ model, then use this to replace the old one?</li>
</ul>
<blockquote>
<p>One important thing to notice is that when we save, we save <strong>parent document!</strong> In our case, we did <code>mission.save(function(err, mission))</code> instead of <code>review.save(...)</code>!</p>
</blockquote>
<h2 id="â€œDELETEâ€_method_implementation">â€œDELETEâ€ method implementation</h2><p>â€œDELETEâ€ method is easier, we only need to find that document by â€œmissionidâ€, then do <code>Missions.remove(function(err, mission))</code>. For the subdocument, we simply find that subdocument and call remove at the end. The prototype is like:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// A working prototype without error checking.</span></span><br><span class="line"><span class="built_in">module</span>.exports.reviewsDeleteOne = <span class="function"><span class="keyword">function</span>(<span class="params">req, res</span>)</span>&#123;</span><br><span class="line">	Missions</span><br><span class="line">		.findById(req.params.missionid)</span><br><span class="line">		.select(<span class="string">"reviews"</span>)</span><br><span class="line">		.exec(<span class="function"><span class="keyword">function</span>(<span class="params">err, mission</span>)</span>&#123;</span><br><span class="line">			<span class="keyword">if</span>(err)&#123;</span><br><span class="line">				sendJsonRes(res, <span class="number">404</span>, &#123;</span><br><span class="line">					<span class="string">"message"</span>: <span class="string">"Found no match"</span></span><br><span class="line">				&#125;)</span><br><span class="line">			&#125;</span><br><span class="line">			mission.reviews.id(req.params.reviewid).remove();</span><br><span class="line">			mission.save(<span class="function"><span class="keyword">function</span>(<span class="params">err, mission</span>)</span>&#123; <span class="comment">// save parent document.</span></span><br><span class="line">				updateAveRating(mission._id);</span><br><span class="line">				sendJsonRes(res, <span class="number">204</span>, <span class="literal">null</span>);</span><br><span class="line">			&#125;)</span><br><span class="line">		&#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="Summery">Summery</h2><ul>
<li><p>How to insert an common model instance into mongodb? I mean, since we canâ€™t generate the â€œ_idâ€ by ourselves, then how comes we insert such object into <code>mongo</code>? <strong>Answer:</strong> we need to know the difference between <code>db.missions.save</code> and <code>db.missions.insert</code>, using <code>save</code>, we can simple provide an model instance according to the model schma, while using using <code>insert</code>, we have to write the object exacty the same as the final document! </p>
</li>
<li><p>â€œGETâ€ method implementation? <strong>Answer:</strong> using mongodb query like <code>findById</code> and others to get the document from db, and sometimes we need <code>id</code> to retrieve info from subdocument. Besides, <code>geoNear</code> is handy in mongodb to get displaying documents by distance.</p>
</li>
<li><p>Some important places for error checking: </p>
<ul>
<li>If argument is in the <code>req.body</code> or <code>req.query</code> or <code>req.params</code>. <strong>if not, return a message in <code>res</code> saying founding no argument in coming request.</strong></li>
<li>Then given an ID(probably), we may want to search that document in database using <code>getById()</code>, and the callback function contains an <code>error</code> object and a instance object, where the returning instance object indicates whether or not searching database is succeeded or not. <strong>If not, return a message saying object not found in database.</strong></li>
<li>When we tried to update of create a new document, we may usually use <code>save</code> and <code>create</code>, the callback function contains an error object either, <strong>it indicates whether or not such instance can be created or updated correctly, if the error message appears, it usually dues to the fact that some fields violates the validation rules specified in database schema.</strong></li>
</ul>
</li>
</ul>
<h2 id="Tools">Tools</h2><ul>
<li>Unless you fancy adding hundreds of script tags to your pages, you need a build tool to bundle your dependencies. You also need something to <strong>allow NPM packages to work in browsers</strong>. This is where Webpack comes in.</li>
<li>Add a .gitattributes file and push it to github to overwrite the project type calculated by github, adding <code>*.css linguist-language=Javascript</code> into the file to let a specific file being overwritten.</li>
</ul>
]]></content>
    <summary type="html">
    <![CDATA[<p>AirLoftçš„åŸå‹ã€‚ ç¬¬ä¸‰æœŸï¼Œ åŸºäºmongodbçš„mongooseæ¥æ­å»ºRESTful APIï¼Œ ä¸»è¦åŒ…æ‹¬äº†å…³äºå„ç±»æ¶‰åŠåˆ°å¯¹è±¡çš„GET, POST, PUT DELETEæ–¹æ³•çš„å®ç°ã€‚ åœ¨postmanä¸Šä¸æ–­çš„æ¨¡æ‹Ÿï¼Œ ä¹Ÿæœ€ç»ˆæ­å¥½ä¸€ä¸ªç¨³å®šä¸”flexibleçš„åç«¯APIå¤„ç†ï¼Œ å‰©ä¸‹çš„å°±æ˜¯å°†æ•°æ®åº“å’Œè¿™ä¸ªExpress Appçš„controllerç»“åˆï¼Œ å¹¶åœ¨å‰ç«¯ä¸Šçµæ´»çš„åº”ç”¨å•¦ï¼å¦‚æœè¯´å‰ç«¯å°±åƒä¸€ä¸ªäººçš„å¦†å®¹ï¼Œ é‚£ä¹ˆæ•°æ®åº“ä»¥åŠAPIå¤„ç†å°±æ˜¯ä»–çš„è°ˆåå’Œå†…æ¶µï¼Œ è¿™ä¸ªåº”ç”¨ä¹Ÿæœ‰äº†scalingçš„èƒ½åŠ›ï¼Œ åŠ æ²¹!</p>]]>
    
    </summary>
    
      <category term="javascript" scheme="http://chocoluffy.com/tags/javascript/"/>
    
      <category term="nodejs" scheme="http://chocoluffy.com/tags/nodejs/"/>
    
      <category term="web design" scheme="http://chocoluffy.com/tags/web-design/"/>
    
      <category term="æŠ€æœ¯" scheme="http://chocoluffy.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[MEANå…¨æ ˆå¼€å‘[ç¬¬äºŒæœŸ-å‰ç«¯å®æˆ˜æ‰‹è®°]]]></title>
    <link href="http://chocoluffy.com/2016/03/11/MEAN%E5%85%A8%E6%A0%88%E5%BC%80%E5%8F%91-%E7%AC%AC%E4%BA%8C%E6%9C%9F-%E5%89%8D%E7%AB%AF%E5%AE%9E%E6%88%98%E6%89%8B%E8%AE%B0/"/>
    <id>http://chocoluffy.com/2016/03/11/MEANå…¨æ ˆå¼€å‘-ç¬¬äºŒæœŸ-å‰ç«¯å®æˆ˜æ‰‹è®°/</id>
    <published>2016-03-11T20:10:55.000Z</published>
    <updated>2016-03-23T03:00:41.000Z</updated>
    <content type="html"><![CDATA[<p>AirLoftçš„åŸå‹ã€‚ ç¬¬äºŒæœŸï¼Œ åŸºäºBootstrapçš„æ‰å¹³åŒ–è®¾è®¡ï¼Œ æŠŠæ‰€æœ‰æ¶‰åŠçš„é¡µé¢çš„clickable prototypeåšå‡ºæ¥ï¼Œ å†è¿ç§»åˆ°express applicationæˆ–è€…Angular SPAä¸Šï¼Œ è™½ç„¶åªæ˜¯å‰ç«¯çš„prototypeï¼Œ ä½†æ˜¯åšå¥½ä¸€äº›npm scriptsçš„é…ç½®ä¼šè®©å‰ç«¯å¼€å‘ç‰¹åˆ«çš„é«˜æ•ˆå’Œèˆ’æœï¼Œ ä¹Ÿç®—æ˜¯åœ¨å…¥é—¨äº†å„ç§ç‚«æŠ€çš„å‰ç«¯å±•ç¤ºåï¼Œ é€æ­¥åˆ°ä¸€ä¸ªfull-fledged websiteçš„è¿‡æ¸¡ã€‚</p>
<a id="more"></a>
<p><img src="http://ww4.sinaimg.cn/large/c5ee78b5gw1f1tkjoatboj21kw0r7aic.jpg" alt="project screenshot"></p>
<h2 id="Difference_about_MEAN_stack">Difference about MEAN stack</h2><p>Traditional web server like Apache is multi-thread, <strong><em>the key idea about multi-thread is visitors use seperate resources.</em></strong>Like a bank system, it works perfectly fine when the population size is small, while when the size grows more than the resources, you have to queue for resources. (ç„¶è€Œå½“ä½ è®¿é—®ä¸€ä¸ªç½‘ç«™çš„æ—¶å€™ï¼Œ ä½ æ˜¯ä¸ä¼šç­‰çš„ï¼Œ ä½ çœ‹é‚£ä¸ªç½‘ç«™å“åº”å¾ˆæ…¢ï¼Œ ä½ å°±é€€å‡ºäº†). In nodejs, it is single-threaded. æ‰€ä»¥ä½ çŸ¥é“ç°åœ¨å¾ˆå¤šå¤§å‹çš„ä¼ä¸šæ¶æ„ï¼Œ å°¤å…¶æ˜¯å›½å†…çš„ï¼Œ åœ¨å‰å‡ å¹´è¿˜ç‰¹åˆ«ä¸¥é‡ï¼Œ ä¸€åˆ°è¿‡å¹´è¿‡èŠ‚æµé‡ç‰¹åˆ«å¤§çš„æ—¶å€™ï¼Œ ä½ çš„ç½‘ç«™å°±ä¼šå®•æœºï¼Œ å› ä¸ºå¤ªå¤šäººè®¿é—®äº†ï¼Œ ä½ å¿…é¡»ç­‰ã€‚æ‰€ä»¥è§£å†³åŠæ³•æ˜¯ä»€ä¹ˆï¼Œ é€šå¸¸ä¼ä¸šå°±å›å»ä¹°æ›´å¤šçš„æœåŠ¡å™¨ï¼Œ æˆ–è€…æ›´æ–°è¿‡å¤§çš„å†…å­˜ï¼Œ æ¥æ‰›è¿‡æµé‡æœ€å¤§çš„æ—¶å€™ï¼Œ å¯æ˜¯æœ‰ä¸€ä¸ªé—®é¢˜å°±æ˜¯ï¼Œ åœ¨æµé‡æ²¡æœ‰é‚£ä¹ˆå¤§çš„ç»å¤§å¤šæ•°æ—¶å€™ï¼Œ ä½ çš„èµ„æºè¢«æµªè´¹äº†! </p>
<p>åœ¨å•çº¿ç¨‹çš„nodejsé‡Œé¢ï¼Œ æœ‰ä¸€ä¸ªéå¸¸é‡è¦çš„ç‰¹æ€§å°±æ˜¯å¿…é¡»æ˜¯éé˜»å¡ï¼Œ å› ä¸ºé»˜è®¤çš„æƒ…å†µå°±æ˜¯å¤§å®¶éƒ½ä¼šå»åŒä¸€ä¸ªcenter officeï¼Œ åŒä¸€ä¸ªçº¿ç¨‹ï¼Œ ç„¶è€Œæˆ‘ä»¬ä¸å¸Œæœ›å‰ä¸€ä¸ªçš„request, æ¯”å¦‚request static files or database, å½±å“åˆ°ä¸‹ä¸€ä¸ªç”¨æˆ·ï¼Œ æ‰€ä»¥nodejsé‡Œé¢çš„å‡½æ•°éƒ½æ˜¯å¼‚æ­¥çš„ã€‚</p>
<p>Some useful helper libraries like Underscorejs, Mochajs, and Colors(which can add color to the nodejs console log).</p>
<p>Check out the articles in Evernore, saying that why we donâ€™t want to use the default way of using directory to organize our view static files in Expressjs, but instead use a function-focused way to group the files.</p>
<p>Mongodbd stores documents as BSON(binary format of JSON). Mongoose like the shell for mongodb, enable us to add data validation on database(schema)</p>
<p>Traditional way of doing web, is let the server do all the data processing and application logic, then passes HTML out to the browser. While angularjs allows us to pull some data and logic to the browser.(so server only pass the data from database). Since we have V8 in Chrome.</p>
<p>The difference of Jquery and AngularJS is that Jquery added to the page to provide interactivity, it assume that you have a complete DOM, While angularjs comes earilier to help you form the HTML.</p>
<p>å…³äºSPA(single page application)çš„ç¼ºç‚¹ï¼Œ å°¤å…¶åœ¨SEOä¸Šï¼Œ search engine only fetches the page layout and it wonâ€™t run any javascript, thus those data and contents generated by javascript will be ignored by search engine. <strong><em>the key feature of SPA is that it takes a longer load for first time login, and it can reduce the pressure on server side, since it handle the logic mostly on browser. </em></strong> For example, for a blog website, the blog post entry is for people to read and is expected to show up quitely quickly, is not suitable for SPA, while the admin page can be done in SPA. <strong><em>Thus, for the blog entry, we want the original and traditional method(passing the HTML pages), utilizing Express!</em></strong></p>
<p>Remeber, Angularjs is not only for SPA, it can also provide rich data interactivity to an static pages.</p>
<p><strong><em>API-rich means decouple the reliance!!! You donâ€™t contact directly to the database, but instead use API and if API is satisfied, components can be substituted by any other components.</em></strong></p>
<p>åŸºç¡€çš„æ¶æ„æ˜¯ï¼š database\rest API\applicationåœ¨åŒä¸€ä¸ªserverä¸Šï¼Œ ä½†ä¹‹åæˆ‘ä»¬é€šå¸¸ä¼šæŠŠdatabaseåˆ†å¼€åˆ°å¦å¤–ä¸€ä¸ªserverä¸Šï¼ˆavoid fighting for the same resourcesï¼‰.</p>
<h2 id="Express">Express</h2><p>When using express, we can configure it to have some options, like which html engine to use, which css preprocessor, and whether to add the support for session;</p>
<p>We can see in <code>app.js</code> that there are a lot of <code>app.use()</code>, they are middlewares, and the request coming from the application will go through each of them. For example, use <code>app.use(cookieParser());</code> will parse out the cookie information from the request and prepare to be more friendly in controller code. Server side js(app.js) if modified, should let the server stop and restart, but the client-side js or html or css, can just use browser refresh to update on-the-fly. <strong><em>To fix that, we use <code>nodemon</code>, a module that allows auto-reloading when server-side javascript is changed. I have install it globally, so we just need to type <code>nodemon</code> inside the project folder.</em></strong></p>
<p><code>block content</code> in jade, is the inheritance machanism of HTML layout, we can define some block + <variable name=""> in the parent template, then in each child layout that extends it, the child template will redefine such block, just like in c++\java, an abstract class.</variable></p>
<p>We decided to implement MVC inside the Express, like what we did in rails, we route the corresponding URL to controllers(which we created in a new folder).</p>
<p>Bootstrap is not being processed by node engine, thus we put it under <code>public</code> folder. Inside the <code>layout.jade</code> file, we will include the bootstrap theme and js files we want to use in our project:</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">doctype html</span><br><span class="line">html</span><br><span class="line">  head</span><br><span class="line">    # <span class="operator"><span class="keyword">set</span> viewport metadata <span class="keyword">for</span> better display <span class="keyword">in</span> mobile device.</span><br><span class="line">  	meta(<span class="keyword">name</span>=<span class="string">'viewport'</span>, <span class="keyword">content</span>=<span class="string">'width=device-width, initial-scale=1.0'</span>)</span><br><span class="line">    title= title</span><br><span class="line">    # <span class="keyword">before</span> the <span class="keyword">style</span>.css <span class="keyword">file</span>, so that we can write <span class="keyword">style</span> <span class="keyword">to</span> override <span class="keyword">or</span> polish the <span class="keyword">style</span> <span class="keyword">in</span> bootstrap theme.</span><br><span class="line">    <span class="keyword">link</span>(rel=<span class="string">'stylesheet'</span>, href=<span class="string">'/bootstrap/css/cerulean.bootstrap.css'</span>)</span><br><span class="line">    <span class="keyword">link</span>(rel=<span class="string">'stylesheet'</span>, href=<span class="string">'/stylesheets/style.css'</span>)</span><br><span class="line">  <span class="keyword">body</span></span><br><span class="line">    <span class="keyword">block</span> <span class="keyword">content</span></span></span><br></pre></td></tr></table></figure>
<p>After deciding on the urls we want to use, we will add corresponding controller into the index.js inside the routes folder. since we mainly have two function groups, we use <code>ctrlLocations</code> and <code>ctrlOthers</code> to represent these two main controller files.</p>
<h2 id="Jade_in_Express">Jade in Express</h2><p>Letâ€™s start to move the content in view into controller. When we look at the clickable prototype, especially its Jade view pages, we define Javascript object in hash in controller to store the data. <strong><em>We design data structure to hold data for views.</em></strong> Then in view folder, we can do: [1] use <code>=</code> to use that objectâ€™s value, or use <code>#{}</code> to <strong><em>insert</em></strong> the value into a string.</p>
<figure class="highlight dos"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">h1= <span class="built_in">title</span> </span><br><span class="line">p &amp;nbsp; #&#123;<span class="built_in">title</span>&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>Pay attention to the format when using the programming syntax or inline coding. </p>
</blockquote>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--æ³¨æ„åœ¨ç”¨synaxçš„æ—¶å€™è¦å¤šç©º<span class="number">4</span>ä¸ªspace--&gt;</span><br><span class="line">.row</span><br><span class="line">    .<span class="built_in">col</span>-xs-<span class="number">12</span>.<span class="built_in">col</span>-<span class="keyword">sm</span>-<span class="number">8</span></span><br><span class="line">        .row.<span class="keyword">list</span>-group</span><br><span class="line">            each mission in missions</span><br><span class="line">                .<span class="built_in">col</span>-xs-<span class="number">12</span>.<span class="keyword">list</span>-group-item</span><br><span class="line">                    h4</span><br><span class="line">                        <span class="keyword">a</span>(href=<span class="string">'/mission'</span>)= mission.name</span><br><span class="line">                        small &amp;nbsp;</span><br><span class="line">                            - <span class="keyword">for</span> (var <span class="keyword">i</span>=<span class="number">0</span>; <span class="keyword">i</span>&lt;mission.rating; <span class="keyword">i</span>++)</span><br><span class="line">                                span.glyphicon.glyphicon-<span class="keyword">star</span></span><br><span class="line">                            - <span class="keyword">for</span> (var <span class="keyword">i</span>=mission.rating; <span class="keyword">i</span>&lt;<span class="number">5</span>; <span class="keyword">i</span>++)</span><br><span class="line">                                span.glyphicon.glyphicon-<span class="keyword">star</span>-<span class="built_in">empty</span></span><br><span class="line">                        span.badge.pull-<span class="keyword">right</span>.badge-default <span class="number">100</span><span class="keyword">m</span></span><br><span class="line">                    <span class="keyword">p</span>.author= mission.author</span><br><span class="line">                    <span class="keyword">p</span></span><br><span class="line">                        each <span class="keyword">tag</span> in mission.<span class="keyword">tags</span></span><br><span class="line">                            span.label.label-warning= <span class="keyword">tag</span></span><br><span class="line">                            | &amp;nbsp;</span><br></pre></td></tr></table></figure>
<p>In Jade, we want to use <strong>mixin</strong> as functions inside a jada file and use <code>include</code> to make it reuseable for other file. Like this, we usually put mixin at between <code>extends layout</code> and <code>block content</code>. </p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">mixin outputRating(rating)</span><br><span class="line">  - <span class="keyword">for</span> (var <span class="built_in">i</span>=<span class="number">0</span>; <span class="built_in">i</span>&lt;mission.rating; <span class="built_in">i</span>++)</span><br><span class="line">    span.glyphicon.glyphicon-star</span><br><span class="line">  - <span class="keyword">for</span> (var <span class="built_in">i</span>=mission.rating; <span class="built_in">i</span>&lt;<span class="number">5</span>; <span class="built_in">i</span>++)</span><br><span class="line">    span.glyphicon.glyphicon-star-empty</span><br></pre></td></tr></table></figure>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--same place, but using `include`--&gt;</span></span><br><span class="line">include _includes/sharedHTMLfunctions</span><br></pre></td></tr></table></figure>
<p>Here is an example of showing how to render sting to HTML when the textarea has newline character:</p>
<figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">extends layout</span><br><span class="line"></span><br><span class="line">block content</span><br><span class="line">	<span class="comment">#banner.page-header</span></span><br><span class="line">		.row</span><br><span class="line">			.col-sm-<span class="number">12</span></span><br><span class="line">				h1= title</span><br><span class="line">	.row</span><br><span class="line">		.col-sm-<span class="number">12</span></span><br><span class="line">			p !&#123;(<span class="keyword">text</span>).<span class="built_in">replace</span>(/\n/g, <span class="string">'&lt;br/&gt;'</span>)&#125;</span><br></pre></td></tr></table></figure>
<p>For now, the data is stored in controller, while in practice, we need database and data model to store the data. But here we are in the right track of fast development, namely, from developing a clickable prototype, to move hard-cored data into controller as variables, and finally put them into database.</p>
<h2 id="Heroku">Heroku</h2><p>Add the <code>engines</code> part at projectâ€™s package.json, add the node and npm version on it.</p>
<p>Add a Procfile, used to declare the process type used by application. we put <code>web: npm start</code> inside the Procfile so that it tells Heroku to tun such web process.</p>
<p>Use forego to test before push it into production environment. <code>brew install forego</code> to install forego, then do <code>forego start</code> and go to <code>localhost:5000</code> to see the result.</p>
<p>Then if everything goes fine, from <strong><em>a) engines part b) Profile c) tested under <code>forego</code></em></strong>, then we do <code>heroku create</code> and <code>git push heroku master</code> to push the local git repo to the remote heroku container. Then <code>heroku open</code> to open that url.</p>
<p>Terminology: <strong>Dynos</strong> are isolated, virtualized Unix containers, that provide the environment required to run an application. Generally, if you deploy an application for the first time, Heroku will run 1 web dyno automatically. In other words, it will boot a dyno, load it with your slug, and execute the command youâ€™ve associated with the web process type in your Procfile. <strong>So, it mainly is about scaling, if we have more dynos, we will have more resources. And we got that 1 dyno for free.</strong> we can type in <code>heroku ps</code> to check which dyno is running which process and for this command, <code>heroku ps:scale web=3 queue=2</code>, it means that we can start 5 dynos, 3 for the web and 2 for the queue process types.</p>
<h2 id="Bootstrap">Bootstrap</h2><p>in Bootstrap, there is always 12 columns, and you can define how many columns you want to use in device, <code>col-sm-6</code> means that element will take up 6 columns on device of size sm <strong>and larger.</strong> </p>
<ul>
<li>xs: phone</li>
<li>sm: tablets</li>
<li>md: laptop</li>
<li>lg: external monitors</li>
</ul>
<p><code>&lt;div class=&quot;col-xs-12 col-sm-6&quot;&gt;&lt;/div&gt;</code> means it will take the full width in phone screen while take only half in tablets or larger.</p>
<p>In Jade, in order to put plain text, we need to use pipe at front.</p>
<figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">ul.nav.navbar-nav.navbar-<span class="constant">right</span></span><br><span class="line">    li</span><br><span class="line">        <span class="operator">a</span>(href=<span class="string">'#'</span>)</span><br><span class="line">            span.glyphicon.glyphicon-user</span><br><span class="line">            |  Sign Up</span><br><span class="line">    li</span><br><span class="line">        <span class="operator">a</span>(href=<span class="string">'#'</span>)</span><br><span class="line">            span.glyphicon.glyphicon-<span class="built_in">log</span>-<span class="operator">in</span></span><br><span class="line">            |  Login</span><br></pre></td></tr></table></figure>
<p>When dealing with <code>block content</code>, we should note that if some elements are not contrained by css, then they will be strethed to have full width of screen. what we did now is do wrap the content with a <code>div.container</code> so that we can apply css on the container easily.</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">div</span><span class="class">.container</span></span><br><span class="line">  block <span class="attribute">content</span></span><br></pre></td></tr></table></figure>
<p>ç°åœ¨çš„ä¸€ä¸ªä¸»è¦é—®é¢˜æ˜¯ï¼Œ æˆ‘çŸ¥é“å¸ƒå±€æ˜¯ä»€ä¹ˆæ ·å­çš„ï¼Œ ä½†æ˜¯æˆ‘ä¸çŸ¥é“åº”è¯¥æ€ä¹ˆå†™ï¼Ÿwhen to use <code>.row</code> or <code>.page-header</code>. </p>
<ul>
<li><strong>row. Rows must be placed within a .container (fixed-width) or .container-fluid (full-width) for proper alignment and padding. </strong></li>
<li>Use rows to create horizontal groups of columns.</li>
<li>Content should be placed within columns, and only columns may be immediate children of rows.<strong><em><code>col-</code> is the direct child element for <code>row</code></em></strong></li>
<li>Actually <code>.page-header</code> just applies some of its default styling options to the element with that class. In practice, we find that the element with that class will be margined from normal element. </li>
</ul>
<p>We can download the cutomized bootstrap theme from <a href="http://getbootstrap.com/customize/" target="_blank" rel="external">the website</a>, say it I only want to use the <code>glyphicon</code> icon from Bootstrap, then I can just check that box and download it, then after unzipping the file, we include the file under the css part and <strong>inlcude the css tag inside the html</strong>, then it works fine! Hooray! In this project, I mainly use <code>glyphicon-user</code>, <code>glyphicon-fire</code> and <code>glyphicon-chevron-left</code> for navigation.</p>
<p>Using <a href="https://github.com/nicinabox/superslides" target="_blank" rel="external">superslides</a> to achieve a full-screen images scrolling animation. pretty amazing effects.</p>
<p>Use <code>.panel</code> for inner component positioning.</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">   <span class="class">.panel</span><span class="class">.panel-primary</span></span><br><span class="line"><span class="class">.panel-heading</span></span><br><span class="line">	<span class="tag">h2</span><span class="class">.panel-title</span> Training Time</span><br><span class="line"><span class="class">.panel-body</span></span><br><span class="line">	<span class="tag">p</span> March <span class="number">15</span> - March <span class="number">17</span>: <span class="number">7</span>:<span class="number">00</span> am - <span class="number">7</span>:<span class="number">00</span> pm</span><br><span class="line">	<span class="tag">p</span> March <span class="number">21</span> - March <span class="number">23</span>: <span class="number">7</span>:<span class="number">00</span> am - <span class="number">7</span>:<span class="number">00</span> pm</span><br></pre></td></tr></table></figure>
<h2 id="Additional_reference">Additional reference</h2><p>How to undo the <code>git add &lt;filename&gt;</code> before <code>git commit</code>. Use <code>git reset &lt;filename&gt;</code>. Include <code>node_modules</code> into <code>.gitignore</code> so that it wonâ€™t be commited to github. Use</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="id">#You</span> can create your own <span class="class">.gitignore</span> which ignores itself. Create <span class="tag">a</span> <span class="class">.gitignore</span> with this two records:</span><br><span class="line"><span class="class">.gitignore</span></span><br><span class="line">node_modules</span><br></pre></td></tr></table></figure>
<p>åœ¨<a href="http://bootswatch.com/" target="_blank" rel="external">free bootstrap themes</a>ä¸‹è½½bootstrap themeåˆ°public folder.</p>
<p><a href="http://stackoverflow.com/questions/33549178/best-practices-for-loading-videos-on-a-web-page" target="_blank" rel="external">Like Airbnb, how to load video at the background of a website</a>, using progressive loading or ?</p>
<p>ä½¿ç”¨nodemonæ¥ç›‘å¬server-side jsæ–‡ä»¶çš„æ”¹åŠ¨æ¥è‡ªåŠ¨æ›´æ–°serverï¼Œ ä½¿ç”¨browser-syncæ¥ç›‘å¬å„ç§css fileçš„æ”¹åŠ¨ã€‚æœ‰ä¸¤ç§æ¨¡å¼ï¼Œ ä¸€ç§æ˜¯é€šè¿‡ç›´æ¥åˆ›å»ºä¸€ä¸ªserveræ¥hostæœ¬åœ°çš„static file, å¦ä¸€ç§æ¨¡å¼æ˜¯é€šè¿‡ä»£ç†å¦ä¸€ä¸ªæœåŠ¡å™¨ï¼Œ æ¯”å¦‚php server, rails webbrick server, python simplehttpserver, nodejs serveréƒ½å¯ä»¥çš„!!!!</p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">browser-<span class="keyword">sync</span> start --proxy=<span class="string">'localhost:3000'</span> --<span class="keyword">files</span> <span class="string">'app_server/views/*.jade, app_server/controllers/*.js, public/stylesheets/*.css'</span></span><br><span class="line"></span><br><span class="line">browser-<span class="keyword">sync</span> start --server --<span class="keyword">files</span> <span class="string">'app_server/views/*.jade, app_server/controllers/*.js, public/stylesheets/*.css'</span></span><br></pre></td></tr></table></figure>
<p>ç”±äºæˆ‘åœ¨nodejsé‡Œé¢è®¾ç½®äº†æœåŠ¡å™¨çš„ç«¯å£æ˜¯3000ï¼Œ é‚£ä¹ˆé€šè¿‡è®©browser-syncç›‘å¬è¿™ä¸ªç«¯å£å¹¶åˆ›å»ºåœ¨3001çš„ä»£ç†ï¼Œ æˆ‘å¯ä»¥åœ¨<code>localhost:3001</code>ä¸Šé¢å¾—åˆ°è‡ªåŠ¨æ›´æ–°çš„ç½‘é¡µ!!</p>
]]></content>
    <summary type="html">
    <![CDATA[<p>AirLoftçš„åŸå‹ã€‚ ç¬¬äºŒæœŸï¼Œ åŸºäºBootstrapçš„æ‰å¹³åŒ–è®¾è®¡ï¼Œ æŠŠæ‰€æœ‰æ¶‰åŠçš„é¡µé¢çš„clickable prototypeåšå‡ºæ¥ï¼Œ å†è¿ç§»åˆ°express applicationæˆ–è€…Angular SPAä¸Šï¼Œ è™½ç„¶åªæ˜¯å‰ç«¯çš„prototypeï¼Œ ä½†æ˜¯åšå¥½ä¸€äº›npm scriptsçš„é…ç½®ä¼šè®©å‰ç«¯å¼€å‘ç‰¹åˆ«çš„é«˜æ•ˆå’Œèˆ’æœï¼Œ ä¹Ÿç®—æ˜¯åœ¨å…¥é—¨äº†å„ç§ç‚«æŠ€çš„å‰ç«¯å±•ç¤ºåï¼Œ é€æ­¥åˆ°ä¸€ä¸ªfull-fledged websiteçš„è¿‡æ¸¡ã€‚</p>]]>
    
    </summary>
    
      <category term="javascript" scheme="http://chocoluffy.com/tags/javascript/"/>
    
      <category term="nodejs" scheme="http://chocoluffy.com/tags/nodejs/"/>
    
      <category term="web design" scheme="http://chocoluffy.com/tags/web-design/"/>
    
      <category term="æŠ€æœ¯" scheme="http://chocoluffy.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[MEANå…¨æ ˆå¼€å‘[ç¬¬ä¸€æœŸ-å‰ç«¯å¸ƒå±€]]]></title>
    <link href="http://chocoluffy.com/2016/03/06/MEAN%E5%85%A8%E6%A0%88%E5%BC%80%E5%8F%91-%E7%AC%AC%E4%B8%80%E6%9C%9F-%E5%89%8D%E7%AB%AF%E5%B8%83%E5%B1%80/"/>
    <id>http://chocoluffy.com/2016/03/06/MEANå…¨æ ˆå¼€å‘-ç¬¬ä¸€æœŸ-å‰ç«¯å¸ƒå±€/</id>
    <published>2016-03-06T14:38:41.000Z</published>
    <updated>2016-03-06T14:45:46.000Z</updated>
    <content type="html"><![CDATA[<p>AirLoftçš„åŸå‹ã€‚ä¸€ä¸ªsharing economyçš„ç½‘ç«™ã€‚ Loftæ˜¯é˜æ¥¼çš„æ„æ€ï¼Œ æ¯ä¸ªå¿ƒä¸­é‚£ä¸ªé™é™å®ˆå€™ä¸€äº›ç§˜å¯†å’Œç™–å¥½çš„åœ°æ–¹ã€‚ æœ‰äº›æƒ…æ„Ÿï¼Œ åªèƒ½åœ¨å°˜å°çš„é“é—¨åè¯‰è¯´ï¼Œ å°±åƒæœ‰äº›è¯ï¼Œ åªè®²ç»™æŸä¸ªäººå¬ã€‚åŒå€¦äº†æŸäº›ç½‘ç«™æ²¡æœ‰å®¡ç¾çš„UIï¼Œ ä¹Ÿè¶ç€é’æ˜¥è½»ç‹‚ï¼Œ å»æ”¹å˜å§ã€‚ç¬¬ä¸€æœŸï¼Œ è®°å½•æˆ‘å‰ç«¯é¡µé¢å¼€å‘çš„ä¸€äº›æ‰‹è®°ï¼Œ åé¢æ…¢æ…¢è¿‡æ¸¡åˆ°æ•°æ®åº“å’Œåå°APIè®¾è®¡ã€‚</p>
<a id="more"></a>
<h2 id="å‰è¨€">å‰è¨€</h2><p>æœ€è¿‘åœ¨åšä¸€ä¸ªsharing economyçš„ç½‘ç«™ï¼Œåœ¨å‚è€ƒäº†å¤§éƒ¨åˆ†ç°æœ‰ç½‘ç«™çš„UIçš„æ ·å¼åï¼Œ æˆ‘ä»¬æ„Ÿè§‰éå¸¸çš„ä¸æ»¡ğŸ˜‚(å½“ç„¶åƒquoraè¿™ç§å±äºçŸ¥è¯†ä¿¡æ¯å¯†åº¦ç‰¹åˆ«é«˜çš„ç½‘ç«™ä½¿ç”¨æ–‡æœ¬å¯†é›†çš„å½¢åŠ¿è¿˜è¯´çš„è¿‡å»)ï¼Œ ä½†æ˜¯åƒairbnbè¿˜æœ‰æºç¨‹è¿™ç§å¤§å‹çš„peer sharingçš„ç½‘ç«™ï¼Œ å¦‚ä½•å¯ä»¥ä»ç¬¬ä¸€å±å°±å¸å¼•åˆ°ç”¨æˆ·æ˜¯ä¸€ä¸ªå¾ˆé‡è¦çš„é—®é¢˜ã€‚ç›´æ¥ä¸Šå›¾çœ‹çœ‹ï¼š<br>é¦–å…ˆæ˜¯<a href="https://www.airbnb.ca/" target="_blank" rel="external">airbnb</a>çš„ç½‘ç«™ï¼š<br><img src="http://ww1.sinaimg.cn/large/c5ee78b5gw1f1mrezw5z0j21kw0t9dqn.jpg" alt="airbnb website"><br>airbnbåœ¨ç½‘ç«™çš„ç¬¬ä¸€å±æ˜¯ç”¨ä¸€æ®µè§†é¢‘æ¥å½“åšèƒŒæ™¯çš„ï¼Œ éå¸¸æƒŠè‰³ï¼Œ ä½†æ˜¯ç¬¬ä¸€å±æ²¡æœ‰æ»¡å±æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿæ˜¯æƒ³å¸å¼•æˆ‘ä»¬å¯ä»¥å¾€ä¸‹æ»šå˜›ï¼Ÿä½†æ˜¯è¿™ç§æ ·å¼è®©æˆ‘éå¸¸ä¸èˆ’æœï¼Œ æ˜æ˜æœ‰éå¸¸å¥½çš„åˆ›æ„ï¼Œ ä¸ºä»€ä¹ˆä¸åƒè¿™ä¸ª<a href="http://thenewcode.com/samples/polina.html" target="_blank" rel="external">thenewcode.com</a>ä¸€æ ·ä½¿ç”¨é«˜æ¸…å…¨å±çš„è§†é¢‘æ¥å½“åšç½‘é¡µèƒŒæ™¯å‘¢ï¼Œ å¾ˆæƒŠè‰³å¯¹ä¸å¯¹!!</p>
<p>å†çœ‹ä¸€ä¸‹<a href="http://www.ctrip.com/#ctm_ref=nb_cn_top" target="_blank" rel="external">æºç¨‹</a>çš„ç½‘ç«™ï¼Œ æ„Ÿè§‰è¿˜æ˜¯æ»ç•™åœ¨ä¸Šä¸ªä¸–çºªçš„UIã€‚<br><img src="http://ww2.sinaimg.cn/large/c5ee78b5gw1f1mrhyoxpvj21kw0t7qiu.jpg" alt="æºç¨‹website"><br>äºæ˜¯ï¼Œ ä¹Ÿæ˜¯å‡ºäºå¯¹é¢œå€¼çš„è¿½æ±‚ï¼Œæˆ‘å†³å®šå°è¯•ä½¿ç”¨è½®æ’­åœ¨ç¬¬äºŒå±çš„ç½‘ç«™å±•ç¤ºé¡µé¢æ¥å±•ç¤ºå„ä¸ªå…´è¶£å°ç»„ï¼ˆæ¯”å¦‚ä¸€èµ·åšæ—©é¤åƒæ—©é¤å•¦ï¼Œ ä¸€èµ·go hikingå•¦ï¼Œ ä¸€èµ·å¤ä¹ æœŸæœ«è€ƒå†™ä½œä¸šçš„å…´è¶£å°ç»„å•¦ï¼‰</p>
<p>è€ƒè™‘åˆ°å®Œæ•´é¡¹ç›®çš„æ—¶é—´ç´§è¿«ï¼Œ å°±ä¸å‡†å¤‡åœ¨å‰ç«¯çš„jsçš„ä»£ç ä¸ŠèŠ±å¤ªå¤šæ—¶é—´ï¼Œ æ¯•ç«Ÿåé¢è¿˜æœ‰è½¬ç§»åˆ°expressçš„jadeæ¨¡ç‰ˆï¼Œ ç„¶åæœ€åè¿˜è¦ç”¨angularjsæ¥é‡å†™ã€‚ äºæ˜¯æˆ‘å°±åœ¨æ‰¾å„ç±»æ¯”è¾ƒå¥½çš„carouselçš„jsæ’ä»¶ï¼Œ åœ¨æ¯”è¾ƒäº†å‡ ä¸ªçš„è¡¨ç°ä¹‹åï¼Œ è¿˜æ˜¯<a href="https://github.com/nicinabox/superslides" target="_blank" rel="external">superslides</a>æœ€å¾—æˆ‘å¿ƒã€‚åºŸè¯ä¸å¤šè¯´ï¼Œ ç›´æ¥ä¸Šå®ä¾‹ä»£ç ï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="doctype">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">meta</span> <span class="attribute">charset</span>=<span class="value">"utf-8"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">title</span>&gt;</span>Superslides - A fullscreen slider for jQuery<span class="tag">&lt;/<span class="title">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">link</span> <span class="attribute">rel</span>=<span class="value">"stylesheet"</span> <span class="attribute">href</span>=<span class="value">"../dist/stylesheets/superslides.css"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">div</span> <span class="attribute">id</span>=<span class="value">"slides"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"slides-container"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">img</span> <span class="attribute">src</span>=<span class="value">"images/people.jpeg"</span> <span class="attribute">alt</span>=<span class="value">"Cinelli"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">img</span> <span class="attribute">src</span>=<span class="value">"images/surly.jpeg"</span> <span class="attribute">width</span>=<span class="value">"1024"</span> <span class="attribute">height</span>=<span class="value">"682"</span> <span class="attribute">alt</span>=<span class="value">"Surly"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">img</span> <span class="attribute">src</span>=<span class="value">"images/cinelli-front.jpeg"</span> <span class="attribute">width</span>=<span class="value">"1024"</span> <span class="attribute">height</span>=<span class="value">"683"</span> <span class="attribute">alt</span>=<span class="value">"Cinelli"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">img</span> <span class="attribute">src</span>=<span class="value">"images/affinity.jpeg"</span> <span class="attribute">width</span>=<span class="value">"1024"</span> <span class="attribute">height</span>=<span class="value">"685"</span> <span class="attribute">alt</span>=<span class="value">"Affinity"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="title">nav</span> <span class="attribute">class</span>=<span class="value">"slides-navigation"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">a</span> <span class="attribute">href</span>=<span class="value">"#"</span> <span class="attribute">class</span>=<span class="value">"next"</span>&gt;</span>Next<span class="tag">&lt;/<span class="title">a</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">a</span> <span class="attribute">href</span>=<span class="value">"#"</span> <span class="attribute">class</span>=<span class="value">"prev"</span>&gt;</span>Previous<span class="tag">&lt;/<span class="title">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">nav</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="title">script</span> <span class="attribute">src</span>=<span class="value">"http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">script</span> <span class="attribute">src</span>=<span class="value">"javascripts/jquery.easing.1.3.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">script</span> <span class="attribute">src</span>=<span class="value">"javascripts/jquery.animate-enhanced.min.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">script</span> <span class="attribute">src</span>=<span class="value">"../dist/jquery.superslides.js"</span> <span class="attribute">type</span>=<span class="value">"text/javascript"</span> <span class="attribute">charset</span>=<span class="value">"utf-8"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">script</span>&gt;</span><span class="javascript"></span><br><span class="line">    $(<span class="string">'#slides'</span>).superslides(&#123;</span><br><span class="line">      animation: <span class="string">'fade'</span></span><br><span class="line">    &#125;);</span><br><span class="line">  </span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>å¿½ç•¥å…¶ä»–çš„ä¸ç®¡ï¼Œ å¦‚æœæˆ‘ä»¬å¸Œæœ›å¼•å…¥superslidesçš„åŠŸæ•ˆï¼Œ æˆ‘ä»¬åªéœ€è¦æ·»åŠ è¿™å‡ ä¸ªtag:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--css--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">link</span> <span class="attribute">rel</span>=<span class="value">"stylesheet"</span> <span class="attribute">href</span>=<span class="value">"../dist/stylesheets/superslides.css"</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--js--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">script</span> <span class="attribute">src</span>=<span class="value">"http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">script</span> <span class="attribute">src</span>=<span class="value">"../dist/jquery.superslides.js"</span> <span class="attribute">type</span>=<span class="value">"text/javascript"</span> <span class="attribute">charset</span>=<span class="value">"utf-8"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>æ³¨æ„jqueryçš„å¼•å…¥è¦åœ¨superslidesçš„å‰é¢ï¼Œ æ¥ä¿è¯superslidesåœ¨å¼•ç”¨çš„æ—¶å€™å¯ä»¥ç”¨åˆ°jqueryé‡Œé¢çš„å®šä¹‰çš„å‡½æ•°ã€‚</p>
<p>åœ¨æ·»åŠ äº†csså’Œjsä¹‹åï¼Œ æˆ‘ä»¬å°±å¯ä»¥æ¥åˆ›å»ºå…¨å±å›¾ç‰‡è½®æ’­çš„htmlç»“æ„äº†ï¼Œ å®˜æ–¹æ¨èçš„æ˜¯åœ¨<code>&lt;div id=&quot;slides&quot;&gt;</code>é‡Œé¢æ”¾ä¸€ä¸ªdivé‡Œé¢æ”¾å„ç§imgï¼Œ æˆ–è€…ä¹Ÿå¯ä»¥ä½¿ç”¨ä¸€ä¸ª<code>&lt;li&gt;</code>æ¥åˆ†å¼€imgå’Œdivæ¥åœ¨åæœŸåˆ†åˆ«å†™æ ·å¼å’Œå®šä½ï¼Œ æˆ‘åœ¨æˆ‘çš„é¡¹ç›®ä¸­ä½¿ç”¨çš„å°±æ˜¯åè€…ï¼Œ æ¯”å¦‚ï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">div</span> <span class="attribute">id</span>=<span class="value">"slides"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">ul</span> <span class="attribute">class</span>=<span class="value">"slides-container"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">li</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">img</span> <span class="attribute">src</span>=<span class="value">"http://flickholdr.com/1000/800"</span> <span class="attribute">alt</span>=<span class="value">""</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"container"</span>&gt;</span></span><br><span class="line">        Slide one</span><br><span class="line">      <span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">li</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">img</span> <span class="attribute">src</span>=<span class="value">"http://flickholdr.com/1000/800/space"</span> <span class="attribute">alt</span>=<span class="value">""</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"container"</span>&gt;</span></span><br><span class="line">        Slide two</span><br><span class="line">      <span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">li</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">img</span> <span class="attribute">src</span>=<span class="value">"http://flickholdr.com/1000/800/tech"</span> <span class="attribute">alt</span>=<span class="value">""</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"container"</span>&gt;</span></span><br><span class="line">        Slide three</span><br><span class="line">      <span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="title">ul</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">nav</span> <span class="attribute">class</span>=<span class="value">"slides-navigation"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">a</span> <span class="attribute">href</span>=<span class="value">"#"</span> <span class="attribute">class</span>=<span class="value">"next"</span>&gt;</span>Next<span class="tag">&lt;/<span class="title">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">a</span> <span class="attribute">href</span>=<span class="value">"#"</span> <span class="attribute">class</span>=<span class="value">"prev"</span>&gt;</span>Previous<span class="tag">&lt;/<span class="title">a</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="title">nav</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>ç”±äºæˆ‘çš„ç½‘ç«™èƒŒæ™¯é¢œè‰²æ˜¯æš—è‰²ç³»çš„ï¼Œ æˆ‘æ·»åŠ äº†<code>reveselay</code>å’Œ<code>overlay</code>æ¥åˆ›å»ºä¸¤ä¸ªmaskæ¥å†™å‡ºæ¸å˜æ¸å‡ºçš„æ•ˆæœï¼Œ è¿™æ ·å¯ä»¥å¾ˆå¥½çš„å’ŒèƒŒæ™¯é¢œè‰²æ··ä¸ºä¸€ä½“ã€‚</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"section"</span> <span class="attribute">id</span>=<span class="value">"android"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"containerrow"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">div</span> <span class="attribute">id</span>=<span class="value">"slides"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">ul</span> <span class="attribute">class</span>=<span class="value">"slides-container"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">li</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">img</span> <span class="attribute">src</span>=<span class="value">"./image/desk.jpg"</span> <span class="attribute">alt</span>=<span class="value">""</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"reverselay"</span>&gt;</span><span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"overlay"</span>&gt;</span><span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"mainbadget"</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="title">h5</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="title">span</span> <span class="attribute">class</span>=<span class="value">"glyphicon glyphicon-user"</span>&gt;</span><span class="tag">&lt;/<span class="title">span</span>&gt;</span>&amp;nbsp;134 &amp;nbsp;&amp;nbsp;</span><br><span class="line">                <span class="tag">&lt;<span class="title">span</span> <span class="attribute">class</span>=<span class="value">"glyphicon glyphicon-fire"</span>&gt;</span><span class="tag">&lt;/<span class="title">span</span>&gt;</span>&amp;nbsp;3440</span><br><span class="line">              <span class="tag">&lt;/<span class="title">h5</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"text-container"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"maintitle"</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="title">a</span> <span class="attribute">href</span>=<span class="value">""</span>&gt;</span>Morning Call<span class="tag">&lt;/<span class="title">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"maintext"</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="title">p</span>&gt;</span>Join our breakfast cooking club for fresh pancakes and sunshine!</span><br><span class="line">              Meet your friends here and enjoy every piece of buttered toast. <span class="tag">&lt;<span class="title">a</span> <span class="attribute">href</span>=<span class="value">""</span>&gt;</span>See more.<span class="tag">&lt;/<span class="title">a</span>&gt;</span><span class="tag">&lt;/<span class="title">p</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="title">div</span>&gt;</span>    </span><br><span class="line">        <span class="tag">&lt;/<span class="title">li</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="title">ul</span>&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="tag">&lt;<span class="title">nav</span> <span class="attribute">class</span>=<span class="value">"slides-navigation"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">a</span> <span class="attribute">href</span>=<span class="value">"#"</span> <span class="attribute">class</span>=<span class="value">"prev"</span>&gt;</span><span class="tag">&lt;<span class="title">span</span> <span class="attribute">class</span>=<span class="value">"glyphicon glyphicon-chevron-left"</span>&gt;</span><span class="tag">&lt;/<span class="title">span</span>&gt;</span><span class="tag">&lt;/<span class="title">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">a</span> <span class="attribute">href</span>=<span class="value">"#"</span> <span class="attribute">class</span>=<span class="value">"next"</span>&gt;</span><span class="tag">&lt;<span class="title">span</span> <span class="attribute">class</span>=<span class="value">"glyphicon glyphicon-chevron-right"</span>&gt;</span><span class="tag">&lt;/<span class="title">span</span>&gt;</span><span class="tag">&lt;/<span class="title">a</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="title">nav</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="title">div</span> <span class="attribute">id</span>=<span class="value">"slider-control"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">a</span> <span class="attribute">href</span>=<span class="value">"#react"</span> <span class="attribute">class</span>=<span class="value">"active"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"dot"</span>&gt;</span><span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="title">a</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="title">a</span> <span class="attribute">href</span>=<span class="value">"#intro"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"dot"</span>&gt;</span><span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="title">a</span>&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="tag">&lt;<span class="title">a</span> <span class="attribute">href</span>=<span class="value">"#native"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"dot"</span>&gt;</span><span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="title">a</span>&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="tag">&lt;<span class="title">a</span> <span class="attribute">href</span>=<span class="value">"#touch"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"dot"</span>&gt;</span><span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="title">a</span>&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="tag">&lt;<span class="title">a</span> <span class="attribute">href</span>=<span class="value">"#android"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"dot"</span>&gt;</span><span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="title">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>æ³¨æ„æˆ‘è¿™é‡Œçš„<code>text-container</code>, <code>maintitle</code>, <code>maintext</code>éƒ½æ˜¯ç”¨æ¥åˆ›å»ºoverlayåœ¨å›¾ç‰‡ä¸Šé¢çš„æ–‡å­—ï¼Œ åˆ†ç¦»å‡ºæ¥æ¯”è¾ƒæ–¹ä¾¿å®šä½ã€‚æœ€åè®°å¾—è¦åˆå§‹åŒ–jsï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">script</span>&gt;</span><span class="javascript"></span><br><span class="line">  $(<span class="string">'#slides'</span>).superslides(&#123;</span><br><span class="line">    animation: <span class="string">'fade'</span>,</span><br><span class="line">    play: <span class="string">'8000'</span></span><br><span class="line">  &#125;);</span><br><span class="line"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>è¿˜æœ‰å¾ˆå¤šçš„åŠŸèƒ½é€‰é¡¹ï¼Œ åœ¨<a href="https://github.com/nicinabox/superslides" target="_blank" rel="external">ä¸»é¡µ</a>å¯ä»¥æŸ¥çœ‹åˆ°æœ€å…¨çš„åŠŸèƒ½é…ç½®ï¼Œä¹Ÿå¯ä»¥å‚è€ƒä»–çš„<a href="http://archive.nicinabox.com/superslides/#1" target="_blank" rel="external">å®ä¾‹é¡µé¢</a> é‚£å°±æå®šäº†! æœ€åé™„ä¸Šæˆå“çš„gif:<br><img src="https://giant.gfycat.com/WetLongHapuka.gif" alt="project gif"></p>
]]></content>
    <summary type="html">
    <![CDATA[<p>AirLoftçš„åŸå‹ã€‚ä¸€ä¸ªsharing economyçš„ç½‘ç«™ã€‚ Loftæ˜¯é˜æ¥¼çš„æ„æ€ï¼Œ æ¯ä¸ªå¿ƒä¸­é‚£ä¸ªé™é™å®ˆå€™ä¸€äº›ç§˜å¯†å’Œç™–å¥½çš„åœ°æ–¹ã€‚ æœ‰äº›æƒ…æ„Ÿï¼Œ åªèƒ½åœ¨å°˜å°çš„é“é—¨åè¯‰è¯´ï¼Œ å°±åƒæœ‰äº›è¯ï¼Œ åªè®²ç»™æŸä¸ªäººå¬ã€‚åŒå€¦äº†æŸäº›ç½‘ç«™æ²¡æœ‰å®¡ç¾çš„UIï¼Œ ä¹Ÿè¶ç€é’æ˜¥è½»ç‹‚ï¼Œ å»æ”¹å˜å§ã€‚ç¬¬ä¸€æœŸï¼Œ è®°å½•æˆ‘å‰ç«¯é¡µé¢å¼€å‘çš„ä¸€äº›æ‰‹è®°ï¼Œ åé¢æ…¢æ…¢è¿‡æ¸¡åˆ°æ•°æ®åº“å’Œåå°APIè®¾è®¡ã€‚</p>]]>
    
    </summary>
    
      <category term="javascript" scheme="http://chocoluffy.com/tags/javascript/"/>
    
      <category term="web design" scheme="http://chocoluffy.com/tags/web-design/"/>
    
      <category term="æŠ€æœ¯" scheme="http://chocoluffy.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[Ajax(with Jquery) on Nodejs server]]></title>
    <link href="http://chocoluffy.com/2016/02/20/Ajax-with-Jquery-on-Nodejs-server/"/>
    <id>http://chocoluffy.com/2016/02/20/Ajax-with-Jquery-on-Nodejs-server/</id>
    <published>2016-02-20T19:37:25.000Z</published>
    <updated>2016-02-20T19:44:47.000Z</updated>
    <content type="html"><![CDATA[<p>Nodejsçš„ç¬¬ä¸€ä¸ªä¸Šæ‰‹å°é¡¹ç›®ï¼Œ å°±æ˜¯å°è¯•è‡ªå·±åœ¨æœ¬åœ°çš„é¡µé¢æ¥å‘é€Ajaxè¯·æ±‚ï¼Œ å¹¶ä¸”é€šè¿‡nodejsçš„jsonæ–‡ä»¶è¿”å›åä»¥æ¯”è¾ƒä¼˜é›…çš„å‰ç«¯æ ·å¼å‘ˆç°å‡ºæ¥ã€‚ ç®—æ˜¯å†ä¸€æ¬¡å¤ä¹ äº†Bootstrapï¼Œ fontawesomeåº“çš„è°ƒç”¨ï¼Œ ä»¥åŠä¸€äº›jqueryçš„è¯­æ³•ã€‚ ä»”ç»†å›æƒ³ï¼Œ å…¶å®nodejsçš„åç«¯å¼€å‘å’Œrails\djangoçš„routerçš„æœ¬è´¨éƒ½æ˜¯ä¸€æ ·çš„ï¼Œ ä»¥å‰åœ¨è¿˜æ²¡æœ‰ç†è§£å®è´¨çš„æ—¶å€™å°±ä¸Šæ‰‹å®æˆ˜ï¼Œ ç°åœ¨æ…¢æ…¢ç†è§£äº†æ‰èƒ½å¤Ÿèä¼šè´¯é€šï¼Œ ç°åœ¨çš„å¼€å‘é€Ÿåº¦å¤§å¤§è¿›æ­¥äº†ã€‚ åŒæ—¶ä¹Ÿå­¦ä¼šäº†å¦‚ä½•å…è®¸CORSçš„è¯·æ±‚ï¼Œ å’Œæ­£åˆ™åŒ¹é…çš„éƒ¨åˆ†ç»†èŠ‚ã€‚<br><a id="more"></a></p>
<p><img src="https://zippy.gfycat.com/FancyWeeBrontosaurus.gif" alt="project gif"></p>
<h2 id="Requirements">Requirements</h2><p>Requesting 127.0.0.1:3000 should give your index page (with CSS and JS). For the subsequent requests, you should use AJAX to send requests to the Node server and update only some parts of the page with the response data. Ideally, you should return JSON data as a response and then format that using Javascript.</p>
<h2 id="Ongoing_notes">Ongoing notes</h2><ul>
<li><p>how to use Ajax to request the data instead of using url request to node server? <strong><em>Main idea is that to use <code>$.getJSON(&quot;http://127.0.0.1:3000/favs.json&quot;, function(...){...}</code> to send out the Ajax request, and set the nodejs script to be able to respond such json file request and properly handle CORS problem. The things left will be just styling and formatted retrieved information and display.</em></strong></p>
</li>
<li><p>nodejs. You might use Node.js to connect to a database (returning a result set from a query, say, or updating a record); deliver HTML, XML, or JSON content; connect to local files; or serve up static web pages like Apache or another web server.</p>
</li>
<li><p>ajax. The mechanism for sending data to and retrieving data from the server with Ajax is the XMLHttpRequest object. So, now that we have an XMLHttpRequest object created, what do we do with it? We use it to make HTTP requests. To do so, we initialize the object with the open() method, which takes three arguments. Like <code>xmlhttp.open(&quot;GET&quot;,&quot;Demo.xml&quot;,true);</code>.</p>
<ul>
<li>HEAD. <code>xmlhttp.open(&quot;HEAD&quot;,&quot;Demo&quot;,true);</code> and <code>xmlhttp.send(null)</code>.</li>
<li>GET. <code>xmlhttp.open(&quot;GET&quot;,&quot;Demo?FirstName=Nat&amp;LastName=Dunn&quot;,true);</code>, the last argument is choose for true(asynchronous) or false(synchronous). The difference is that for synchronous version, browser has to wait for a response. The code below shows how to use Ajax solely to listen to the content change.</li>
</ul>
</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="title">script</span> <span class="attribute">type</span>=<span class="value">"text/javascript"</span>&gt;</span><span class="javascript"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">start</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> xmlhttp = <span class="keyword">new</span> XMLHttpRequest();</span><br><span class="line">        <span class="keyword">var</span> contentDiv = <span class="built_in">document</span>.getElementById(<span class="string">"Content"</span>);</span><br><span class="line"> </span><br><span class="line">        xmlhttp.open(<span class="string">"GET"</span>, <span class="string">"Demo?FirstName=Nat&amp;LastName=Dunn"</span>, <span class="literal">true</span>);</span><br><span class="line">        xmlhttp.onreadystatechange = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; <span class="comment">// handle Ajax response.</span></span><br><span class="line">            <span class="keyword">if</span> (xmlhttp.readyState == <span class="number">4</span> &amp;&amp; xmlhttp.status == <span class="number">200</span>) &#123;</span><br><span class="line">                contentDiv.innerHTML = xmlhttp.responseText;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        xmlhttp.send(<span class="literal">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    observeEvent(<span class="built_in">window</span>, <span class="string">"load"</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> btn = <span class="built_in">document</span>.getElementById(<span class="string">"btnStart"</span>);</span><br><span class="line">        observeEvent(btn, <span class="string">"click"</span>, start);</span><br><span class="line">    &#125;);</span><br><span class="line"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li><p>Ajax in jquery. In general, Ajax does not work across domains. Exceptions are services that provide JSONP (JSON with Padding) support, which allow limited cross-domain functionality. JQuery provides Ajax support that abstracts away painful browser differences. It offers both a full-featured $.ajax() method, and simple convenience methods such as $.get(), $.getScript(), $.getJSON(), $.post(), and $.fn.load(). A working example of using Ajax of pulling image data from Flick referring <a href="http://www.w3school.com.cn/jquery/ajax_getjson.asp" target="_blank" rel="external">this post</a></p>
</li>
<li><p>How to avoid CORS(cross-origin resources sharing) error, refer to <a href="http://www.bennadel.com/blog/2327-cross-origin-resource-sharing-cors-ajax-requests-between-jquery-and-node-js.htm" target="_blank" rel="external">this post</a>. <strong><em>Main idea is that at the nodejs server part, we allow some origin and some type of content being CORS, thus we can request such resources at client part, which in this case in my own browser.</em></strong></p>
</li>
<li><p>How to regex all the href links inside a tweet? Especially how to do that in javascript? </p>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// tweet here is a JSON object</span></span><br><span class="line"><span class="keyword">var</span> tweetString = <span class="built_in">JSON</span>.stringify(tweet);</span><br><span class="line"><span class="keyword">var</span> regex = <span class="regexp">/(https?:\/\/.*?)("|\s)/g</span>;</span><br><span class="line"><span class="keyword">var</span> matchlst = [];</span><br><span class="line">tweetString.replace(regex, <span class="function"><span class="keyword">function</span>(<span class="params">a, b, c, d</span>)</span>&#123;</span><br><span class="line">	<span class="keyword">if</span>(a.slice(-<span class="number">1</span>)==<span class="string">'"'</span>)&#123;</span><br><span class="line">		a = a.slice(<span class="number">0</span>, -<span class="number">1</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	matchlst.push(a);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p><strong><em>Main idea is that we first make a JSON object into a string, then we can do regex match on a string. we use //g to indicate that it is search globally. And then for those valid match, we trim out the trailing quote then store it into a list for later formatting use. </em></strong>. Note that we should make full use of the flag option provided with regex matching, refer to <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions" target="_blank" rel="external">this post</a>. For example, <code>/.../g</code> is for global match, <code>/.../i</code> is for case-insensitive match.</p>
<ul>
<li>How to use Jquery to construct <code>div</code> or <code>a</code> elements? refer to <a href="http://stackoverflow.com/questions/867916/creating-a-div-element-in-jquery" target="_blank" rel="external">this post</a>, simply do the following: <strong><em>Here I make use of the Bootstrap alert styling!</em></strong></li>
</ul>
<figure class="highlight openscad"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$<span class="params">(<span class="string">"&lt;div&gt;"</span>)</span>.addClass<span class="params">('alert alert-warning')</span>.html<span class="params">(<span class="string">"&lt;strong&gt;Warning!&lt;/strong&gt; Such user or tweet does not exist. Please enter a valid query."</span>)</span>.prependTo<span class="params">(query_list)</span>;</span><br></pre></td></tr></table></figure>
<ul>
<li>Avoid the <code>submit</code> event cause a page redirection or refresh? simply add a <code>return false</code> at the end of the submit function. Here is the submit function I wrote to process the info after AJAX from nodejs server. Note that my nodejs server host at <code>http://127.0.0.1:3000/</code>.</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">"#queryform"</span>).submit(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    		emptyAll();</span><br><span class="line">    		<span class="keyword">var</span> searchval = $(<span class="string">"#search"</span>).val();</span><br><span class="line">    		<span class="built_in">console</span>.log(searchval);</span><br><span class="line">    		$(<span class="string">"#list ul"</span>).addClass(<span class="string">"unseen"</span>);</span><br><span class="line">    		<span class="keyword">var</span> query_list = $(<span class="string">"#query"</span>);</span><br><span class="line">    		<span class="keyword">var</span> nameHash = &#123;&#125;;</span><br><span class="line">    		<span class="keyword">var</span> tweetidHash = &#123;&#125;; </span><br><span class="line">	    	$.getJSON(<span class="string">"http://127.0.0.1:3000/favs.json"</span>, <span class="function"><span class="keyword">function</span>(<span class="params">tweets</span>)</span>&#123;</span><br><span class="line">				$.each(tweets, <span class="function"><span class="keyword">function</span>(<span class="params">i,tweet</span>)</span>&#123;</span><br><span class="line">					nameHash[tweet.user.screen_name] = tweet;</span><br><span class="line">					tweetidHash[tweet.id_str] = tweet;</span><br><span class="line">				&#125;);</span><br><span class="line">				<span class="keyword">if</span>(<span class="built_in">Object</span>.keys(nameHash).indexOf(searchval)&gt;=<span class="number">0</span>)&#123;</span><br><span class="line">					<span class="keyword">var</span> formattedText = <span class="string">"&lt;strong&gt;User screen name: &lt;/strong&gt;"</span>;</span><br><span class="line">					formattedText += searchval + <span class="string">"&lt;br&gt;"</span>;</span><br><span class="line">					formattedText += <span class="string">"&lt;strong&gt;Tweet: &lt;/strong&gt;&lt;br&gt;"</span>;</span><br><span class="line">					formattedText += <span class="string">"&lt;pre&gt;&lt;code&gt;"</span> + <span class="built_in">JSON</span>.stringify(nameHash[searchval], <span class="literal">null</span>, <span class="number">4</span>) + <span class="string">"&lt;/code&gt;&lt;/pre&gt;"</span>;</span><br><span class="line">					$(<span class="string">"&lt;p&gt;"</span>).html(formattedText).prependTo(query_list);</span><br><span class="line">				&#125;</span><br><span class="line">				<span class="keyword">else</span> <span class="keyword">if</span>(<span class="built_in">Object</span>.keys(tweetidHash).indexOf(searchval)&gt;=<span class="number">0</span>)&#123;</span><br><span class="line">					<span class="keyword">var</span> formattedText = <span class="string">"&lt;strong&gt;Tweet ID: &lt;/strong&gt;"</span>;</span><br><span class="line">					formattedText += searchval + <span class="string">"&lt;br&gt;"</span>;</span><br><span class="line">					formattedText += <span class="string">"&lt;strong&gt;Tweet: &lt;/strong&gt;&lt;br&gt;"</span>;</span><br><span class="line">					formattedText += <span class="string">"&lt;pre&gt;&lt;code&gt;"</span> + <span class="built_in">JSON</span>.stringify(tweetidHash[searchval], <span class="literal">null</span>, <span class="number">4</span>) + <span class="string">"&lt;/code&gt;&lt;/pre&gt;"</span>;</span><br><span class="line">					$(<span class="string">"&lt;p&gt;"</span>).html(formattedText).prependTo(query_list);</span><br><span class="line">				&#125;</span><br><span class="line">				<span class="keyword">else</span>&#123;		</span><br><span class="line">					$(<span class="string">"&lt;div&gt;"</span>).addClass(<span class="string">'alert alert-warning'</span>).html(<span class="string">"&lt;strong&gt;Warning!&lt;/strong&gt; Such user or tweet does not exist. Please enter a valid query."</span>).prependTo(query_list);</span><br><span class="line"></span><br><span class="line">				&#125;</span><br><span class="line">			&#125;);</span><br><span class="line">	</span><br><span class="line">			$(<span class="string">"#query"</span>).removeClass(<span class="string">"unseen"</span>);</span><br><span class="line">			$(<span class="string">"#query"</span>).addClass(<span class="string">"seen"</span>); </span><br><span class="line">			<span class="keyword">return</span> <span class="literal">false</span>; </span><br><span class="line">    	&#125;);</span><br></pre></td></tr></table></figure>
<ul>
<li>Some JS tricks:<ul>
<li><code>if...in...</code> equivalent type in JS as in python. use <code>Array.indexOf(element)&gt;=0</code> to know that if such element exist in this array.</li>
<li>Get the keys array of a Hash. <code>Object.keys(hash)</code>.</li>
<li>Get the last character from a string. <code>string.slice(-1)</code>.</li>
<li>Trim out the last character from a string. <code>string = string.slice(0, -1)</code>.</li>
<li>Use Jquery to get the value from submitted form. </li>
</ul>
</li>
</ul>
]]></content>
    <summary type="html">
    <![CDATA[<p>Nodejsçš„ç¬¬ä¸€ä¸ªä¸Šæ‰‹å°é¡¹ç›®ï¼Œ å°±æ˜¯å°è¯•è‡ªå·±åœ¨æœ¬åœ°çš„é¡µé¢æ¥å‘é€Ajaxè¯·æ±‚ï¼Œ å¹¶ä¸”é€šè¿‡nodejsçš„jsonæ–‡ä»¶è¿”å›åä»¥æ¯”è¾ƒä¼˜é›…çš„å‰ç«¯æ ·å¼å‘ˆç°å‡ºæ¥ã€‚ ç®—æ˜¯å†ä¸€æ¬¡å¤ä¹ äº†Bootstrapï¼Œ fontawesomeåº“çš„è°ƒç”¨ï¼Œ ä»¥åŠä¸€äº›jqueryçš„è¯­æ³•ã€‚ ä»”ç»†å›æƒ³ï¼Œ å…¶å®nodejsçš„åç«¯å¼€å‘å’Œrails\djangoçš„routerçš„æœ¬è´¨éƒ½æ˜¯ä¸€æ ·çš„ï¼Œ ä»¥å‰åœ¨è¿˜æ²¡æœ‰ç†è§£å®è´¨çš„æ—¶å€™å°±ä¸Šæ‰‹å®æˆ˜ï¼Œ ç°åœ¨æ…¢æ…¢ç†è§£äº†æ‰èƒ½å¤Ÿèä¼šè´¯é€šï¼Œ ç°åœ¨çš„å¼€å‘é€Ÿåº¦å¤§å¤§è¿›æ­¥äº†ã€‚ åŒæ—¶ä¹Ÿå­¦ä¼šäº†å¦‚ä½•å…è®¸CORSçš„è¯·æ±‚ï¼Œ å’Œæ­£åˆ™åŒ¹é…çš„éƒ¨åˆ†ç»†èŠ‚ã€‚<br>]]>
    
    </summary>
    
      <category term="javascript" scheme="http://chocoluffy.com/tags/javascript/"/>
    
      <category term="nodejs" scheme="http://chocoluffy.com/tags/nodejs/"/>
    
      <category term="æŠ€æœ¯" scheme="http://chocoluffy.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[Online messege sendingåç«¯Cå®ç°ç‰ˆ]]></title>
    <link href="http://chocoluffy.com/2016/02/18/Online-messege-sending%E5%90%8E%E7%AB%AFC%E5%AE%9E%E7%8E%B0%E7%89%88/"/>
    <id>http://chocoluffy.com/2016/02/18/Online-messege-sendingåç«¯Cå®ç°ç‰ˆ/</id>
    <published>2016-02-18T22:51:30.000Z</published>
    <updated>2016-02-18T23:00:55.000Z</updated>
    <content type="html"><![CDATA[<p>åŸå‹æ˜¯æœ€è¿‘ä¸€é—¨è¯¾çš„ä½œä¸šï¼Œ è¿™æ˜¯æˆ‘åœ¨è¿‡ç¨‹ä¸­è®°ä¸‹çš„ä¸€äº›æ‰‹è®°å¿ƒå¾—ï¼Œ éƒ½æ˜¯æˆ‘è®¤ä¸ºæ˜¯å€¼å¾—å…³æ³¨çš„åœ°æ–¹ã€‚ æœªæ¥ä¼šæŠŠè¿™äº›åç«¯å‡½æ•°åŠ å…¥TCPåè®®ï¼Œ æ›´è´´è¿‘å®æˆ˜ä½¿ç”¨å§ã€‚åŸºç¡€çš„æ•°æ®ç»“æ„ä¸»è¦æ˜¯é“¾è¡¨ï¼Œ ç®—æ˜¯ç”¨Cè‡ªå·±å†å¤ä¹ ä¸€éé“¾è¡¨å®ç°ã€‚ç®—æ³•å˜›ï¼Ÿæ²¡æœ‰ç®—æ³•ğŸ˜‚ä¸éœ€è¦è€ƒè™‘æ€§èƒ½ä¹Ÿå°±æ²¡æœ‰è€ƒè™‘ç®—æ³•ä¼˜åŒ–å’¯ã€‚</p>
<a id="more"></a>
<p><img src="http://ww3.sinaimg.cn/large/c5ee78b5gw1f149fxx25oj21360w6n5z.jpg" alt="screenshot"><br><img src="http://ww4.sinaimg.cn/large/c5ee78b5gw1f149r4zqkaj213e0zgajd.jpg" alt="profileshot"></p>
<h2 id="Ongoing_notes">Ongoing notes</h2><ul>
<li>how to enter the interactive mode? the main function for interactive mode is process_args. Like the code snippet below, it keep reading inputs from stdin(then using <code>fgets</code> to feed it into a input buffer), then using tokenize function(making use of <code>strtok</code> to tokenize the input commands), then the input command is stored in <code>char ** cmdargv</code>, which just like <code>argv</code> we often use. <code>cmdargv[0]</code> stores the first command, like <code>profile</code> and so on. What is left is just to depend on the return value from each core functions to display a proper information back to the screen.  </li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">printf</span>(<span class="string">"Welcome to FriendMe! (Local version)\nPlease type a command:\n&gt; "</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> (fgets(input, INPUT_BUFFER_SIZE, input_stream) != <span class="literal">NULL</span>) &#123;</span><br><span class="line">    <span class="comment">// only echo the line in batch mode since in interactive mode the user</span></span><br><span class="line">    <span class="comment">// just typed the line</span></span><br><span class="line">    <span class="keyword">if</span> (batch_mode) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%s"</span>, input);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">char</span> *cmd_argv[INPUT_ARG_MAX_NUM];</span><br><span class="line">    <span class="keyword">int</span> cmd_argc = tokenize(input, cmd_argv);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (cmd_argc &gt; <span class="number">0</span> &amp;&amp; process_args(cmd_argc, cmd_argv, &amp;user_list) == -<span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">break</span>; <span class="comment">// can only reach if quit command was entered</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"&gt; "</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>cast type when allocating memory for <strong><em>Fixed length character array</em></strong></li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="keyword">struct</span> user &#123;</span><br><span class="line">    <span class="keyword">char</span> name[MAX_NAME];</span><br><span class="line">    <span class="keyword">char</span> profile_pic[MAX_NAME];  <span class="comment">// This is a *filename*, not the file contents.</span></span><br><span class="line">    <span class="keyword">struct</span> post *first_post;</span><br><span class="line">    <span class="keyword">struct</span> user *friends[MAX_FRIENDS];</span><br><span class="line">    <span class="keyword">struct</span> user *next;</span><br><span class="line">&#125; User;</span><br></pre></td></tr></table></figure>
<p>we need to do this:</p>
<figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">char* username = malloc<span class="list">(<span class="keyword">MAX_NAME*sizeof</span><span class="list">(<span class="keyword">char</span>)</span>)</span><span class="comment">;</span></span><br><span class="line">strcpy<span class="list">(<span class="keyword">newuser-&gt;name</span>, username)</span><span class="comment">;</span></span><br></pre></td></tr></table></figure>
<p>to be able to allocate the memory for that character array. </p>
<ul>
<li>how to handle structs of linked list when only the head of the list is given like <code>int create_user(const char *name, User **user_ptr_add)</code>. Note that since we will modify the linked list itself, we will have to pass in a pointer of pointer. Now if we only want to iterate through this linked list, we donâ€™t need the ptr of ptr. Resolved by referring to <a href="http://geeksquiz.com/linked-list-set-2-inserting-a-node/" target="_blank" rel="external">this post </a>, and refer to <a href="https://www.cs.bu.edu/teaching/c/linked-list/delete/" target="_blank" rel="external">this post</a> and <a href="http://geeksquiz.com/linked-list-set-3-deleting-node/" target="_blank" rel="external">this post from Geeksquiz</a> for deleting a node from a post. <blockquote>
<p>one key thing of dealing with ptr of ptr in linked list is that we need make clear the use of <code>curr</code> pointer and <code>*user_ptr</code> since we are suppore to change it in function <code>int create_user(const char *name, User **user_ptr_add)</code>. </p>
</blockquote>
</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// add the newuser to the end of linked list.</span></span><br><span class="line"><span class="comment">// int create_user(const char *name, User **user_ptr_add) </span></span><br><span class="line"></span><br><span class="line">	<span class="comment">// now append this node to the end of linked list.</span></span><br><span class="line">	User* last = *user_ptr_add;</span><br><span class="line">	<span class="keyword">if</span>(*user_ptr_add == <span class="literal">NULL</span>)&#123; <span class="comment">// if linked list is empty</span></span><br><span class="line">		*user_ptr_add = newuser;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span>&#123; <span class="comment">// otherwise</span></span><br><span class="line">		<span class="keyword">if</span>(<span class="built_in">strcmp</span>(last-&gt;name, name) == <span class="number">0</span>)&#123; <span class="comment">// if the first node is the same user.</span></span><br><span class="line">			<span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">while</span>(last-&gt;next!=<span class="literal">NULL</span>)&#123;</span><br><span class="line">			<span class="keyword">if</span>(<span class="built_in">strcmp</span>(last-&gt;name, name) == <span class="number">0</span>)&#123; <span class="comment">// if same user exists</span></span><br><span class="line">				<span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">			&#125;</span><br><span class="line">			last = last-&gt;next;</span><br><span class="line">		&#125;</span><br><span class="line">		last-&gt;next = newuser;</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// delete the user with name from the linked list.</span></span><br><span class="line"><span class="comment">// int delete_user(const char *name, User **user_ptr_del)</span></span><br><span class="line"></span><br><span class="line">		User* curr = *user_ptr_del;</span><br><span class="line">		User* prev; <span class="comment">// store previous node.</span></span><br><span class="line"></span><br><span class="line">		<span class="comment">// if head node itself holds the user to be deleted.</span></span><br><span class="line">		<span class="keyword">if</span>(curr != <span class="function"><span class="literal">NULL</span> &amp;&amp; <span class="title">strcmp</span><span class="params">(curr-&gt;name, name)</span></span>== <span class="number">0</span>)&#123;</span><br><span class="line">			*user_ptr_del = curr-&gt;next;</span><br><span class="line">			<span class="built_in">free</span>(curr);</span><br><span class="line">			<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">while</span>(curr != <span class="function"><span class="literal">NULL</span> &amp;&amp; <span class="title">strcmp</span><span class="params">(curr-&gt;name, name)</span> !</span>= <span class="number">0</span>)&#123;</span><br><span class="line">			prev = curr;</span><br><span class="line">			curr = curr-&gt;next;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		delete_user_from_friends(name, *user_ptr_del);</span><br><span class="line">		prev-&gt;next = curr-&gt;next;</span><br><span class="line">		<span class="built_in">free</span>(curr);</span><br></pre></td></tr></table></figure>
<ul>
<li><p>type is not assignable during <code>malloc</code>: <code>struct user *friends[MAX_FRIENDS];</code></p>
</li>
<li><p>segmentation fault!!! <strong><em>Usually in practice, if we want to access the memory location where we donâ€™t have access to, meaning that when we want to set some attributes, we need to first make sure that that part of memory has been malloc!!</em></strong></p>
<blockquote>
<p>One trick on this is to make sure that whenever we see a struct like this: first is to malloc memory for the all struct, then for each array, like here <code>name</code>, <code>profile_pic</code> and <code>friends</code> array. Especially the <code>friends</code> array, the haunting time when debugging for the final function <code>delete_user</code>, I always get a segmentation fault, which results from that I did not malloc the memory for the friend array at the very first beginning inside <code>create_user</code> function, thus when I try to change one elementâ€™s value, I will access to unallocated memory, a segmentation fault.</p>
</blockquote>
</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="keyword">struct</span> user &#123;</span><br><span class="line">    <span class="keyword">char</span> name[MAX_NAME];</span><br><span class="line">    <span class="keyword">char</span> profile_pic[MAX_NAME];  <span class="comment">// This is a *filename*, not the file contents.</span></span><br><span class="line">    <span class="keyword">struct</span> post *first_post;</span><br><span class="line">    <span class="keyword">struct</span> user *friends[MAX_FRIENDS];</span><br><span class="line">    <span class="keyword">struct</span> user *next;</span><br><span class="line">&#125; User;</span><br></pre></td></tr></table></figure>
<ul>
<li>Difference between <code>memcpy</code> and <code>strcpy</code>. <code>strcpy</code> will stop when meeting a â€˜\0â€™ line terminator, while <code>memcpy</code> will not do that, it can do the content copy without looking to the value of the contents.</li>
</ul>
<h2 id="Bugs_remaining_to_fix">Bugs remaining to fix</h2><ul>
<li>time.h. I finally do a trick to cover up the failure of using time.h. we are supposed to record the time when a post is created, and store the address of that <code>time_t</code>, which is actually a long int, to the struct attribute <code>post-&gt;date</code>, while it fails to display the right time when doing <code>ctime</code> in <code>print_user</code> function. I finally insert a time update right into the <code>print_user</code> function to let them next to each other and it display right result?!.</li>
</ul>
]]></content>
    <summary type="html">
    <![CDATA[<p>åŸå‹æ˜¯æœ€è¿‘ä¸€é—¨è¯¾çš„ä½œä¸šï¼Œ è¿™æ˜¯æˆ‘åœ¨è¿‡ç¨‹ä¸­è®°ä¸‹çš„ä¸€äº›æ‰‹è®°å¿ƒå¾—ï¼Œ éƒ½æ˜¯æˆ‘è®¤ä¸ºæ˜¯å€¼å¾—å…³æ³¨çš„åœ°æ–¹ã€‚ æœªæ¥ä¼šæŠŠè¿™äº›åç«¯å‡½æ•°åŠ å…¥TCPåè®®ï¼Œ æ›´è´´è¿‘å®æˆ˜ä½¿ç”¨å§ã€‚åŸºç¡€çš„æ•°æ®ç»“æ„ä¸»è¦æ˜¯é“¾è¡¨ï¼Œ ç®—æ˜¯ç”¨Cè‡ªå·±å†å¤ä¹ ä¸€éé“¾è¡¨å®ç°ã€‚ç®—æ³•å˜›ï¼Ÿæ²¡æœ‰ç®—æ³•ğŸ˜‚ä¸éœ€è¦è€ƒè™‘æ€§èƒ½ä¹Ÿå°±æ²¡æœ‰è€ƒè™‘ç®—æ³•ä¼˜åŒ–å’¯ã€‚</p>]]>
    
    </summary>
    
      <category term="C" scheme="http://chocoluffy.com/tags/C/"/>
    
      <category term="æŠ€æœ¯" scheme="http://chocoluffy.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[Responsive web design[ç¬¬ä¸‰æœŸ]-jsåŠ¨ç”»]]></title>
    <link href="http://chocoluffy.com/2016/02/04/Responsive-web-design-%E7%AC%AC%E4%B8%89%E6%9C%9F-js%E5%8A%A8%E7%94%BB/"/>
    <id>http://chocoluffy.com/2016/02/04/Responsive-web-design-ç¬¬ä¸‰æœŸ-jsåŠ¨ç”»/</id>
    <published>2016-02-05T01:48:22.000Z</published>
    <updated>2016-02-05T01:55:38.000Z</updated>
    <content type="html"><![CDATA[<p>Introduce greensock library to javascript, along with GPU acceleration to create high-quality and smooth animations. </p>
<a id="more"></a>
<h2 id="Introduction">Introduction</h2><p>å¾ˆå¤šå‰ç«¯å¼€å‘è€…ä¼šå‘Šè¯‰ä½ ï¼Œä½ åº”è¯¥é¿å…ä½¿ç”¨ JavaScript åŠ¨ç”»ã€‚ä½¿ç”¨ CSS åŠ¨ç”»ä¼šæœ‰æ›´å¥½çš„æ€§èƒ½ï¼ˆæ›´å°‘çš„ CPU æ—¶é—´ï¼‰å’Œæ›´å¹³æ»‘çš„æ•ˆæœï¼ˆæ›´é«˜çš„å¸§ç‡ï¼‰ã€‚</p>
<p>ç„¶è€Œï¼ŒJavaScript åŠ¨ç”»æ…¢çš„åŸå› ç»å¸¸æ˜¯å› ä¸ºä½ ç”¨çš„åº“å¹¶æ²¡æœ‰ä¸ºåŠ¨ç”»è¿›è¡Œä¼˜åŒ–ã€‚ä¼˜åŒ–è¿‡çš„ JavaScript åŠ¨ç”»å¼•æ“ï¼ˆæ¯”å¦‚ GreenSock æˆ– Velocity.jsï¼‰æœ‰å ªæ¯” CSS åŠ¨ç”»çš„æ€§èƒ½ã€‚æŸäº›æƒ…å†µä¸‹ JS åŠ¨ç”»ç”šè‡³æ¯” CSS åŠ¨ç”»æ›´å¿«ï¼å¯å‚è€ƒä¸‹é¢è¿™ä¸ªæ€§èƒ½çš„æ¯”è¾ƒï¼Œ æœ€åå‘ç°åœ¨æŸäº›æƒ…å†µä¸‹greensockçš„æ€§èƒ½ä¼šæ¯”jqueryå¥½ä¸Š5-6å€</p>
<ul>
<li><a href="https://www.greensock.com/js/speed.html" target="_blank" rel="external">greensock</a> </li>
</ul>
<h2 id="å¼•å…¥greensock_jsåº“">å¼•å…¥greensock jsåº“</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">TweenMax.fromTo(<span class="string">"#box"</span>,<span class="number">1</span>, &#123;</span><br><span class="line">    <span class="comment">// from</span></span><br><span class="line">    css: &#123;</span><br><span class="line">      left: <span class="string">"-200px"</span>,</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,&#123;</span><br><span class="line">    <span class="comment">// to</span></span><br><span class="line">    css: &#123;</span><br><span class="line">      left: <span class="string">"200px"</span>,</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ°¸ä¹…é‡å¤åŠ¨ç”»çš„é€‰é¡¹</span></span><br><span class="line">    repeat: -<span class="number">1</span>,</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åè½¬ã€é‡æ–°è¿è¡ŒåŠ¨ç”»çš„é€‰é¡¹</span></span><br><span class="line">    yoyo: <span class="literal">true</span>,</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ”¹å˜ easing ç±»å‹</span></span><br><span class="line">    ease: Power2.easeInOut,</span><br><span class="line">  &#125;</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<blockquote>
<p>ä»€ä¹ˆæ˜¯fps? å¸§ç‡æˆ–ç”»é¢æ›´æ–°ç‡æ˜¯ç”¨äºæµ‹é‡æ˜¾ç¤ºå¸§æ•°çš„é‡åº¦[1]ã€‚æµ‹é‡å•ä½ä¸ºâ€œæ¯ç§’æ˜¾ç¤ºå¸§æ•°â€ï¼ˆFrame per Secondï¼ŒFPSï¼Œå¸§ç‡ï¼‰æˆ–â€œèµ«å…¹â€ï¼Œä¸€èˆ¬æ¥è¯´FPSç”¨äºæè¿°å½±ç‰‡ã€ç”µå­ç»˜å›¾æˆ–æ¸¸æˆæ¯ç§’æ’­æ”¾å¤šå°‘å¸§ï¼Œè€Œèµ«å…¹åˆ™æè¿°æ˜¾ç¤ºå±çš„ç”»é¢æ¯ç§’æ›´æ–°å¤šå°‘æ¬¡ã€‚<br>ç”±äºäººç±»çœ¼ç›çš„ç‰¹æ®Šç”Ÿç†ç»“æ„ï¼Œå¦‚æœæ‰€çœ‹ç”»é¢ä¹‹å¸§ç‡é«˜äºæ¯ç§’çº¦10-12å¸§çš„æ—¶å€™ï¼Œå°±ä¼šè®¤ä¸ºæ˜¯è¿è´¯çš„[2]ï¼Œ æ­¤ç°è±¡ç§°ä¹‹ä¸ºè§†è§‰æš‚ç•™ã€‚è¿™ä¹Ÿå°±æ˜¯ä¸ºä»€ä¹ˆç”µå½±èƒ¶ç‰‡æ˜¯ä¸€æ ¼ä¸€æ ¼æ‹æ‘„å‡ºæ¥ï¼Œç„¶åå¿«é€Ÿæ’­æ”¾çš„ã€‚ä½†30å¸§ä»…ä»…æ˜¯æµç•…ï¼Œè€Œéå¹³æ»‘è¿ç»­ï¼Œå› æ­¤æœ‰æ›´å¤šå¸§ç‡çš„äº§å“æ¨å‡ºä¹Ÿå°±ä¸è¶³ä¸ºå¥‡äº†ã€‚<br>æœ‰å£°ç”µå½±çš„æ‹æ‘„åŠæ’­æ”¾å¸§ç‡å‡ä¸ºæ¯ç§’24å¸§ï¼Œå¯¹ä¸€èˆ¬äººè€Œè¨€å·²ç®—å¯æ¥å—ï¼Œä½†å¯¹æ—©æœŸçš„é«˜åŠ¨æ€ç”µå­æ¸¸æˆï¼Œå°¤å…¶æ˜¯å°„å‡»æ¸¸æˆæˆ–ç«é€Ÿæ¸¸æˆæ¥è¯´ï¼Œå¸§ç‡å°‘äºæ¯ç§’30å¸§çš„è¯ï¼Œæ¸¸æˆå°±ä¼šæ˜¾å¾—ä¸è¿è´¯ï¼Œè¿™æ˜¯å› ä¸ºç”µè„‘ä¼šå‡†ç¡®åœ°æ˜¾ç¤ºç¬æ—¶çš„ç”»é¢ï¼ˆåƒæ˜¯ä¸€å°å¿«é—¨é€Ÿåº¦æ— é™å¤§çš„ç›¸æœºï¼‰ï¼Œæ²¡æœ‰åŠ¨æ€æ¨¡ç³Šä½¿æµç•…åº¦é™ä½ã€‚è€Œä½¿ç”¨ç›¸åŒå¸§ç‡çš„æ‘„å½±æœºæ‹æ‘„ç‰©ä½“ç§»åŠ¨æ—¶ï¼Œè¯¥åœºæ™¯çš„è§†é¢‘å¿…å®šä¼šè¡¨ç°æ‰€æœ‰ç§»åŠ¨ç‰©ä½“åœ¨æ›å…‰æ—¶é—´å†…æ‰€æœ‰ä½ç½®çš„å®Œæ•´ç»„åˆã€‚å› æ­¤å¾ˆå¤šæ–°ä¸–ä»£ç”µç©æ¸¸æˆä»¥åŠ¨æ€æ¨¡ç³Šä¸ºç‰¹è‰²ã€‚åœ¨å®é™…ä½“éªŒä¸­ï¼Œ60å¸§ç›¸å¯¹äº30å¸§æœ‰ç€æ›´å¥½çš„ä½“éªŒã€‚</p>
</blockquote>
<p>åœ¨app.jsé‡Œé¢æˆ‘ä»¬ç”¨yæ¥è¡¨ç°å‡ºå‚ç›´çŠ¶æ€çš„å˜åŒ–</p>
<figure class="highlight xquery"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> animateLogo()&#123;</span><br><span class="line">	TweenMax.fromTo(<span class="string">"#logo"</span>, <span class="number">2.5</span>, &#123;</span><br><span class="line">		css: &#123;</span><br><span class="line">			y: <span class="string">"-30px"</span>,</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;, &#123;</span><br><span class="line">		css: &#123;</span><br><span class="line">			y: <span class="string">"20px"</span>,</span><br><span class="line">		&#125;,</span><br><span class="line"></span><br><span class="line">		repeat: -<span class="number">1</span>,</span><br><span class="line">		yoyo: true,</span><br><span class="line">		ease: Sine.easeInOut,</span><br><span class="line">	&#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="GPUåŠ é€Ÿ">GPUåŠ é€Ÿ</h2><p>ä½ å¯ä»¥æŠŠä¸€ä¸ªç½‘é¡µæƒ³è±¡ä¸ºä¸€å †çŸ©å½¢ã€‚å¸ƒå±€å’Œç»˜å›¾éƒ½æ˜¯ç”± CPU å®Œæˆçš„ï¼š</p>
<p>CPU è®¡ç®—è¿™äº›çŸ©å½¢çš„å¸ƒå±€ã€‚çŸ©å½¢åœ¨å“ªé‡Œï¼Ÿå®ƒä»¬æœ‰å¤šå¤§ï¼Ÿ<br>CPU æŠŠçŸ©å½¢æ¸²æŸ“æˆç‚¹é˜µä½å›¾ï¼ˆbitmapï¼‰ã€‚<br>ä¹‹åå¦‚æœå¯èƒ½çš„è¯ï¼ŒçŸ©å½¢è¢«é€åˆ° GPU ä»¥è·å¾—æ›´å¥½çš„æ€§èƒ½ï¼š</p>
<p>CPU ä»¥ç‚¹é˜µä½å›¾çš„å½¢å¼ä¸Šä¼ åˆ° GPU ä¸­ã€‚<br>CPU ç»™ GPU å‘é€æŒ‡ä»¤å»å¤„ç†è¿™äº›ä½å›¾ã€‚å¯èƒ½æœ‰å¹³ç§»/ç¼©æ”¾/æ—‹è½¬ï¼Œä¿®æ”¹é€æ˜åº¦ï¼Œç­‰ç­‰ã€‚<br>GPU ä¸ºä»€ä¹ˆæ¯” CPU å¿«å‘¢ï¼Ÿå‡è®¾æˆ‘ä»¬æŠŠä¸€ä¸ªçº¢è‰²ç‚¹é˜µå’Œä¸€ä¸ªç»¿è‰²ç‚¹é˜µç»“åˆï¼ŒCPU ä¸å¾—ä¸ä¸€ä¸ªä¸€ä¸ªåƒç´ åœ°åš.</p>
<p>æ€»çš„æ¥è¯´ï¼Œå½“ä¿®æ”¹ CSS å±æ€§æ—¶ï¼Œæœ‰ä¸‰ç§å¯èƒ½çš„å¼€é”€ï¼š</p>
<p>é‡æ’ï¼ˆCPUã€‚ä»£ä»·æœ€é«˜ï¼‰ã€‚<br>é‡ç»˜ï¼ˆCPUï¼‰ã€‚<br>å˜æ¢, æ—‹è½¬, ç¼©æ”¾, é€æ˜åº¦ï¼ˆGPUï¼Œä»£ä»·æœ€ä½ï¼‰ã€‚</p>
<p>å› æ­¤åœ¨ä½¿ç”¨transformçš„æ—¶å€™ï¼Œ æˆ‘ä»¬å¸¸å¸¸ç”¨yåœ¨è¡¨ç¤ºå‚ç›´æ–¹å‘çš„ç§»åŠ¨ï¼Œè¿™ä¹ˆåšæ˜¯ä¸ä¼šé‡æ–°æ’åˆ—å¸ƒå±€çš„ï¼Œ è€Œæ˜¯åœ¨å±€éƒ¨ä½ç½®åç§»ã€‚</p>
<blockquote>
<p>æ³¨æ„ï¼š left åªå¯¹ position: absolute ç”Ÿæ•ˆ </p>
</blockquote>
<p>transform çš„åŸç†æ˜¯ç”±å…ƒç´ çš„å®šä½ä½ç½®ï¼ˆabsolute or relative) åç§»ã€‚<br>ç”¨ GreenSocks å»ä¿®æ”¹ left çš„è¯æ˜¯æ”¹å˜å®šä½ä½ç½®ã€‚<br>ä¹Ÿå°±æ˜¯è¯´ left çš„åŠ¨ç”»æ”¹å˜å¸ƒå±€ï¼Œä½† transform åŠ¨ç”»ä¸ä¼šæ”¹å˜å¸ƒå±€ã€‚</p>
<h2 id="å¤šæ­¥éª¤åŠ¨ç”»">å¤šæ­¥éª¤åŠ¨ç”»</h2><figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> t = <span class="keyword">new</span> TimelineMax();</span><br><span class="line">t.<span class="keyword">to</span>(<span class="string">"<span class="subst">#box</span>"</span>,<span class="number">1</span>,&#123;<span class="attribute">x</span>: <span class="number">200</span>&#125;)</span><br><span class="line">  .<span class="keyword">to</span>(<span class="string">"<span class="subst">#box</span>"</span>,<span class="number">0.5</span>,&#123;<span class="attribute">rotation</span>: <span class="string">"360deg"</span>&#125;)</span><br><span class="line">  .<span class="keyword">to</span>(<span class="string">"<span class="subst">#box</span>"</span>,<span class="number">1</span>,&#123;<span class="attribute">y</span>: <span class="number">100</span>&#125;)</span><br><span class="line">  .<span class="keyword">to</span>(<span class="string">"<span class="subst">#box</span>"</span>,<span class="number">0.5</span>,&#123;<span class="attribute">rotation</span>: <span class="string">"-=360deg"</span>&#125;);</span><br></pre></td></tr></table></figure>
<h2 id="æŒ‡ç¤ºå™¨(æ»šåŠ¨æŒ‡ç¤ºæ¡)">æŒ‡ç¤ºå™¨(æ»šåŠ¨æŒ‡ç¤ºæ¡)</h2><p>å½“çª—å£æ»šåŠ¨æ—¶, ä½ å¯ä»¥ç”¨ window.scrollY æ¥ç®—å‡ºçª—å£æ­£åœ¨å±•ç¤ºçš„æ˜¯å“ªä¸€éƒ¨åˆ†ã€‚é‚£ä¹ˆç°åœ¨çš„é‡ç‚¹å°±åœ¨äºï¼Œ æ€æ ·å¯ä»¥è·å¾—å…³äºå…ƒç´ æ‰€åœ¨ä½ç½®ï¼Œ é«˜åº¦çš„å„ç§å±æ€§ï¼Œ æ¯”å¦‚<code>scrollY</code>, <code>offsetHeight</code>, <code>offsetTop</code></p>
<ul>
<li><a href="http://stackoverflow.com/questions/6777506/offsettop-vs-jquery-offset-top/21880020#21880020" target="_blank" rel="external">offsetçš„å„ç§ç”¨æ³•å®ä¾‹</a></li>
</ul>
<h2 id="å–æ¶ˆlinké»˜è®¤è¡Œä¸º">å–æ¶ˆlinké»˜è®¤è¡Œä¸º</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">addSmoothScrolling</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">	<span class="keyword">var</span> links = <span class="built_in">document</span>.querySelectorAll(<span class="string">"#slider-control a"</span>);</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>; i&lt;links.length; i++)&#123;</span><br><span class="line">		<span class="keyword">var</span> link = links[i];</span><br><span class="line">		<span class="keyword">var</span> section = <span class="built_in">document</span>.querySelectorAll(<span class="string">"div.section"</span>)[i];</span><br><span class="line">		(<span class="function"><span class="keyword">function</span>(<span class="params">sec</span>)</span>&#123;</span><br><span class="line">			<span class="comment">// console.log(sec);</span></span><br><span class="line">			link.addEventListener(<span class="string">"click"</span>, <span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;</span><br><span class="line">				<span class="comment">// console.log(sec.offsetTop+"px");</span></span><br><span class="line">				scrollToElement(sec);</span><br><span class="line">				e.preventDefault();</span><br><span class="line">			&#125;)</span><br><span class="line">		&#125;)(section)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>é¦–å…ˆç”¨ä¸€ä¸ªé—­åŒ…æ¥ä¿è¯ï¼Œ é‡Œé¢çš„å‡½æ•°åœ¨clickçš„æ—¶å€™æ‰ä¹‹è¡Œï¼Œ è€Œåœ¨é‚£ä¸ªæ—¶å€™ï¼Œ i å·²ç»åˆ°äº†æœ€åä¸€ä¸ªlinkçš„ä½ç½®ï¼Œ æ‰€ä»¥å¿…é¡»æå‰æ‰¾åˆ°å¯¹åº”çš„sectionï¼Œ ç„¶ååœ¨é—­åŒ…ä¸­ä¼ å…¥ã€‚ åŒæ—¶éœ€è¦åœ¨clickäº‹ä»¶çš„æœ€ååŠ ä¸Šä¸€ä¸ªe.preventDefaultï¼Œ æ¥é˜»æ­¢linkçš„é»˜è®¤è¡Œä¸ºï¼Œ linkçš„é»˜è®¤è¡Œä¸ºæ˜¯ç›´æ¥è·³è½¬ï¼Œ ç„¶åæˆ‘ä»¬éœ€è¦åŠ¨ç”»æ¥è¾…åŠ©ã€‚</p>
]]></content>
    <summary type="html">
    <![CDATA[<p>Introduce greensock library to javascript, along with GPU acceleration to create high-quality and smooth animations. </p>]]>
    
    </summary>
    
      <category term="javascript" scheme="http://chocoluffy.com/tags/javascript/"/>
    
      <category term="web design" scheme="http://chocoluffy.com/tags/web-design/"/>
    
      <category term="æŠ€æœ¯" scheme="http://chocoluffy.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[Memory allocation in C]]></title>
    <link href="http://chocoluffy.com/2016/01/26/Memory-allocation-in-C/"/>
    <id>http://chocoluffy.com/2016/01/26/Memory-allocation-in-C/</id>
    <published>2016-01-26T22:36:34.000Z</published>
    <updated>2016-02-01T14:52:04.000Z</updated>
    <content type="html"><![CDATA[<p>Learning memory allocation in C for beginners will be totally a pain. This post, distilled from course materials, will provide you a practice guide and example coding snippets to help you learning more and fast in C programming language. It is cherishable, at least to me :)</p>
<a id="more"></a>
<h2 id="Introduction_to_malloc">Introduction to malloc</h2><ul>
<li>Variable defined in function will be stored in stack, so how to use that part of memory after function returns? we use <code>void * malloc(size_t size)</code> will allocate memory in heap. This function will remain the memory for the variables until the function explicitly deallocate them. The argument for this function indicates how many bytes of memory should it allocate.</li>
<li>In general, <code>size_t</code> is unsigned_int. Notice the <code>void *</code> type of the pointer, we know that in C, add 1 to a pointer will go to the next legal address, for <code>int*</code>, it is the next integer, for <code>char*</code>, it is next character.</li>
<li>A void pointer is a pointer that represent a generic type. It just points to the memory specified, so it do not need to specify right now what type of that memory is, instead, we will declare the type when use pointer:</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> * pt = <span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(<span class="keyword">int</span>));</span><br></pre></td></tr></table></figure>
<p>the above code indicates that we will the allocated memory for integer. </p>
<h2 id="Example_code">Example code</h2><figure class="highlight nimrod"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#include &lt;stdio.h&gt;</span></span><br><span class="line"><span class="comment">#include &lt;stdlib.h&gt;</span></span><br><span class="line"></span><br><span class="line">/* </span><br><span class="line"> * <span class="type">Return</span> an <span class="type">array</span> <span class="keyword">of</span> the squares <span class="keyword">from</span> <span class="number">1</span> to max_val.</span><br><span class="line"> */</span><br><span class="line"><span class="type">int</span> *squares(<span class="type">int</span> max_val) &#123;</span><br><span class="line">    <span class="type">int</span> *<span class="literal">result</span> = malloc(sizeof(<span class="type">int</span>) * max_val);</span><br><span class="line">    <span class="type">int</span> i;</span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">1</span>; i &lt;= max_val; i++) &#123;</span><br><span class="line">        <span class="literal">result</span>[i - <span class="number">1</span>] = i * i ;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">result</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> main() &#123;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> *squares_to_10 = squares(<span class="number">10</span>);</span><br><span class="line">    </span><br><span class="line">    // <span class="keyword">let</span>'s print them <span class="keyword">out</span> </span><br><span class="line">    <span class="type">int</span> i;</span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">        printf(<span class="string">"%d\t"</span>, squares_to_10[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    printf(<span class="string">"\n"</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Note that in the above code, there are several variables that are located in heap. They are, the address store inside the variable result, since it points to a integer that lies in heap, while <strong>the addresss of the variable result is not in the heap, it is in the stack</strong>. One quick trick is that those value in heap, their address is valid. </p>
<h2 id="Explicitly_deallocate_the_memory">Explicitly deallocate the memory</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="preprocessor">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="preprocessor">#<span class="keyword">include</span> <span class="string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">play_with_memory</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> i;</span><br><span class="line">    <span class="keyword">int</span> *pt = <span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(<span class="keyword">int</span>));</span><br><span class="line"></span><br><span class="line">    i = <span class="number">15</span>;</span><br><span class="line">    *pt = <span class="number">49</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// What happens if you comment out this call to free?</span></span><br><span class="line">    <span class="built_in">free</span>(pt);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// What happens if you uncomment these statements?</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, *pt); <span class="comment">// output 49</span></span><br><span class="line">    *pt = <span class="number">7</span>;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, *pt); <span class="comment">// output 7</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    play_with_memory();</span><br><span class="line">    play_with_memory();</span><br><span class="line">    play_with_memory();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>Important issue here: when returned from the function, all variables will be freed from stack, which means that the <code>i</code> and <code>result</code> in the above code will be removed. It will cause a memory leak if we forget to link the memory from <code>malloc</code> to other heap variables. Since there will be no way from elsewhere to access that part of memory.</p>
</blockquote>
<ul>
<li>The danger of memory leak is that if it accumulates, it will finally cause a <code>out of memory</code> issue.</li>
<li>what happens if we print out the value stored in that memory location after we free up that pointer? <strong>Address is still valid and the value can still be accessed, but this time, we are using the part of memory that does not belong to us</strong>. Note that using unallocated memory is OK in some cases, but it will be dangerous when that part of memory being reallocated. So, always use allocated memory!</li>
</ul>
<h2 id="Passing_values">Passing values</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="preprocessor">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="preprocessor">#<span class="keyword">include</span> <span class="string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">helper</span><span class="params">(<span class="keyword">int</span> **arr_matey)</span> </span>&#123;</span><br><span class="line">   <span class="comment">// let's make an array of 3 integers on the heap</span></span><br><span class="line">   *arr_matey = <span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(<span class="keyword">int</span>) * <span class="number">3</span>);</span><br><span class="line"></span><br><span class="line">   <span class="keyword">int</span> *arr = *arr_matey;</span><br><span class="line">   arr[<span class="number">0</span>] = <span class="number">18</span>;</span><br><span class="line">   arr[<span class="number">1</span>] = <span class="number">21</span>;</span><br><span class="line">   arr[<span class="number">2</span>] = <span class="number">23</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> *data;</span><br><span class="line">    helper(&amp;data);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// let's just access one of them for demonstration</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"the middle value: %d\n"</span>, data[<span class="number">1</span>]);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">free</span>(data);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>there are basically two ways to help to avoid memory leak, a) <strong>return value</strong>, if we define that function type to be a pointer type, so that we can return the pointer in order to assign the values in main function. b) <strong>argument</strong>, we pass the one we want to assign values to the function and do the assigning part inside that function, and this time, the function type can be void but still finish the task.</li>
<li>However, it is much harder to use <code>argument</code> one since in C, the changes inside the function will not be preserved if we return nothing. Therefore, we need to the â€œaddress-valueâ€ relation in such scenario â€“ That is <strong>we pass in pointer, we change value pointed at pointer, without returning anything, and weâ€™re done.</strong> While problem comes when we want to change the pointer, say this line <code>*arr_matey = malloc(sizeof(int) * 3);</code>, we want to change the pointer now, but such change will not be preserved after function. Therefore, we will need to pass in a <strong>â€œpoiter of pointerâ€ to deal with pointer assignment!</strong> </li>
</ul>
<h2 id="Nested_structure">Nested structure</h2><p>if we want to use a nested struture to represent an array, say in that array, each element points to another array, since we donâ€™t know that array size at compilation time, we would use <code>malloc</code> to allocate memory for those int array. The code is like</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> ** pt = <span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(<span class="keyword">int</span>*)*<span class="number">2</span>);</span><br></pre></td></tr></table></figure>
<p>Say, now, I want the pt[0] to hold up an array of one integer, the way to do that is to use:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pt[<span class="number">0</span>] = <span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(<span class="keyword">int</span>));</span><br></pre></td></tr></table></figure>
<p>Similarly, if we want pt[1] to hold up 3 integers, we would use:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pt[<span class="number">1</span>] = <span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(<span class="keyword">int</span>)*<span class="number">3</span>);</span><br></pre></td></tr></table></figure>
<blockquote>
<p>Note that when we free those pointers, we need to free the innermost pointer first then outer one. </p>
</blockquote>
<p>An complete code example:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="preprocessor">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="preprocessor">#<span class="keyword">include</span> <span class="string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// this allocates space for the 2 pointers</span></span><br><span class="line">    <span class="keyword">int</span> **pointers = <span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(<span class="keyword">int</span> *) * <span class="number">2</span>); </span><br><span class="line">    <span class="comment">// the first pointer points to a single integer</span></span><br><span class="line">    pointers[<span class="number">0</span>] = <span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(<span class="keyword">int</span>));</span><br><span class="line">    <span class="comment">// the second pointer pointes to an array of 3 integers</span></span><br><span class="line">    pointers[<span class="number">1</span>] = <span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(<span class="keyword">int</span>) * <span class="number">3</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// let's set their values</span></span><br><span class="line">    *pointers[<span class="number">0</span>] = <span class="number">55</span>;</span><br><span class="line"></span><br><span class="line">    pointers[<span class="number">1</span>][<span class="number">0</span>] = <span class="number">100</span>;</span><br><span class="line">    pointers[<span class="number">1</span>][<span class="number">1</span>] = <span class="number">200</span>;</span><br><span class="line">    pointers[<span class="number">1</span>][<span class="number">2</span>] = <span class="number">300</span>;</span><br><span class="line"></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// do other stuff with this memory</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// now time to free the memory as we are finished with the data-structure</span></span><br><span class="line">    <span class="comment">// first we need to free the inner pieces</span></span><br><span class="line">    <span class="built_in">free</span>(pointers[<span class="number">0</span>]);</span><br><span class="line">    <span class="built_in">free</span>(pointers[<span class="number">1</span>]);</span><br><span class="line">    <span class="comment">// now we can free the space to hold the array of pointers themselves</span></span><br><span class="line">    <span class="built_in">free</span>(pointers);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="Memory_model">Memory model</h2><ul>
<li>note that th variable in main function does not belong to global variable, indicating it should still go to the stack part. The â€œglobal dataâ€ part contains mainly three stuff: <strong>a) global variables, b) string literals </strong> Note that for the string literals, the code like this: <code>char* str = &quot;Hello world!&quot;;</code> can lie in a local function, it just means that the pointer str can be in the stack, while the string literal â€œHello world!â€ is in global data part. </li>
<li>And dynamic memory allocation lie in heap.</li>
</ul>
<h2 id="String">String</h2><ul>
<li><p>difference between a string and a character is that at the end of string, there is a <code>\0</code> as an ending signal. Once the character array declared, the size is fixed. Note that the difference between these similar version of declaring character array:</p>
<ul>
<li><code>char string[20] = &quot;cool shit&quot;</code>, it is defining a <strong>string variable</strong>, with a <code>\0</code> at the end of the array, note that there will be a lot of <code>\0</code> following the valid words. It can be changed afterwards.</li>
<li><code>char string[] = &quot;cool shit&quot;</code>, defining a <strong>string variable</strong> the size will be fixed according to the first assignment. It can be changed afterwards.</li>
<li><code>char* string = &quot;cool shit&quot;</code>, defining a <strong>string constant</strong>. it is a string literal! cannot be changed!! If you change the string, it will give a â€œbus errorâ€. Main point here: <em> <strong>it makes string point to a read-only memory where string literal is stored, while the above two way are indeed allocating memory and copy string to them.</strong></em></li>
</ul>
</li>
<li><p>difference between <code>strlen</code> and <code>sizeof</code>. <code>strlen</code> will return the valid number of characters before null character, while <code>sizeof</code> will just give you the size of whole char array including null characters.</p>
</li>
<li><p>use <code>strncpy</code> as a stable counterpart of <code>strcpy</code>, the usage is like: <code>strncpy(s1, s2, sizeof(s1));</code> see the complete code below, s2 is a string literal. </p>
</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="preprocessor">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="preprocessor">#<span class="keyword">include</span> <span class="string">&lt;string.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">char</span> s1[<span class="number">5</span>];</span><br><span class="line">    <span class="keyword">char</span> s2[<span class="number">32</span>] = <span class="string">"University of"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// This is unsafe because s1 may not have enough space</span></span><br><span class="line">    <span class="comment">// to hold all the characters copied from s2.</span></span><br><span class="line">    <span class="comment">//strcpy(s1, s2);</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// This doesn't necessarily null-terminate s1 if there isn't space.</span></span><br><span class="line">    <span class="built_in">strncpy</span>(s1, s2, <span class="keyword">sizeof</span>(s1));</span><br><span class="line">    <span class="comment">// So we explicitly terminate s1 by setting a null-terminator.</span></span><br><span class="line">    s1[<span class="number">4</span>] = <span class="string">'\0'</span>;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%s\n"</span>, s1);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%s\n"</span>, s2);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>Note that s1 is a character array, which means that there is no null characters at the end. if we want to do this way, we want to add null character at the end.</p>
</blockquote>
<ul>
<li>Similarly, <code>strncat(s1, s3, sizeof(s1)-strlen(s1)-1);</code> is the stable version of using strcpy.</li>
<li><code>char * strchr(const char s, int c);</code> return the index at the first occurence of the character</li>
<li><code>char * strstr(const char* s1, const char* s2);</code> find sub string. see the code example below:</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="preprocessor">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="preprocessor">#<span class="keyword">include</span> <span class="string">&lt;string.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">char</span> s1[<span class="number">30</span>] = <span class="string">"University of C Programming"</span>;</span><br><span class="line">    <span class="keyword">char</span> *p;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// find the index of the first 'v'</span></span><br><span class="line">    p = <span class="built_in">strchr</span>(s1, <span class="string">'v'</span>);</span><br><span class="line">    <span class="keyword">if</span> (p == <span class="literal">NULL</span>) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"Character not found\n"</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"Character found at index %ld\n"</span>, p - s1);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// find the first token (up to the first space)</span></span><br><span class="line">    p = <span class="built_in">strchr</span>(s1, <span class="string">' '</span>);</span><br><span class="line">    <span class="keyword">if</span> (p != <span class="literal">NULL</span>) &#123;</span><br><span class="line">        *p = <span class="string">'\0'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%s\n"</span>, s1);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>if the character specified in the second argument cannot find the right place, then it will assign NULL to p in this case. We can use pointer subtraction to get the index. </p>
<blockquote>
<p>åè®°ï¼š æ¬¢è¿åŠ å…¥æˆ‘çš„ç§äººå…¬ä¼—å·ï¼Œ å’Œä½ åˆ†äº«æˆ‘æ€è€ƒçš„è§‚ç‚¹å’Œæ–‡ç« ï¼š<br><img src="http://ww2.sinaimg.cn/large/c5ee78b5gw1ezbljkk2apj20by0byq3q.jpg" alt="å…¬ä¼—å·äºŒç»´ç "></p>
</blockquote>
]]></content>
    <summary type="html">
    <![CDATA[<p>Learning memory allocation in C for beginners will be totally a pain. This post, distilled from course materials, will provide you a practice guide and example coding snippets to help you learning more and fast in C programming language. It is cherishable, at least to me :)</p>]]>
    
    </summary>
    
      <category term="C" scheme="http://chocoluffy.com/tags/C/"/>
    
      <category term="æŠ€æœ¯" scheme="http://chocoluffy.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[è±¡å¾ä¸ç¬¦å·]]></title>
    <link href="http://chocoluffy.com/2016/01/23/%E8%B1%A1%E5%BE%81%E4%B8%8E%E7%AC%A6%E5%8F%B7/"/>
    <id>http://chocoluffy.com/2016/01/23/è±¡å¾ä¸ç¬¦å·/</id>
    <published>2016-01-24T04:05:53.000Z</published>
    <updated>2016-03-23T15:15:06.000Z</updated>
    <content type="html"><![CDATA[<p>æ˜¯ä»€ä¹ˆï¼Œ åœ¨æµè¡€ã€‚</p>
<a id="more"></a>
<p><img src="http://ww2.sinaimg.cn/large/c5ee78b5gw1f0agj99z92j20zk0zkajv.jpg" alt="mirror"></p>
<p>æ¯ä¸€ä¸ªåˆºè€³çš„åå¯¹å£°éŸ³ï¼Œ éƒ½å¾ˆå®¹æ˜“è¢«çœ‹ä½œæ˜¯ä¸€ç§è±¡å¾ï¼Œ ä¸å…¶è¯´æ˜¯è‡ªæ„¿åœ°èµ°ä¸Šé£å£æµªå°–ï¼Œ ä¸å¦‚è¯´ï¼Œ æ˜¯åœ¨å¤§ä¼—çš„ç‹‚æ¬¢å’Œå¹»æƒ³æ„æ·«é‡Œæ¼”å˜ä¸ºä¸€åœºæˆå‰§å¼çš„å‰‘æ‹”å¼©å¼ ã€‚ äººä»¬å¨±ä¹ç€ï¼Œ æ¶ˆé£ç€ï¼Œ åƒæ˜¯æœ‰äº†å°†å¸…æŒ‚é ç€çš„å°å…µè‚†æ„åœ°æŒ‘é€—ç€å¯¹æ‰‹çš„ç¥ç»ï¼Œ å…¨ç„¶ä¸è§‰è¯­æ°”é‡Œçš„å‚²æ…¢ä¸è‚¤æµ…ã€‚ æªå£æœ€åè¿˜æ˜¯èµ°ç«äº†ï¼Œ ä¸è¿‡çœ‹çƒ­é—¹çš„å°å…µæ—©å·²ä½œé¸Ÿå…½æ•£ï¼Œ ç•™ä¸‹æ›¾ç»å¸‚äº•èµ·ä¹‰é€æ¸èƒŒç¦»åˆè¡·çš„å°†å¸…ï¼Œ åœ¨ä¸€ç‰‡å“€å¹ä¸­ï¼Œ ä»˜å‡ºæ²‰é‡çš„ä»£ä»·ã€‚</p>
<p>å…³äºæŸ¥ç†å‘¨åˆŠçš„äº‹æƒ…ï¼Œ æˆ‘æƒ³è¯•ç€ä»ä¸€ä¸ªä¸é‚£ä¹ˆä¸»æµï¼Œ ä½†æ˜¯ä»ç„¶å¾ˆæœ‰è¶£çš„è§’åº¦å»æƒ³ï¼Œ ç©¶ç«Ÿä»€ä¹ˆæ˜¯è±¡å¾ï¼Œ æ˜¯ä»€ä¹ˆæ¨åŠ¨äº†å‡ºç°è±¡å¾æ€§ã€‚æ˜¯ä»€ä¹ˆè®©è¿™ç§å‘ˆç°å’Œä»£è¡¨å˜å¾—èºåŠ¨ä¸å®‰åˆéš¾ä»¥æŠ—æ‹’ã€‚ åˆæ˜¯ä»€ä¹ˆï¼Œ åœ¨æµè¡€ã€‚</p>
<p>é¦–å…ˆå¼•èµ·æˆ‘æ³¨æ„çš„æ˜¯è¿™å‡ å¥è¯</p>
<ul>
<li>â€œä¸€ç§æ²‰é‡çš„è±¡å¾ä¸»ä¹‰çš„é‡é‡â€”â€”åŸæœ¬å¹¶ä¸å­˜åœ¨äºæˆ‘ä»¬çš„æ¼«ç”»ä¸­ï¼Œä¹Ÿç¦»æˆ‘ä»¬å¾ˆè¿œçš„ä¸œè¥¿ï¼Œç°åœ¨è½åœ¨äº†æˆ‘ä»¬çš„è‚©ä¸Šã€‚â€</li>
<li>â€œå®é™…ä¸Šï¼Œã€ŠæŸ¥ç†å‘¨åˆŠã€‹ä¸€ç›´ä»¥æ¥éƒ½è‡´åŠ›äºåå¯¹è±¡å¾ä¸»ä¹‰ï¼šæˆ‘ä»¬æ‘§æ¯ç¬¦å·ï¼Œæ‰“ç ´ç¦å¿Œï¼Œå°†é‚£äº›å¹»æƒ³çš„æ³¡æ²«ç ´ç­ã€‚æˆ‘ä»¬å¾ˆé«˜å…´çœ‹åˆ°äººä»¬ç»™äºˆã€ŠæŸ¥ç†å‘¨åˆŠã€‹æ”¯æŒï¼Œä½†åŒæ—¶ä»–ä»¬çš„åšæ³•å´è·Ÿã€ŠæŸ¥ç†å‘¨åˆŠã€‹çš„åˆè¡·èƒŒé“è€Œé©°ã€‚â€</li>
<li>â€œä»»ä½•æ„ä¹‰çš„è±¡å¾ä¸»ä¹‰éƒ½èƒ½è¢«ä»»ä½•äººåˆ©ç”¨èµ·æ¥åšä»–ä»¬æƒ³åšçš„äº‹ã€‚â€</li>
</ul>
<p>æˆ‘æ¥ç€è”æƒ³åˆ°çš„æ˜¯ï¼Œ å¾ˆä¹…ä¹‹å‰çš„ä¸€ä¸ªå¤§æ–°é—»ï¼Œ æˆ´å®‰å¨œç‹å¦ƒä¹‹æ­»ã€‚ å¦‚æœå¤§å®¶è¿˜æœ‰å°è±¡ï¼Œ å½“æ—¶é‚£ä¸ªè½¦ç¥¸å‘ç”Ÿä¹‹åçš„å‡ å¤©ï¼Œ æ˜¯æ¥è¸µè€Œæ¥çš„é“ºå¤©ç›–åœ°å…³äºé‚ªæ¶çš„å°æŠ¥è®°è€…çš„è¯„è®ºï¼Œ å¤§å®¶æŒ‡è´£é‚£äº›è¿½é€åœ¨ç‹å¦ƒèº«åçš„ç‹—ä»”è®°è€…ä»¬ï¼Œ è®¤ä¸ºä»–ä»¬æ‰‹ä¸Šæ²¾æ»¡äº†é²œè¡€ï¼Œ è¦å¯¹å…¬ä¼—å¿ƒä¸­é‚£ä¸ªé«˜è´µä¼˜é›…çš„æˆ´å®‰å¨œç‹å¦ƒçš„äº‹æ•…è´Ÿä¸Šä¸å¯æ¨å¸çš„è´£ä»»ã€‚ ç„¶è€Œå¦‚æœä»”ç»†æ¨æ•²ï¼Œ æ¸´æœ›æ³¨è§†æˆ´å®‰å¨œç‹å¦ƒé«˜è´µè€Œä¼˜é›…çš„å½¢è±¡ï¼Œ åˆåœ¨å…¶é™¨ç­ä¹‹æ—¶æ¸´æ±‚å®‰æ…°çš„ï¼Œ ç©¶ç«Ÿæ˜¯é‚£äº›åŠªåŠ›æŒ–æ˜â€œéšç§â€çš„å°æŠ¥ï¼Œ è¿˜æ˜¯æ‹¥æœ‰ç€çª¥è§†ä»–äººç”Ÿæ´»çš„è¿™ä¸ªæˆ–è®¸è°ˆä¸ä¸Šå¼±ç‚¹çš„æœ¬èƒ½çš„å¤§ä¼—å‘¢ï¼Ÿè€Œé‚£äº›ç‹—ä»”å°æŠ¥ï¼Œ æˆ–è®¸åªæ˜¯å¸‚åœºçš„äº§ç‰©ï¼Œ åªæ˜¯äººä»¬æ„¿æ„çª¥è§†ï¼Œ å“ªæ€•åªæ˜¯å¯¹ä»–äººç”Ÿæ´»çš„ä¸€ç§ä¸æ¶æ„çš„å…³å¿ƒçš„è±¡å¾ã€‚ è€Œä¸€æ—¦é¡¶ä¸Šäº†è±¡å¾çš„å¤´è¡”ï¼Œ ä¹Ÿå®¹æ˜“åœ¨ä¸‡ä¼—æ³¨è§†ä¸‹æˆä¸ºç¬”ä¼å£è¯›çš„å¯¹è±¡ã€‚ æ¢å¥è¯è¯´ï¼Œ å¾ˆå¯èƒ½æ˜¯äººä»¬è¿™ç§ä¸å¿…ç„¶å…·å¤‡æ¶æ„çš„æ¬²æœ›ï¼Œ ä¿ƒæˆäº†é‚£ç§â€œæœ‰å®³â€çš„å°æŠ¥å’Œä»¤äººä»¬è®¨åŒçš„ç‹—ä»”è®°è€…ã€‚</p>
<p>å¬ä¸Šå»æŒºâ€œæ‚–è®ºâ€çš„ï¼Œ ä¸ºä»€ä¹ˆæ˜æ˜æ˜¯ä¸å¿…ç„¶æ¶æ„çš„ä¸œè¥¿ï¼Œ ä¼šè¡ç”Ÿå‡ºæœ‰å®³çš„ç»“æœã€‚ è€Œä¸ºä»€ä¹ˆï¼Œ ä¸»è§’éƒ½æ˜¯ä¼ åª’åª’ä½“ï¼Œ éƒ½æ˜¯ä¼ æ’­è€…ã€‚</p>
<p>äººä»¬é¥­å‰èŒ¶åçš„è°ˆèµ„ï¼Œ è‡ªå¤æ”¾è‚†å¾—ç”šè‡³æœ‰ç‚¹æ„šè ¢æœ‹å…‹çš„æ³•å¼å¹½é»˜ï¼Œ åˆçœŸå¾—èƒ½ç»å—å¾—ä½åª’ä½“æ”¾å¤§å™¨èˆ¬çš„ä¼ æ’­å—ï¼Ÿåª’ä½“å¾€å¾€æ˜¯è¨€è®ºè‡ªç”±å’Œæ–°é—»è‡ªç”±çš„è±¡å¾å’Œç¬¦å·ã€‚ ç¾å›½å®ªæ³•å²ä¸Šå¥½å‡ æ¬¡æœ€ç²¾å½©çš„åˆ¤å†³å’Œå®£åˆ¤éƒ½å’Œè¨€è®ºè‡ªç”±æœ‰å…³ï¼Œ è€Œå…³äºæ–°é—»è‡ªç”±å’Œæ¶‰åŠâ€œæ‰€è°“çš„æ”¿åºœå†…å¹•çš„é—´è°ç½ªâ€ä¹‹é—´çš„äº‰è®ºä¹Ÿä¸€ç›´ä¸ä¼šåœæ­¢ã€‚ äººä»¬ä¸å¸Œæœ›å—åˆ°æ¶æ„è¨€è®ºæ‰€å›°ï¼Œ å´åˆç•æƒ§åœ¨ä»»ä½•å½¢å¼ä¸Šçš„ç¦æ­¢å’Œå‹è¿«ä¸Šèµ°å¾—æ›´è¿œã€‚ è€Œåª’ä½“ï¼Œ åˆ™æ›´åƒä¸€ä¸ªæ‰©éŸ³å™¨ï¼Œ æ— è®ºæ˜¯ç§¯æè¿˜æ˜¯æ¶ˆæçš„å½±å“éƒ½ä¼šè¢«æ–½åŠ ä¸Šä»¤äººå–˜ä¸è¿‡æ°”çš„å‹è¿«åŠ›ã€‚ ä¸€ä¸ªæˆ‘èƒ½æƒ³åˆ°çš„ç†ç”±ï¼Œ ç„¶è€Œå¹¶ä¸æ–°é²œï¼Œ æ˜¯æ›´å¤šçš„äººä»¬åçˆ±å‰‘æ‹”å¼©å¼ å¤šè¿‡é²œèŠ±æŒå£°ï¼Œ åå¯¹å’Œåˆºè€³ï¼Œ å¸¦ç€å¼ ç€è¡€æ°”çš„çœ¼ç¥ï¼Œ æ¯”å†·é™å’Œæ— ä¸ºæ›´ä¸ºåˆºæ¿€å’Œçˆ½æ„Ÿã€‚ è€Œåª’ä½“ï¼Œ åªæ˜¯ä¸€æ¬¡æ¬¡è½¬å‘ä¼ é€’çš„æƒ…æ„Ÿç´¯ç§¯ï¼Œ åªæ˜¯åœ¨ä¸€åœºåœºäººç¾¤çš„ç‹‚æ¬¢ä¸­é‚£ä¸ªçƒ­æ°”æœå¤©çš„å¹¿åœºï¼Œ æ²¡æœ‰äº†äººç¾¤ï¼Œ æ²¡æœ‰äº†å’†å“®ï¼Œ ä¹Ÿå°±æ²¡æœ‰å®ƒæœ¬èº«å­˜åœ¨çš„æ„ä¹‰ã€‚</p>
<p>äººä»¬å¯ä»¥åœ¨è‡ªå·±çš„æœ¬èƒ½å’Œæ¬²æœ›ä¸­æ³¨è§†åˆ°è®¸å¤šè±¡å¾çš„ç¼˜ç”±ã€‚ æˆ–è®¸è±¡å¾æœ¬èº«ï¼Œ å°±æ˜¯äººä»¬æ‰€åŠ›æ‰€ä¸åŠå´æ˜¼å¤œç—´ç‹‚çš„ä¸€ç§ç¾¤ä½“è®°å¿†å§ã€‚è€Œæ²¡æœ‰äº†å›å“ï¼Œ ä¹Ÿå°±æ²¡æœ‰äº†æ„ä¹‰ã€‚</p>
<blockquote>
<p>åè®°ï¼š è¿™ç¯‡æ–‡ç« çš„å¤§éƒ¨åˆ†æ„æ¶æ˜¯æˆ‘åœ¨ç­‰åœ°é“çš„æ—¶å€™å¶ç„¶æƒ³åˆ°çš„ã€‚ ç¼˜äºè¯»ä¹¦å°ç»„çš„ä¸€æ¬¡ä¸»é¢˜è®¨è®ºï¼Œ çœ‹åˆ°æœ‹å‹åˆ†äº«çš„ä¸€ç¯‡æ–‡ç« ï¼Œ ç”±ä¸€äº›åªè¨€ç‰‡è¯­æ‰€å¯å‘æ‰€å¼•æ¥çš„ä¸€å †èƒ¡æ€ä¹±æƒ³ã€‚ æˆ–è®¸æˆ‘å¯ä»¥å†™å¾—æ›´åŠ è¯¦ç»†ä¸€ç‚¹ï¼Œ ä½†æ˜¯å¯èƒ½å¤§å®¶åœ¨è‡ªå·±æ€è€ƒçš„æ—¶å€™çš„æ‰€æ€æ‰€æƒ³ä¹Ÿå·²è¿œè¶…è¿‡æˆ‘çš„æ–‡ç¬”å’Œè§è§£ï¼Œ å¤šä¸€äº›ä½™åœ°ï¼Œ ä¹Ÿå¤šä¸€äº›å›å“çš„ç©ºé—´å˜›ã€‚è¶å‘¨æœ«çš„æ—¶å€™å†™ç‚¹æ–‡å­—çš„æ„Ÿè§‰è¿˜æ˜¯æå¥½çš„ï¼Œ æœ›åšæŒï¼æœ€åï¼Œ æœ¬æ–‡ä¸­å…³äºæˆ´å®‰å¨œç‹å¦ƒçš„ä¾‹å­é˜è¿°ï¼Œ ä¹Ÿæ˜¯å¯å‘äºä»¥å‰çœ‹åˆ°çš„åŒ—å¤§æ³•å­¦ç³»è‹åŠ›æ•™æˆå…³äºéšç§æƒçš„æ¢è®¨ï¼Œ è€Œé‚£äº›æ‘˜å½•çš„å¥å­ï¼Œ æ¥æºäºä¸‹é¢è¿™ç¯‡æœ‹å‹è½¬å‘çš„æ–‡ç« ã€‚é™„ä¸Šæˆ‘æ‰€å‚è€ƒçš„æ–‡ç« åŸæ–‡ã€‚</p>
</blockquote>
<h2 id="ã€ŠæŸ¥ç†å‘¨åˆŠã€‹å¹¸å­˜è€…ä¸“è®¿ï¼šæˆ‘ä»¬ä¸æ˜¯ä¸€ç§è±¡å¾ï¼Œæˆ‘ä»¬åªæ˜¯ä¸€æœ¬ç®€å•çš„æ¼«ç”»">ã€ŠæŸ¥ç†å‘¨åˆŠã€‹å¹¸å­˜è€…ä¸“è®¿ï¼šæˆ‘ä»¬ä¸æ˜¯ä¸€ç§è±¡å¾ï¼Œæˆ‘ä»¬åªæ˜¯ä¸€æœ¬ç®€å•çš„æ¼«ç”»</h2><p>å½“åœ°æ—¶é—´1æœˆ7æ—¥ï¼Œæ³•å›½æ¼«ç”»æ‚å¿—ã€ŠæŸ¥ç†å‘¨åˆŠã€‹çªé­ææ€–åˆ†å­æŒæªè¢­å‡»ï¼Œé€ æˆ12äººæ­»äº¡ï¼Œ11äººå—ä¼¤ã€‚é‡éš¾è€…ä¸­åŒ…æ‹¬æ‚å¿—ç¤¾äº”åé‡è¦çš„æ¼«ç”»å®¶ä»¥åŠä¸¤åè­¦å¯Ÿã€‚é¢å¯¹è¿™æ ·çš„æš´è¡Œï¼Œâ€œJe suis Charlieâ€ï¼ˆæˆ‘æ˜¯æŸ¥ç†ï¼‰æˆä¸ºäº†ä¸€å¥å£å·ï¼Œä¸€é¢å®£æ‰¬ä¿æŠ¤è¨€è®ºè‡ªç”±ã€æŠµåˆ¶ææ€–ä¸»ä¹‰çš„æ——å¸œã€‚</p>
<p>Luzåœ¨ã€ŠæŸ¥ç†å‘¨åˆŠã€‹å·¥ä½œäº†20å¹´ã€‚1æœˆ7æ—¥æ˜¯ä»–çš„ç”Ÿæ—¥ï¼Œå› æ­¤ä»–åœ¨å½“å¤©æ—©ä¸Šåœ¨ã€ŠæŸ¥ç†å‘¨åˆŠã€‹æ‚å¿—ç¤¾æ€»éƒ¨å¬å¼€çš„æ¯å‘¨ç¼–è¾‘ä¼šè®®ä¸Šè¿Ÿåˆ°äº†ï¼Œå› æ­¤é€ƒè¿‡ä¸€åŠ«ã€‚ç°åœ¨ä»–åŒå…¶ä»–çš„å¹¸å­˜è€…ä¸€èµ·åœ¨ä¸º1æœˆ14æ—¥å‘è¡Œçš„ä¸‹ä¸€æœŸã€ŠæŸ¥ç†å‘¨åˆŠã€‹åšå‡†å¤‡ï¼Œè¿™ä¸€æœŸæ¼«ç”»å°†å°åˆ·100ä¸‡ä»½ã€‚åœ¨è¿™ä»½æ–°çš„æ‚å¿—ä¸­ï¼ŒLuzå’Œä»–çš„åŒäº‹ä»¬å°†åœ¨æ¼«ç”»ä¸­æè¿°è¿™å‘¨æ—¥çš„å…±å’Œå›½å¤§æ¸¸è¡Œã€‚åœ¨ææ€–åˆ†å­æ€æ­»äº†ä»–çš„æœ‹å‹ï¼Œä»–çš„å¯¼å¸ˆï¼Œä»–çš„äº²äººä¹‹åï¼ŒLuzå‘è®°è€…è®²è¿°äº†ä»–çš„æ„¤æ€’ï¼Œä»–çš„ææƒ§ï¼Œä»–çš„æ€€ç–‘ã€‚ç›®å‰æ‚²ç—›æ¬²ç»çš„ä»–ä¸èƒ½ç¡®å®šåœ¨1æœˆ7æ—¥çš„æ‚²å‰§ä¹‹åä»–æ˜¯å¦è¿˜èƒ½ç»§ç»­ç”»ä¸‹å»ã€‚</p>
<p>è®°è€…ï¼šä¸‹å‘¨ä¸‰çš„ã€ŠæŸ¥ç†å‘¨åˆŠã€‹çš„å†…å®¹å°†æ˜¯å¾ˆæ•æ„Ÿçš„å›½å®¶ä¸æ”¿æ²»é—®é¢˜ã€‚åœ¨ç›®å‰è¿™ç§ä¸ç¨³å®šçš„å±€åŠ¿ä¸‹ï¼Œä½ ä»¬ä¸ºä»€ä¹ˆè¦æ‰¿æ‹…èµ·è¿™æ ·çš„è´£ä»»å‘¢ï¼Ÿ</p>
<p>Luzï¼šå½“æˆ‘æœ€åˆæ‹¿èµ·ç”»ç¬”çš„æ—¶å€™ï¼Œæˆ‘å¹¶ä¸è®¤ä¸ºè¿™æ˜¯ä¸€ä»¶å±é™©çš„äº‹ï¼Œæˆ‘ä»¬è®¤ä¸ºæˆ‘ä»¬åªæ˜¯ç”»å‡ºç±»ä¼¼æ»‘ç¨½çš„ç±³è€é¼ çš„ä¸œè¥¿è€Œå·²ã€‚ä½†ç°åœ¨ï¼Œåœ¨æ­»äº¡ï¼Œæªå‡»ï¼Œæš´åŠ›ä¹‹åï¼Œä¸€åˆ‡éƒ½æ”¹å˜äº†ã€‚æ‰€ä»¥çš„ç›®å…‰éƒ½èšç„¦åœ¨æˆ‘ä»¬èº«ä¸Šï¼Œæˆ‘ä»¬ç°åœ¨æˆäº†ä¸€ä¸ªè±¡å¾ï¼Œå°±åƒæˆ‘ä»¬ç”»å‡ºæ¥çš„æ¼«ç”»ä¸€æ ·ã€‚ã€Šäººé“æŠ¥ã€‹HumanitÃ© å°†ã€ŠæŸ¥ç†å‘¨åˆŠã€‹2015å¹´1æœˆ7å·åˆŠçš„ä½œå®¶Houellebecqæ¼«ç”»åƒä½œä¸ºå°é¢ï¼Œå¹¶é…ä¸Šå¤´æ¡æ ‡é¢˜â€œè‡ªç”±å·²è¢«è°‹æ€â€ï¼Œè«å¤§çš„è®½åˆºã€‚ä¸€ç§æ²‰é‡çš„è±¡å¾ä¸»ä¹‰çš„é‡é‡â€”â€”åŸæœ¬å¹¶ä¸å­˜åœ¨äºæˆ‘ä»¬çš„æ¼«ç”»ä¸­ï¼Œä¹Ÿç¦»æˆ‘ä»¬å¾ˆè¿œçš„ä¸œè¥¿ï¼Œç°åœ¨è½åœ¨äº†æˆ‘ä»¬çš„è‚©ä¸Šã€‚</p>
<p>ã€ŠæŸ¥ç†å‘¨åˆŠã€‹1æœˆ7å·åˆŠï¼Œåˆšå‡ºæ–°ä½œã€Šå±ˆæœã€‹çš„Houellebecqç™»ä¸Šå°é¢ï¼Œä¹¦ä¸­æƒ³è±¡äº†2022å¹´ä¼Šæ–¯å…°åŒ–äº†çš„æ³•å›½ã€‚</p>
<p>è®°è€…ï¼šæ‚¨æ‰€è¯´çš„â€œè±¡å¾ä¸»ä¹‰çš„é‡é‡â€æ˜¯ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿ</p>
<p>Luz: 2007å¹´ï¼Œå½“ä¸¹éº¦æŠ¥çº¸Jyllands-PostenæŠŠä¸€ç³»åˆ—ç©†ç½•é»˜å¾·çš„æ¼«ç”»åˆŠç™»å‡ºæ¥ä¹‹åï¼Œæˆ‘ä»¬è¢«çœ‹æˆæ˜¯ä¸ºåª’ä½“è¨€è®ºè‡ªç”±æŠ—äº‰çš„éº»çƒ¦åˆ¶é€ è€…æˆ–æ˜¯å‹‡æ•¢çš„ç™½è¡£éª‘å£«ã€‚åœ¨2011å¹´ï¼Œå½“æˆ‘ä»¬çš„åŠå…¬å®¤è¢«ç‡ƒçƒ§å¼¹æ”»å‡»æ—¶ï¼Œæˆ‘ä»¬å†ä¸€æ¬¡è¢«çœ‹ä½œæ˜¯ç™½è¡£éª‘å£«ã€‚2012å¹´ï¼Œä¸€éƒ¨å…³äºç©†æ–¯æ—çš„å–œå‰§ç”µå½±ä¸Šæ˜ ï¼ˆç©†æ–¯æ—çš„æ— çŸ¥ï¼‰ï¼Œå½“æ—¶æˆ‘ä»¬æŠŠè¿™éƒ¨ç”µå½±ç”»æˆäº†ç›¸å…³çš„æ¼«ç”»ï¼Œå¾—åˆ°äº†ç›¸åŒçš„å›åº”ï¼šæˆ‘ä»¬å†ä¸€æ¬¡æˆä¸ºäº†å±é™©çš„éº»çƒ¦åˆ¶é€ è€…ï¼Œç”»å‡ºå±é™©çš„æ¼«ç”»å¯¼è‡´æ³•å›½é¢†äº‹é¦†å…³é—­ã€å¯¼è‡´åœ¨å›½å¤–çš„æ³•å›½äººæ‰¿æ‹…ææƒ§çš„éº»çƒ¦åˆ¶é€ è€…ã€‚å½“å…¨çƒéƒ½å› æ­¤å¤„äºææ…Œä¹‹ä¸­æ—¶ï¼Œæˆ‘ä»¬åªæ˜¯è¯¥æ­»çš„ä¸€æœ¬å—å¤§ä¼—å–œçˆ±çš„æ‚å¿—è€Œå·²ã€‚è¿™æœ¬æ‚å¿—æˆä¸ºäº†å›½å®¶ã€å›½é™…çš„è±¡å¾ï¼Œä½†æ˜¯ï¼Œè¢«æ€æ­»çš„æ˜¯â€œäººâ€ï¼Œä¸æ˜¯â€œè¨€è®ºè‡ªç”±â€ï¼æ˜¯é‚£äº›ååœ¨åŠå…¬å®¤é‡Œç”»æ¼«ç”»çš„äººã€‚</p>
<p>è®°è€…ï¼šä½ çš„æ„æ€æ˜¯è¯´æ¼«ç”»çš„æœ¬è´¨æ”¹å˜äº†å—ï¼Ÿ</p>
<p>Luzï¼šè‡ªä»æˆ‘ä»¬å¼€å§‹ç”»æœ‰å…³ç©†ç½•é»˜å¾·çš„æ¼«ç”»å¼€å§‹ï¼Œæ¼«ç”»â€œä¸æ‰¿æ‹…è´£ä»»â€çš„æœ¬è´¨å°±å¼€å§‹ä¸€ç‚¹ç‚¹æ¶ˆå¤±äº†ã€‚ä»2007å¹´å¼€å§‹ï¼Œæˆ‘ä»¬çš„æ¼«ç”»è¢«äººä»¬ä»¥å­—é¢ä¸Šçš„æ„æ€æ¥ç†è§£ã€‚äººä»¬ï¼ŒåŒ…æ‹¬ä¸€äº›åƒPlantué‚£æ ·çš„æ¼«ç”»å®¶ï¼ˆPlantuï¼Œæ³•å›½æ”¿æ²»è®½åˆºæ¼«ç”»å®¶ï¼‰éƒ½è®¤ä¸ºæˆ‘ä»¬ä¸è¯¥ç”»é‚£äº›å…³äºç©†ç½•é»˜å¾·çš„æ¼«ç”»ï¼Œå› ä¸ºè¿™äº›ç”»éƒ½åœ¨ç½‘ç»œä¸Šç–¯ä¼ ã€‚å› æ­¤æˆ‘ä»¬å¾—å¤„å¤„å°å¿ƒé­äººæŠ¥å¤ï¼Œè¿™ç§æ„Ÿè§‰è®©äººéš¾ä»¥å¿å—ã€‚</p>
<p>è®°è€…ï¼šä¸ºä»€ä¹ˆï¼Ÿ</p>
<p>Luzï¼šä»2007å¹´å¼€å§‹ï¼Œã€ŠæŸ¥ç†å‘¨åˆŠã€‹å°±å—åˆ°å®¡æŸ¥å¹¶è¢«è­¦å‘Šè¦æ‰¿æ‹…è´£ä»»ã€‚æˆ‘ä»¬ç”»å‡ºçš„æ¯ä¸€å¹…æ¼«ç”»éƒ½è¢«è§£è¯»æˆæ˜¯è·Ÿæ”¿æ²»æœ‰å…³ã€‚è¿™äº›è´£ä»»å°±è½åˆ°äº†æˆ‘ä»¬è‚©ä¸Šã€‚ä½†æˆ‘ä»¬åªæ˜¯ä¸€ä»½æ‚å¿—ï¼Œä¹°äº†ï¼Œæ‰“å¼€çœ‹äº†ï¼Œå†åˆä¸Šï¼Œå°±è¿™ä¹ˆç®€å•ã€‚è‹¥æ˜¯äººä»¬æŠŠæˆ‘ä»¬çš„æ¼«ç”»ä¼ åˆ°ç½‘ä¸Šï¼Œè‹¥æ˜¯åª’ä½“å¼ºè°ƒæˆ‘ä»¬çš„ä¸€äº›æ¼«ç”»ï¼Œé‚£æ˜¯ä»–ä»¬çš„è´£ä»»ï¼Œä¸æ˜¯æˆ‘ä»¬çš„ã€‚</p>
<p>è®°è€…ï¼šä½†åŒä½ ä»¬äº‹ä¸æ„¿è¿çš„äº‹æƒ…å‘ç”Ÿäº†ã€‚</p>
<p>Luzï¼šæˆ‘ä»¬è¢«åŠ ä¸Šäº†è±¡å¾ä¸»ä¹‰çš„è´£ä»»ï¼Œè€Œè¿™æœ¬ä¸æ˜¯ã€ŠæŸ¥ç†å‘¨åˆŠã€‹çš„åˆè¡·ã€‚æˆ‘ä»¬è·ŸPlantuä¸åŒï¼Œæˆ‘ä»¬åå¯¹è±¡å¾ä¸»ä¹‰ã€‚â€œæˆ˜äº‰ä¸­é¸½å­è±¡å¾ç€å’Œå¹³â€è¿™ç±»éšå–»ä¸æ˜¯æˆ‘ä»¬æƒ³è¦è¡¨è¾¾çš„ã€‚æˆ‘ä»¬æ˜¯åœ¨ç»†èŠ‚ä¸Šä¸‹åŠŸå¤«ï¼Œæˆ‘ä»¬æ³¨é‡çš„æ˜¯æ€æ ·æŠŠæˆ‘ä»¬ç”»çš„ä¸œè¥¿ç”¨æ³•å¼å¹½é»˜è¡¨è¾¾å‡ºæ¥ã€‚</p>
<p>è®°è€…ï¼šæ¼«ç”»åœ¨æŸäº›æƒ…å†µä¸‹ä¼šè¢«è®¤ä¸ºæ˜¯ç²—é²çš„ï¼Œæˆ–æ˜¯å¾ˆæœ‹å…‹çš„ä¸œè¥¿ã€‚</p>
<p>Luzï¼šæœ‰äº›æ—¶å€™æ„šè ¢ï¼Œæœ‰äº›æ—¶å€™ç²—é²ï¼Œè‡³äºæœ‹å…‹ï¼Œé‚£æ˜¯è‚¯å®šçš„ã€‚æœ‰æ—¶å€™æ¼«ç”»ä¸ä¼šäº§ç”Ÿä»»ä½•å½±å“ï¼Œå¦ä¸€äº›æ—¶å€™å®ƒå°±åªæ˜¯ä¾›äººæ¶ˆé£çš„å¨±ä¹ã€‚ã€ŠæŸ¥ç†å‘¨åˆŠã€‹èšé›†äº†ä¸€ç¾¤æ€æƒ³å·®å¼‚å¾ˆå¤§çš„æ¼«ç”»å®¶ã€‚æ ¹æ®ä¸åŒçš„æ¼«ç”»å®¶ç”¨ä¸åŒçš„é£æ ¼æ¥è¡¨ç°ä¸€å‰¯æ¼«ç”»â€”â€”ç”»æ”¿æ²»æˆ–æ˜¯è‰ºæœ¯ï¼Œæ¼«ç”»çš„æœ¬è´¨ä¹Ÿåœ¨æ”¹å˜ã€‚ä½†æ˜¯è¿™ç§å¤šæ ·æ€§çš„è¡¨è¾¾æ–¹å¼ç°åœ¨å´ä¸å¤å­˜åœ¨äº†ã€‚æ¯ä¸€å¹…æ¼«ç”»éƒ½è¢«çœ‹ä½œæ˜¯æˆ‘ä»¬æ‰€æœ‰äººä¸€èµ·å®Œæˆçš„ã€‚å®é™…ä¸Šï¼Œã€ŠæŸ¥ç†å‘¨åˆŠã€‹ä¸€ç›´ä»¥æ¥éƒ½è‡´åŠ›äºåå¯¹è±¡å¾ä¸»ä¹‰ï¼šæˆ‘ä»¬æ‘§æ¯ç¬¦å·ï¼Œæ‰“ç ´ç¦å¿Œï¼Œå°†é‚£äº›å¹»æƒ³çš„æ³¡æ²«ç ´ç­ã€‚æˆ‘ä»¬å¾ˆé«˜å…´çœ‹åˆ°äººä»¬ç»™äºˆã€ŠæŸ¥ç†å‘¨åˆŠã€‹æ”¯æŒï¼Œä½†åŒæ—¶ä»–ä»¬çš„åšæ³•å´è·Ÿã€ŠæŸ¥ç†å‘¨åˆŠã€‹çš„åˆè¡·èƒŒé“è€Œé©°ã€‚</p>
<p>è®°è€…ï¼šä½ ä»¬ç°åœ¨å·²ç»æˆä¸ºå¼•é¢†æ°‘æ—å›¢ç»“çš„æ——å¸œã€‚</p>
<p>Luzï¼šè¿™ç§å›¢ç»“èƒ½å¸®åŠ©å¥¥æœ—å¾·å·©å›ºæ•´ä¸ªå›½å®¶ï¼ŒåŒæ ·å¯¹äºå‹’åºæå€¡çš„æ¢å¤æ­»åˆ‘çš„ä¸»å¼ ä¹Ÿæœ‰å¸®åŠ©ã€‚ä»»ä½•æ„ä¹‰çš„è±¡å¾ä¸»ä¹‰éƒ½èƒ½è¢«ä»»ä½•äººåˆ©ç”¨èµ·æ¥åšä»–ä»¬æƒ³åšçš„äº‹ã€‚è€Œè¿™æ°æ°è·Ÿã€ŠæŸ¥ç†å‘¨åˆŠã€‹è¿½æ±‚çš„ä¸åŒï¼Œä½ ä¸èƒ½å»åšä»»ä½•ä½ å¹»æƒ³å‡ºæ¥çš„äº‹æƒ…ã€‚å½“æˆ‘ä»¬å˜²è®½ï¼Œå¼€æ”¿æ²»çš„ç©ç¬‘ï¼Œæˆ–è€…è¯´æ˜¯å¨±ä¹å¤§ä¼—çš„æ—¶å€™ï¼Œæˆ‘ä»¬æ²¡æœ‰æˆä¸ºä¸€ç§ç¬¦å·ã€‚æˆ‘è®¤ä¸ºCharbï¼ˆã€ŠæŸ¥ç†å‘¨åˆŠã€‹ä¸»ç¼–ï¼Œåœ¨11.7æè¢­æ¡ˆä¸­é‡éš¾ï¼‰æ˜¯20ä¸–çºªæœ«ã€21ä¸–çºªåˆçš„Jean-Marc Reiserï¼Œä»–ç”¨è‡ªå·±çš„æ–¹å¼å¯¹è¿™ä¸ªç¤¾ä¼šåšå‡ºè¯„ä»·ã€‚ä»–ç”»å‡ºè—åœ¨è¡¨è±¡ä¸‹çš„é˜´å½±ï¼Œé‚£äº›çˆ±è¯´è°çš„ä¸‘é™‹çš„äººã€‚è€Œç°åœ¨æˆ‘ä»¬ä¹Ÿè¢«æ©ç›–åœ¨è¡¨è±¡ä¸‹äº†ã€‚</p>
<p>è®°è€…ï¼šæ‚¨çš„æ„æ€æ˜¯ï¼Ÿ</p>
<p>Luzï¼šåœ¨ç›®å‰ä¸€ç§æƒ…ç»ªçŠ¶æ€ä¸‹å‘å¸ƒã€ŠæŸ¥ç†å‘¨åˆŠã€‹æ˜¯ä¸€ä¸ªæ­£ç¡®çš„æ—¶æœºå—ï¼Ÿè¿™æ ·å¿«é€Ÿåœ°å¯¹æ‰€æ”»å‡»çš„è±¡å¾ä¸»ä¹‰åšå‡ºå›åº”é€‚åˆå—ï¼Ÿæˆ‘å¾ˆæ€€ç–‘ã€‚ç”¨è±¡å¾ä¸»ä¹‰æ¥å›åº”è±¡å¾ä¸»ä¹‰ï¼Œè¿™ä¸æ˜¯ã€ŠæŸ¥ç†å‘¨åˆŠã€‹åšçš„äº‹ã€‚æ˜¨å¤©æ™šä¸Šæˆ‘åœ¨è„‘æµ·ä¸­æç»˜å‡ºä¸€å¹…æ¼«ç”»ï¼Œä¸è¿‡æˆ‘å¯èƒ½ä¸ä¼šæŠŠå®ƒç”»å‡ºæ¥ï¼šåœ°æ¿ä¸Šä¸€æ»©æ»©æ±¡æ¸ä»£è¡¨ç€é‡éš¾è€…å€’ä¸‹çš„åœ°æ–¹ï¼Œä¸€å¹…çœ¼é•œæ•£è½åœ¨è§’è½è¯´â€œå“ˆå“ˆå“ˆâ€ï¼ŒèƒŒæ™¯æ˜¯é»‘è‰²ã€‚è¿™ä¸æ˜¯ä¸€ä¸ªå¥½çš„ä¸»æ„ï¼Œå› ä¸ºå®ƒä¼šè¢«æ‰“ä¸Šè±¡å¾ä¸»ä¹‰çš„æ ‡ç­¾ã€‚</p>
<p>è®°è€…ï¼šæ‰€ä»¥æ‚¨çš„é—®é¢˜æ—¶â€œäº‹ä»¶è¿‡åä½ ä»¬å°†ä»¥ä»€ä¹ˆæ–¹å¼ç»§ç»­ç”»ä¸‹å»ï¼Ÿâ€</p>
<p>Luzï¼šæ˜¯çš„ï¼Œä»¥åŠæˆ‘æ€æ ·åœ¨è¿™æ ·çš„èƒŒæ™¯ä¸‹ç”»ç”»ï¼Œåœ¨ã€ŠæŸ¥ç†å‘¨åˆŠã€‹è¢«èµ‹äºˆäº†é‚£ä¹ˆå¤šå¹»æƒ³ä¹‹åã€‚</p>
<p>è®°è€…ï¼šã€ŠæŸ¥ç†å‘¨åˆŠã€‹å°†æ€ä¹ˆç»§ç»­ä¸‹å»å‘¢ï¼Ÿ</p>
<p>Luzï¼šè¿™å°†ä¼šå¾ˆå¤æ‚ã€‚é™¤äº†æˆ‘ä¹‹å‰æåˆ°çš„é‚£äº›åŸå› ä¹‹å¤–ï¼Œæˆ‘ä»¬é‚£å‡ ä¸ªå–„äºç”»ç”»ã€å–„äºæ€è€ƒæ”¿æ²»ã€é“å¾·ã€æ€æƒ³æ¿€è¿›çš„åŒäº‹â€”â€” Charb, Tignous, HonorÃ©ï¼Œè¿˜æœ‰å…¶ä»–å‡ ä½ï¼Œä¸åœ¨äº†ã€‚åœ¨è¿™ç§å›°éš¾çš„æ—¶åˆ»ï¼Œæˆ‘ä»¬å‰©ä¸‹çš„äººæ‰¿æ‹…ç€é‡ä»»ã€‚ç°åœ¨åªå‰©ä¸‹Catherine, Willem, Cocoä»¥åŠæˆ‘ï¼Œè¿˜æœ‰å—ä¼¤çš„Rissã€‚å•å‡­æˆ‘ä»¬å‡ ä¸ªäººçš„åŠ›é‡æ€ä¹ˆæ‰èƒ½è¶Šè¿‡è¿™ç§è±¡å¾ä¸»ä¹‰å‘¢ï¼Ÿï¼ˆæ—©å‰ä»ã€ŠæŸ¥ç†å‘¨åˆŠã€‹ç¦»èŒçš„Julç°åœ¨å‰æ¥å¸®åŠ©ç­–åˆ’ä¸‹ä¸€æœŸçš„å†…å®¹ã€‚ï¼‰æ¯ä¸ªäººéƒ½èƒ½æˆä¸ºæ¼«ç”»å®¶ï¼Œä½†ä»–ä»¬èƒ½æŠ“ä½æŸ¥ç†çš„ç²¾ç¥å—ï¼Ÿæˆ‘ä»¬çš„ç²¾ç¥æµä¼ äº†22å¹´äº†ï¼Œç°åœ¨è¿™ä»½æ‚å¿—å¾—ä»¥ç”Ÿå­˜è‡³ä»Šéƒ½æ˜¯æ‚å¿—ç¤¾æ‰€æœ‰æˆå‘˜çš„åŠªåŠ›ã€‚</p>
<p>è®°è€…ï¼šä½ ä»¬è§‰å¾—æœ‰å¿…è¦å°†å…ˆçŸ¥ç”»è¿›è®½åˆºæ¼«ç”»é‡Œå—ï¼ŸæŠ‘æˆ–ä½ ä»¬æœ‰æ—¶å€™ä¼šè§‰å¾—è‡ªå·±æ‰è¿›äº†é™·é˜±é‡Œï¼Ÿ</p>
<p>Luzï¼šæœ‰è¶£çš„æ˜¯åœ¨2007å¹´çš„äº‹ä»¶è¿‡åæˆ‘ä»¬ç»§ç»­ç”»äº†ä¸€äº›æœ‰å…³ç©†ç½•é»˜å¾·çš„æ¼«ç”»ã€‚åœ¨2007å¹´ã€2011å¹´ä»¥åŠ2012å¹´ä¸‰æ¬¡ç”»çš„é»˜ç½•é»˜å¾·æ¼«ç”»å¼•èµ·äº‰è®®ä¹‹åï¼ŒCharb å’Œ Zineb El-Rhazouiï¼ˆåœ¨ã€ŠæŸ¥ç†å‘¨åˆŠã€‹å·¥ä½œçš„ç©†æ–¯æ—å¥³è®°è€…ï¼‰ åˆå‡ºäº†ä¸¤å·å…³äºç©†ç½•é»˜å¾·ç”Ÿæ´»çš„æ¼«ç”»ï¼Œä½†å¹¶æ²¡æœ‰å¼•èµ·è½°åŠ¨ã€‚æˆ‘ä»¬çš„ç›®çš„è¾¾åˆ°äº†ã€‚Charb æƒ³è¦æŒ‰ç…§è¿™ä¸ªè®¾æƒ³ä¸€ç›´è¿›è¡Œä¸‹å»ï¼Œç©¿ç€ä»–çš„ç™»å±±é‹ï¼Œå’Œä»–å–œæ¬¢å¾—ä¸å¾—äº†çš„å®é™…ä¸Šå¾ˆä¸‘çš„å†›è£¤ï¼Œç«™åœ¨é«˜å¤„ï¼ˆç¬‘ï¼‰ã€‚Charbç›¸ä¿¡æˆ‘ä»¬å¯ä»¥ç»§ç»­å…‹æœç¦å¿Œå’Œç¬¦å·æ ‡å‡†ã€‚ä½†ç°åœ¨ï¼Œæˆ‘ä»¬æˆä¸ºäº†ä¸€ç§ç¬¦å·ã€‚å½“ä¸€ç§ç¬¦å·å°±æ˜¯ä½ è‡ªå·±çš„æ—¶å€™ï¼Œä½ èƒ½æ€ä¹ˆæ ·å»æ‘§æ¯å®ƒï¼Ÿ</p>
<p>ç«™åœ¨è¢«çƒ§æ¯çš„åŠå…¬æ¥¼å‰çš„Charbã€‚</p>
<p>è®°è€…ï¼šæˆ‘ä¸çŸ¥é“ã€‚</p>
<p>Luzï¼šæˆ‘ä¹Ÿä¸çŸ¥é“ã€‚è¿™å‘¨æˆ‘ä¸æ‰“ç®—å»æƒ³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä¹Ÿä¸ç¡®å®šä»¥åæˆ‘ä¼šä¸ä¼šæ¥è§£å†³å®ƒã€‚æˆ‘ä»¬ä¼šç»§ç»­å‘å¸ƒã€ŠæŸ¥ç†å‘¨åˆŠã€‹ã€‚æˆ‘ä¼šå¼ºè¿«æˆ‘è‡ªå·±çš„ã€‚æˆ‘ä¼šå»æ€è€ƒæˆ‘æ­»å»çš„æœ‹å‹ä»¬ï¼Œæˆ‘çŸ¥é“ä»–ä»¬ä¸æ˜¯ä¸ºäº†æ³•å›½è€Œå€’ä¸‹çš„ï¼ä»Šå¤©ï¼Œçœ‹ä¸Šå»ä¼¼ä¹æ˜¯ã€ŠæŸ¥ç†å‘¨åˆŠã€‹ä¸ºè¨€è®ºè‡ªç”±è€Œæ­»äº†ã€‚ä½†äº‹å®å¾ˆç®€å•ï¼Œå°±æ˜¯æˆ‘ä»¬çš„æœ‹å‹æ­»äº†ã€‚æˆ‘ä»¬çˆ±çš„æœ‹å‹ï¼Œé‚£äº›æœ‰ç€è®©æˆ‘ä»¬éå¸¸æ¬£èµçš„æ‰åçš„æœ‹å‹æ­»äº†ã€‚</p>
<p>è®°è€…ï¼šåœ¨BFMTVä¸Šï¼Œæˆ‘ä»¬çœ‹åˆ°ç°åœ¨å±€åŠ¿å¾ˆæ··ä¹±ã€‚Charbçš„å¥³å‹Jeannette Bougrab è¯´ï¼Œä»–ä»¬å€¼å¾—è¢«åŸ‹è‘¬åœ¨æ³•å›½çš„å…ˆè´¤ç¥ é‡Œã€‚</p>
<p>Luzï¼šã€ŠæŸ¥ç†å‘¨åˆŠã€‹ä¸åŒæ„è¿™æ ·åšã€‚åœ¨å…ˆè´¤ç¥ é‡Œè¢«ç«è‘¬å¯¹äºå±…é‡Œå¤«äººæ¥è¯´å¹¶æ²¡æœ‰æ”¹å˜ä»»ä½•ä¸œè¥¿ï¼</p>
<p>è®°è€…ï¼šè¿™å°†æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„çºªå¿µæ–¹å¼ã€‚ã€‚ã€‚</p>
<p>Luzï¼š1æœˆ7æ—¥æ™šçš„è‡ªå‘é›†ä¼šæˆ‘æ²¡æœ‰å»ã€‚åœ¨é‚£é‡Œäººä»¬å”±èµ·äº†å›½æ­Œã€‚æˆ‘ä»¬è°ˆèµ·Charb, Tignous, Cabus, HonorÃ©, Wolinski: ä»–ä»¬ä¸€å®šä¼šå˜²ç¬‘è¿™ç§è¡Œä¸ºæ€åº¦ã€‚äººä»¬ç”¨ä»–ä»¬å–œæ¬¢çš„æ–¹å¼æ¥è¡¨è¾¾è‡ªå·±ï¼Œä½†æ˜¯å…±å’Œå›½ä¸åº”è¯¥ä¹Ÿå˜æˆä¸€ä¸ªæ­‡æ–¯åº•é‡Œçš„é€è‘¬è€…ã€‚è¿™æ˜¯ä¸€ç§æ‚²å“€ã€‚</p>
<p>è®°è€…ï¼šæˆ‘æƒ³è¿™å°†æˆä¸ºä½ æŠŠæ˜å¤©çš„é›†ä¼šè®°å½•åœ¨æ¼«ç”»é‡Œçš„ç†ç”±å§ï¼Ÿ</p>
<p>Luzï¼šæˆ‘ä¹Ÿä¸çŸ¥é“ã€‚æ¯«æ— ç–‘é—®ï¼Œæ˜å¤©å°†ä¼šæœ‰å„ç§ç¾å¥½çš„åœºé¢ï¼Œæ³ªæ°´ï¼Œå¾®ç¬‘ï¼Œæˆ–è®¸è¿˜ä¼šæœ‰ç‚¹è’è°¬ã€‚åŒæ—¶è¿™ä¹Ÿä¼šè¡¨ç°å‡ºã€ŠæŸ¥ç†å‘¨åˆŠã€‹æœ¬è´¨çš„å˜åŒ–ï¼šç°åœ¨æ¥æ”¯æŒæˆ‘ä»¬çš„äººä¸­ï¼Œæœ‰å¾ˆå¤šéƒ½ä»æ¥æ²¡è¯»è¿‡æˆ‘ä»¬çš„ä½œå“ã€‚æˆ‘å¹¶ä¸æ˜¯è·Ÿä»–ä»¬ç”Ÿæ°”ã€‚æˆ‘ä»¬çš„ç›®æ ‡ä»æ¥éƒ½ä¸æ˜¯è¯´æœæ‰€æœ‰äººã€‚</p>
<p>è®°è€…ï¼šå»å¹´11æœˆï¼ŒCharbå‘å‡ºå£°æ˜å‘¼åå¤§å®¶æ¥è®¢é˜…ã€ŠæŸ¥ç†å‘¨åˆŠã€‹ï¼Œæ¥æ‹¯æ•‘è¿™æœ¬æ‚å¿—ã€‚é‚£ä¸ªæ—¶å€™è¿™æœ¬æ‚å¿—å¾ˆå­¤ç‹¬ã€‚</p>
<p>Luzï¼šè‡ªä»ç¬¬ä¸‰æ¬¡å› ä¸ºç”»é»˜ç½•é»˜å¾·è€Œå—åˆ°äº‰è®®ä¹‹åï¼Œä¸€äº›æ—¶å€™æˆ‘ä»¬æ„Ÿåˆ°å¾ˆå­¤ç‹¬ã€‚å¾ˆå¤šå…³äºã€ŠæŸ¥ç†å‘¨åˆŠã€‹æ— ç¥è®ºçš„è¯´æ³•ã€æ€æƒ³éƒ½æ¶Œç°äº†å‡ºæ¥ã€‚ä½†å®é™…ä¸Šæˆ‘å°±å°±åªæ˜¯ç®€ç®€å•å•ï¼Œå¿«ä¹çš„ä¸ä¿¡æ•™çš„äººè€Œå·²ã€‚æ­»æ‰çš„é‚£äº›ï¼Œéƒ½æ˜¯å¿«ä¹çš„æ— ä¿¡ä»°çš„äººã€‚ç°åœ¨ä»–ä»¬æ­»äº†ï¼Œä¸å­˜åœ¨äº†ï¼Œå°±è·Ÿå…¶ä»–æ‰€æœ‰äººä¸€æ ·ã€‚</p>
<p>è®°è€…ï¼šå¯¹äºç“¦å°”æ–¯æ€»ç†æ²¡æœ‰é‚€è¯·å³æ´¾çš„å‹’åºæ¥å‚åŠ æ˜å¤©çš„å…±å’Œå›½å¤§æ¸¸è¡Œä¸€äº‹ï¼Œä½ æ€ä¹ˆçœ‹ï¼Ÿ</p>
<p>Luzï¼šæˆ‘æ²¡æœ‰ä»»ä½•çœ‹æ³•ã€‚</p>
<p>è®°è€…ï¼šä½ è®¤ä¸ºç°åœ¨äººä»¬æ˜¯æœ‰è¦æ‹¯æ•‘ã€ŠæŸ¥ç†å‘¨åˆŠã€‹çš„è¶‹åŠ¿å—ï¼Ÿ</p>
<p>Luzï¼šè¯´è€å®è¯ï¼Œå»æ•‘ä»€ä¹ˆï¼Ÿç°åœ¨å¤§å®¶è¿˜åœ¨åŠ¿å¤´ä¸Šï¼Œæœ‰æ°”åŠ¿ã€‚è€Œåœ¨ä¸€å¹´çš„æ—¶é—´é‡Œï¼Œè¿™äº›ä¸ºè¨€è®ºè‡ªç”±è€Œæˆ˜çš„æ°”åŠ¿åˆä¼šå‰©ä¸‹å¤šå°‘ï¼Ÿä¼šç»™äºˆç§äººåª’ä½“èµ„é‡‘èµåŠ©å—ï¼Ÿäººä»¬ä¼šæŠµåˆ¶çº¸åª’å’ŒæŠ¥åˆŠäº­çš„è¡°è½å—ï¼Ÿäººä»¬è¿˜ä¼šä¹°æŠ¥çº¸æ‚å¿—å—ï¼Ÿè¿™äº›æ°”åŠ¿ä¼šå‰©ä¸‹ä»€ä¹ˆï¼Ÿä¹Ÿè®¸ä¼šå‰©ä¸‹ï¼Œä¹Ÿè®¸ä¸ä¼šã€‚</p>
<p>è®°è€…ï¼šä½ ä»¬å°†å¦‚ä½•å·¥ä½œï¼Ÿ</p>
<p>Luzï¼šæˆ‘ä»¬å°†ç»§ç»­ç”»é‚£äº›å¿«ä¹çš„å°äººå„¿ã€‚ä½œä¸ºæ¼«ç”»å®¶ï¼Œæˆ‘ä»¬çš„å·¥ä½œæ˜¯ä»¥è¿™äº›å¿«ä¹çš„äººä»¬ä¸ºç´ ææ¥ç”»æˆæ¼«ç”»ï¼Œä»¥ä¼ è¾¾ä¸€ä¸ªè§‚ç‚¹ï¼Œå°±æ˜¯æˆ‘ä»¬æ‰€æœ‰äººéƒ½æ˜¯å¿«ä¹çš„å°äººç‰©ï¼Œæˆ‘ä»¬ä¼šåŠªåŠ›æŠŠæˆ‘ä»¬éœ€è¦åšçš„åšå¥½ã€‚é‚£äº›è¢«æ€å®³çš„äººéƒ½åªæ˜¯ç”»å‡ºé‚£äº›æ¬¢å¿«çš„å°äººå„¿çš„æ™®é€šäººã€‚</p>
<p>è®°è€…ï¼šå› æ­¤è®©ä½ ä»¬è¿™äº›ç®€å•å¿«ä¹çš„å°äººç‰©æ¥æ‹¯æ•‘æ•´ä¸ªæ³•å›½ï¼Œæœªå…å¤ªæ²‰é‡äº†ï¼Ÿ</p>
<p>Luzï¼šæ˜¯çš„ã€‚</p>
<p>ï¼ˆæ¥æºï¼šæ³•åª’les in rocksï¼Œé‡‡è®¿ï¼šAnne Laffeterï¼‰</p>
<blockquote>
<p>åè®°ï¼š æ¬¢è¿åŠ å…¥æˆ‘çš„ç§äººå…¬ä¼—å·ï¼Œ å’Œä½ åˆ†äº«æˆ‘æ€è€ƒçš„è§‚ç‚¹å’Œæ–‡ç« ï¼š<br><img src="http://ww2.sinaimg.cn/large/c5ee78b5gw1ezbljkk2apj20by0byq3q.jpg" alt="å…¬ä¼—å·äºŒç»´ç "></p>
</blockquote>
]]></content>
    <summary type="html">
    <![CDATA[<p>æ˜¯ä»€ä¹ˆï¼Œ åœ¨æµè¡€ã€‚</p>]]>
    
    </summary>
    
      <category term="ç¤¾ä¼šäººç‰©" scheme="http://chocoluffy.com/tags/%E7%A4%BE%E4%BC%9A%E4%BA%BA%E7%89%A9/"/>
    
      <category term="è¯»ä¹¦ç¬”è®°" scheme="http://chocoluffy.com/tags/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"/>
    
      <category term="åŸåˆ›" scheme="http://chocoluffy.com/categories/%E5%8E%9F%E5%88%9B/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[Responsive web design[ç¬¬äºŒæœŸ]-position/overlay]]></title>
    <link href="http://chocoluffy.com/2016/01/20/Responsive-web-design-%E7%AC%AC%E4%BA%8C%E6%9C%9F-position-overlay/"/>
    <id>http://chocoluffy.com/2016/01/20/Responsive-web-design-ç¬¬äºŒæœŸ-position-overlay/</id>
    <published>2016-01-20T20:50:19.000Z</published>
    <updated>2016-01-23T15:55:18.000Z</updated>
    <content type="html"><![CDATA[<p>åœ¨ä½¿ç”¨positionç­‰csså±æ€§çš„æ—¶å€™ä¼šç»å¸¸åœ¨â€™absoluteâ€™,â€™relativeâ€™å’Œâ€™staticâ€™ä¸Šè¿›å‘ã€‚ æœ¬æ–‡ä»å®æˆ˜çš„è§’åº¦ä»‹ç»positionçš„å„ç§åº”ç”¨å’Œå¦‚ä½•æ·»åŠ ä¸€å±‚ä¼˜é›…çš„æ¸å˜èƒŒæ™¯è¿‡æ¸¡å±‚ã€‚</p>
<a id="more"></a>
<h2 id="position:_static">position: static</h2><p>when dealing with nested container, the parent div is usually set to be <code>position: relative</code> while child div is <code>position: absolute</code> so that the child element can be positioned to any pos within parent container, if the parent div is set to <code>position: static</code>, child element will ignore parent position.</p>
<blockquote>
<p>Note that <code>position: static</code> is CSS default setting, so if we want to use <code>position: absolute</code>, we should always set the parent element to <code>position: relative</code>. ReactNative set the default value back, so no worries.</p>
</blockquote>
<p>when use position properties like <code>top</code> and <code>left</code>, we usually set them to <code>50%</code>, but the result will be like the elementâ€™s top left corner is sticked to the center, while the rest of it is not at the center, which is not what we want, we usually use <code>transform</code> property and get it to <code>-50%</code> to center the element.</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">top: <span class="number">50</span>%;</span><br><span class="line">left: <span class="number">50</span>%;</span><br><span class="line">transform: translate(-<span class="number">50</span>%, -<span class="number">50</span>%);</span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œæˆ‘ä»¬è¦è¯´è¯´ static å…ƒç´ çš„å¦å¤–ä¸€ä¸ªå‘ã€‚</p>
<p>absolute, relative: æœ‰ z-indexã€‚<br>static: æ²¡æœ‰ z-indexã€‚<br>æ²¡æœ‰ z-index çš„å…ƒç´ é»˜è®¤åœ¨æœ‰ z-index çš„å…ƒç´ ä¸‹é¢ã€‚</p>
<p>img å’Œ h1 å…ƒç´ éƒ½æ˜¯ position: staticã€‚z-index å¯¹ static å…ƒç´ ä¸èµ·ä½œç”¨ï¼Œå› æ­¤å®ƒä»¬éƒ½åœ¨ç»å¯¹å®šä½çš„å…ƒç´ ä¸‹é¢ã€‚</p>
<h2 id="position:_relative">position: relative</h2><p>æ¥ä¸‹æ¥çœ‹çœ‹æˆ‘ä»¬å˜´ç»å¸¸è§åˆ°çš„<code>position: relative</code>ã€‚<br>ç®€å•åœ°è¯´ï¼Œ å°±æ˜¯åœ¨è¿™ä¸ªå…ƒç´ åŸæœ¬çš„ä½ç½®ä¸Šåšä½ç§»ï¼Œ å› ä¸ºæœ‰äº†<code>position: relative</code>çš„è®¾å®šï¼Œ æˆ‘ä»¬å¯ä»¥ç”¨<code>top``left</code>æ¥ç§»åŠ¨è¿™ä¸ªå…ƒç´ ã€‚<br>If you specify position:relative, then you can use top or bottom, and left or right to move the element relative to where it would normally occur in the document.</p>
<p>Letâ€™s move div-1 down 20 pixels, and to the left 40 pixels:<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="id">#div-1</span> <span class="rules">&#123;</span><br><span class="line"> <span class="rule"><span class="attribute">position</span>:<span class="value">relative</span></span>;</span><br><span class="line"> <span class="rule"><span class="attribute">top</span>:<span class="value"><span class="number">20px</span></span></span>;</span><br><span class="line"> <span class="rule"><span class="attribute">left</span>:<span class="value">-<span class="number">40px</span></span></span>;</span><br><span class="line">&#125;</span></span><br></pre></td></tr></table></figure></p>
<p>Notice the space where div-1 normally would have been if we had not moved it: now it is an empty space. The next element (div-after) did not move when we moved div-1. Thatâ€™s because div-1 still occupies that original space in the document, even though we have moved it. æ•ˆæœå‚è€ƒï¼š<img src="http://ww3.sinaimg.cn/large/c5ee78b5gw1f08roukzilj20ry0lwjw8.jpg" alt="position relative"></p>
<p>å¦å¤–ï¼Œ position:relative è¿˜å¸¦æ¥äº†z-indexçš„å±æ€§ã€‚</p>
<ul>
<li>references from <a href="https://css-tricks.com/absolute-relative-fixed-positioining-how-do-they-differ/" target="_blank" rel="external">Absolute, Relative, Fixed Positioning: How Do They Differ?</a><br>There are two other things that happen when you set position: relative; on an element that you should be aware of. One is that it introduces the ability to use z-index on that element, which doesnâ€™t really work with statically positioned elements. Even if you donâ€™t set a z-index value, this element will now appear on top of any other statically positioned element. You canâ€™t fight it by setting a higher z-index value on a statically positioned element. The other thing that happens is it limits the scope of absolutely positioned child elements. Any element that is a child of the relatively positioned element can be absolutely positioned within that block.</li>
</ul>
<h2 id="position:_absolute">position: absolute</h2><p>å¦‚æœæˆ‘ä»¬ä½¿ç”¨<code>position: absolute</code>å‘¢, è¿™ä¸ªå…ƒç´ å°†ä¼šè„±ç¦»æ–‡æœ¬ï¼Œ æˆ‘ä»¬å¯ä»¥äººæ„å°†å®ƒæ‘†æ”¾åˆ°çš„æƒ³å»çš„ä½ç½®ï¼Œ æ³¨æ„å’Œstaticçš„åŒºåˆ«æ˜¯ï¼Œ è¿™ä¸ªabsoluteæ˜¯ç›¸å¯¹<em><strong>ä¸Šä¸€ä¸ªå®šä½ä¸ºrelative</strong></em>çš„å®šä½ï¼Œ è€Œstaticæ˜¯ç›¸å¯¹æµè§ˆå™¨çš„å®šä½ã€‚</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="preprocessor">#div-<span class="number">1</span> &#123;</span></span><br><span class="line"> position:relative;</span><br><span class="line">&#125;</span><br><span class="line"><span class="preprocessor">#div-<span class="number">1</span>a &#123;</span></span><br><span class="line"> position:absolute;</span><br><span class="line"> top:<span class="number">0</span>;</span><br><span class="line"> right:<span class="number">0</span>;</span><br><span class="line"> width:<span class="number">200</span>px;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ•ˆæœå‚è€ƒï¼š<img src="http://ww4.sinaimg.cn/large/c5ee78b5gw1f08rtih4o4j20pe0iadk1.jpg" alt="relative and absolute"></p>
<blockquote>
<p>æœ€åä¸€ä¸ªè¡¥å……ï¼šæˆ‘ä»¬å¸¸å¸¸å’Œ<code>float</code>æ­é…ä½¿ç”¨çš„<code>clear: both</code>, ä½œç”¨æ˜¯ä½¿å¾—å®šä¹‰äº†è¯¥å±æ€§çš„å…ƒç´ çš„å·¦ä¾§å’Œå³ä¾§å‡ä¸å…è®¸å‡ºç°æµ®åŠ¨å…ƒç´ ã€‚</p>
</blockquote>
<h2 id="æ»šåŠ¨æ§åˆ¶">æ»šåŠ¨æ§åˆ¶</h2><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id="slider-control"&gt;</span><br><span class="line">  &lt;a href="#native" class="active"&gt;</span><br><span class="line">    &lt;div class="dot"&gt;&lt;/div&gt;</span><br><span class="line">  &lt;/a&gt;</span><br><span class="line"></span><br><span class="line">  &lt;a href="#touch"&gt;</span><br><span class="line">    &lt;div class="dot"&gt;&lt;/div&gt;</span><br><span class="line">  &lt;/a&gt;</span><br><span class="line"></span><br><span class="line">  &lt;a href="#async"&gt;</span><br><span class="line">    &lt;div class="dot"&gt;&lt;/div&gt;</span><br><span class="line">  &lt;/a&gt;</span><br><span class="line"></span><br><span class="line">  &lt;a href="#flex"&gt;</span><br><span class="line">    &lt;div class="dot"&gt;&lt;/div&gt;</span><br><span class="line">  &lt;/a&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>
<p>è®©å®ƒä»¬position: fixed, æ•ˆæœå‚è€ƒï¼š</p>
<p><img src="http://ww3.sinaimg.cn/large/c5ee78b5gw1f06g8ze3fhj20yo0pw76w.jpg" alt="movement control"></p>
<h2 id="overlay_å¹³æ»‘è¿‡æ¸¡">overlay å¹³æ»‘è¿‡æ¸¡</h2><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;section&gt;</span><br><span class="line">    &lt;div class="container" id="intro-section"&gt;</span><br><span class="line">    &lt;div class="overlay"&gt;&lt;/div&gt;</span><br><span class="line">    &lt;h1&gt;I Love React&lt;/h1&gt;</span><br><span class="line">    &lt;p&gt;I just want to see the so-called live-coding&lt;/p&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/section&gt;</span><br></pre></td></tr></table></figure>
<p>å°†æœ€ä¸Šé¢çš„containerçš„èƒŒæ™¯è®¾ç½®ä¸ºå›¾ç‰‡èƒŒæ™¯ï¼Œ ç„¶åä¸­é—´åŠ ä¸€ä¸ªdiv.overlayçš„div, ç„¶åé€šè¿‡æ¸å˜è®¾ç½®å…¶èƒŒæ™¯ä¸ºä¸»èƒŒæ™¯é¢œè‰²ã€‚</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="preprocessor">#intro-section&#123;</span></span><br><span class="line">  background-image: url(../image/background.jpg);</span><br><span class="line">  background-size: cover;</span><br><span class="line">  background-position: center;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="preprocessor">#intro-section h1, p&#123;</span></span><br><span class="line">  position: relative;</span><br><span class="line">  z-index: <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.overlay&#123;</span><br><span class="line">  position: absolute;</span><br><span class="line">  top: <span class="number">0</span>;</span><br><span class="line">  left: <span class="number">0</span>;</span><br><span class="line">  width: <span class="number">100</span>%;</span><br><span class="line">  height: <span class="number">100</span>%;</span><br><span class="line">  background-image: linear-gradient(rgba(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>),rgba(<span class="number">22</span>, <span class="number">21</span>, <span class="number">37</span>, <span class="number">1</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="http://ww4.sinaimg.cn/large/c5ee78b5gw1f06lr99d5xj21kw0q47cw.jpg" alt="overlay"></p>
<h2 id="å‚è€ƒèµ„æ–™">å‚è€ƒèµ„æ–™</h2><ul>
<li><a href="http://hex2rgba.devoth.com/" target="_blank" rel="external">hex to rgba online converter</a></li>
<li><a href="https://github.com/luckymore0520/sike-react-ilovereact" target="_blank" rel="external">ilovereact</a></li>
<li><a href="http://gugugupan.github.io/sike-react-ilovereact/" target="_blank" rel="external">æœ€åæˆå“æ•ˆæœilovereactï¼æ·»åŠ åŠ¨ç”»</a></li>
<li><a href="https://github.com/gugugupan/sike-react-ilovereact/blob/master/index.html" target="_blank" rel="external">ä¸Šé¢githubé¡¹ç›®çš„index.html</a></li>
</ul>
<blockquote>
<p>åè®°ï¼š æ¬¢è¿åŠ å…¥æˆ‘çš„ç§äººå…¬ä¼—å·ï¼Œ å’Œä½ åˆ†äº«æˆ‘æ€è€ƒçš„è§‚ç‚¹å’Œæ–‡ç« ï¼š<br><img src="http://ww2.sinaimg.cn/large/c5ee78b5gw1ezbljkk2apj20by0byq3q.jpg" alt="å…¬ä¼—å·äºŒç»´ç "></p>
</blockquote>
]]></content>
    <summary type="html">
    <![CDATA[<p>åœ¨ä½¿ç”¨positionç­‰csså±æ€§çš„æ—¶å€™ä¼šç»å¸¸åœ¨â€™absoluteâ€™,â€™relativeâ€™å’Œâ€™staticâ€™ä¸Šè¿›å‘ã€‚ æœ¬æ–‡ä»å®æˆ˜çš„è§’åº¦ä»‹ç»positionçš„å„ç§åº”ç”¨å’Œå¦‚ä½•æ·»åŠ ä¸€å±‚ä¼˜é›…çš„æ¸å˜èƒŒæ™¯è¿‡æ¸¡å±‚ã€‚</p>]]>
    
    </summary>
    
      <category term="web design" scheme="http://chocoluffy.com/tags/web-design/"/>
    
      <category term="æŠ€æœ¯" scheme="http://chocoluffy.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[æ—¶é—´çŸ¥é“[æŒç»­æ›´æ–°...]]]></title>
    <link href="http://chocoluffy.com/2016/01/12/%E6%97%B6%E9%97%B4%E7%9F%A5%E9%81%93-%E6%8C%81%E7%BB%AD%E6%9B%B4%E6%96%B0/"/>
    <id>http://chocoluffy.com/2016/01/12/æ—¶é—´çŸ¥é“-æŒç»­æ›´æ–°/</id>
    <published>2016-01-12T17:46:57.000Z</published>
    <updated>2016-02-26T00:39:31.000Z</updated>
    <content type="html"><![CDATA[<p>å› ä¸ºï¼Œ åªæœ‰æ—¶é—´çŸ¥é“ã€‚</p>
<a id="more"></a>
<h2 id="æŠ€æœ¯">æŠ€æœ¯</h2><ul>
<li><a href="http://hanhailong.com/" target="_blank" rel="external">éŸ©æµ·é¾™çš„æŠ€æœ¯åšå®¢(Android\IOS)</a></li>
<li><a href="http://jinglei.me/" target="_blank" rel="external">è†é›·çš„æŠ€æœ¯åšå®¢(React\Meteor)</a></li>
<li><a href="http://ramiro.org/vis/hn-most-linked-books-unique-users/" target="_blank" rel="external">Hacker Newsä¸Šè¯„ä»·æœ€é«˜çš„ä¹¦</a></li>
<li><a href="http://www.yehbeats.com/" target="_blank" rel="external">YeHbeatsçš„æŠ€æœ¯åšå®¢(Python\Hexo)</a></li>
<li><a href="http://zyden.vicp.cc/#blog" target="_blank" rel="external">Dençš„æŠ€æœ¯åšå®¢(Swift\Design)</a></li>
<li><a href="http://aljun.me/" target="_blank" rel="external">Aljunçš„åšå®¢(Python)</a></li>
</ul>
<h2 id="æ–‡å­—">æ–‡å­—</h2><ul>
<li><a href="http://think-different-8.lofter.com/view" target="_blank" rel="external">ä½™èˆœå“²çš„lofterè¶³è¿¹</a></li>
</ul>
]]></content>
    <summary type="html">
    <![CDATA[<p>å› ä¸ºï¼Œ åªæœ‰æ—¶é—´çŸ¥é“ã€‚</p>]]>
    
    </summary>
    
      <category term="æ”¶è—å¸–" scheme="http://chocoluffy.com/tags/%E6%94%B6%E8%97%8F%E5%B8%96/"/>
    
      <category term="åŸåˆ›" scheme="http://chocoluffy.com/categories/%E5%8E%9F%E5%88%9B/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[Flexbox website layout - Intro]]></title>
    <link href="http://chocoluffy.com/2016/01/12/Flexbox-website-layout-Intro/"/>
    <id>http://chocoluffy.com/2016/01/12/Flexbox-website-layout-Intro/</id>
    <published>2016-01-12T17:00:52.000Z</published>
    <updated>2016-01-26T22:43:07.000Z</updated>
    <content type="html"><![CDATA[<p>My first attempt to build up a responsive website using Flexbox layout. Check <a href="http://chocoluffy.com/flex-layout/">Live Demo</a> here!</p>
<a id="more"></a>
<p><img src="http://ww3.sinaimg.cn/large/c5ee78b5gw1ezx7kdisiuj21kw0r1di7.jpg" alt="overview"></p>
<p>check <a href="https://css-tricks.com/snippets/css/a-guide-to-flexbox/" target="_blank" rel="external">this post</a> on the complete guide about Flexbox layout.</p>
<blockquote>
<p>Below is the code that can be applied to many text\presentation related website. [1] font is cool and elegant. [2] layout is fast since we set div to <code>display: flex</code>. We wonâ€™t be bother to type that anymore, focusing on â€œpositionâ€ and â€œstretchâ€</p>
</blockquote>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">body</span> <span class="rules">&#123;</span><br><span class="line">  <span class="rule"><span class="attribute">background-color</span>:<span class="value"> <span class="hexcolor">#1F1E34</span></span></span>;</span><br><span class="line">  <span class="rule"><span class="attribute">color</span>:<span class="value"> <span class="hexcolor">#FFF</span></span></span>;</span><br><span class="line">  <span class="rule"><span class="attribute">font-family</span>:<span class="value"> <span class="string">"Avenir Next"</span>,</span><br><span class="line">      <span class="string">"HelveticaNeue-Light"</span>, <span class="string">"Helvetica Neue Light"</span>, <span class="string">"Helvetica Neue"</span>, Helvetica,</span><br><span class="line">      Arial, <span class="string">"Lucida Grande"</span>, sans-serif</span></span>;</span><br><span class="line">  <span class="rule"><span class="attribute">font-weight</span>:<span class="value"> <span class="number">100</span></span></span>;</span><br><span class="line">&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">h1</span> <span class="rules">&#123;</span><br><span class="line">  <span class="rule"><span class="attribute">font-size</span>:<span class="value"> <span class="number">64px</span></span></span>;</span><br><span class="line">  <span class="rule"><span class="attribute">font-weight</span>:<span class="value"> <span class="number">100</span></span></span>;</span><br><span class="line">&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">h2</span> <span class="rules">&#123;</span><br><span class="line">  <span class="rule"><span class="attribute">font-size</span>:<span class="value"> <span class="number">48px</span></span></span>;</span><br><span class="line">  <span class="rule"><span class="attribute">font-weight</span>:<span class="value"> <span class="number">100</span></span></span>;</span><br><span class="line">&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">p</span> <span class="rules">&#123;</span><br><span class="line">  <span class="rule"><span class="attribute">font-size</span>:<span class="value"> <span class="number">24px</span></span></span>;</span><br><span class="line">&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">a</span> <span class="rules">&#123;</span><br><span class="line">  <span class="rule"><span class="attribute">font-weight</span>:<span class="value"> <span class="number">400</span></span></span>;</span><br><span class="line">  <span class="rule"><span class="attribute">color</span>:<span class="value"> <span class="hexcolor">#FFF</span></span></span>;</span><br><span class="line">&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="rule"><span class="attribute">a</span>:<span class="value">hover &#123;</span><br><span class="line">  font-weight: <span class="number">400</span></span></span>;</span><br><span class="line">  <span class="rule"><span class="attribute">color</span>:<span class="value"> <span class="hexcolor">#DADADA</span></span></span>;</span><br><span class="line">  <span class="rule"><span class="attribute">text-decoration</span>:<span class="value"> none</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>especially the font, it is so beautiful!</p>
<p>These units are vh (viewport height), vw (viewport width), vmin (viewport minimum length) and vmax (viewport maximum length). we set the vh to 100 like this:<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="class">.container</span> <span class="rules">&#123;</span><br><span class="line">  <span class="rule"><span class="attribute">flex-direction</span>:<span class="value"> column</span></span>;</span><br><span class="line">  <span class="rule"><span class="attribute">align-items</span>:<span class="value"> center</span></span>;</span><br><span class="line">  <span class="rule"><span class="attribute">justify-content</span>:<span class="value"> center</span></span>;</span><br><span class="line">  <span class="rule"><span class="attribute">height</span>:<span class="value"> <span class="number">100vh</span></span></span>;</span><br><span class="line">&#125;</span></span><br></pre></td></tr></table></figure></p>
<p>for the parent div container, since we want that parent div can take up a viewport height. vh stands for â€œviewport heightâ€</p>
<blockquote>
<p>Note that <code>flex-direction</code> indicate itemsâ€™ aligning, rows or columns. Then <code>align-items</code> means main-axis and <code>justify-content</code> is for sub-axis.</p>
</blockquote>
<h2 id="flex">flex</h2><p>åœ¨ä½¿ç”¨ ReactNative æ—¶ä½ ä¼šç»å¸¸çœ‹åˆ°ä¸€ä¸ªç¥ç§˜çš„è®¾å®š flex: 1ï¼Œç”¨äº†æ¥æ‰©å¤§ä¸€ä¸ª flexboxã€‚flex æ˜¯ä¸€ä¸ªç®€å†™ï¼ŒåŒæ—¶è®¾ç½® flex-growï¼Œflex-shrink å’Œ flex-basis ä¸‰ä¸ªå±æ€§ã€‚å®ƒä»¬çš„é»˜è®¤å€¼ä¸ºï¼š</p>
 <figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">flex: <span class="number">0</span> <span class="number">1</span> <span class="keyword">auto</span>;</span><br><span class="line"><span class="comment">/*</span><br><span class="line">flex-grow: 0;</span><br><span class="line">flex-shrink: 1;</span><br><span class="line">flex-basis: auto;</span><br><span class="line">*/</span></span><br></pre></td></tr></table></figure>
<p>flex: 1 æ„ä¸º flex: 1 1 auto</p>
<h2 id="Summary_For_All">Summary For All</h2><p>basically using some flex-related properties to structure the whole website.</p>
<p>[1] to formate those section-like website, need to use <code>section</code> tag in html file and set the corresponding containter to be <code>100vh</code> which means the viewport height, so that each section can be strecthed to adapt to your screen height. (which is pretty elegant)</p>
<p>we usually use </p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="rule"><span class="attribute">flex-direction</span>:<span class="value"> column</span></span>;</span><br><span class="line"><span class="rule"><span class="attribute">align-items</span>:<span class="value"> center</span></span>;</span><br><span class="line"><span class="rule"><span class="attribute">justify-content</span>:<span class="value"> center</span></span>;</span><br></pre></td></tr></table></figure>
<p>these properties as containerâ€™s property.</p>
<blockquote>
<p>Note that we have main-axis and sub-axis, which will help you position the items by <code>align-items: center;
  justify-content: center;</code></p>
</blockquote>
<p>[2] structure inside each section. we may use another flexbox container inside one parent container to hold up more items like navigation or some scrum-map. And in this way, the <code>flex-direction</code> may usually be the opposite to the parent container. For the child container, we may wonder to stretch the block to whatever proportion to the whole layout. we want to use<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="rule"><span class="attribute">flex-grow</span>:<span class="value"> <span class="number">1</span></span></span>;</span><br><span class="line"><span class="rule"><span class="attribute">flex-basis</span>:<span class="value"> <span class="number">0</span></span></span>;</span><br><span class="line"><span class="rule"><span class="attribute">align-self</span>:<span class="value"> stretch</span></span>;</span><br></pre></td></tr></table></figure></p>
<p>which also applies the same logic from main-axis and sub-axis when setting their values.</p>
<p>Note that the <code>flex-basis</code> is pretty useful when you try to eliminate the effect of inner text to the block when stretching since <code>align-self: stretch</code> ONLY stretch the empty space to full length!</p>
<blockquote>
<p>åè®°ï¼š æ¬¢è¿åŠ å…¥æˆ‘çš„ç§äººå…¬ä¼—å·ï¼Œ å’Œä½ åˆ†äº«æˆ‘æ€è€ƒçš„è§‚ç‚¹å’Œæ–‡ç« ï¼š<br><img src="http://ww2.sinaimg.cn/large/c5ee78b5gw1ezbljkk2apj20by0byq3q.jpg" alt="å…¬ä¼—å·äºŒç»´ç "></p>
</blockquote>
]]></content>
    <summary type="html">
    <![CDATA[<p>My first attempt to build up a responsive website using Flexbox layout. Check <a href="http://chocoluffy.com/flex-layout/">Live Demo</a> here!</p>]]>
    
    </summary>
    
      <category term="web design" scheme="http://chocoluffy.com/tags/web-design/"/>
    
      <category term="æŠ€æœ¯" scheme="http://chocoluffy.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
  </entry>
  
</feed>
