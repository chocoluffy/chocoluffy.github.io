<!doctype html>



  


<html class="theme-next mist use-motion">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">



<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">



  <meta name="google-site-verification" content="O92Q-a9Vf5dWXDW5Df-7NMxOta1TkJyuJddQxTM-n4U">




  <meta name="baidu-site-verification" content="4TeaTL6Cbs">







  
  
    
  
  <link href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.5/jquery.fancybox.css" rel="stylesheet" type="text/css">




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






  

<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.4.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.0.1" rel="stylesheet" type="text/css">


  <link rel="amphtml" href="./amp/index.html">



  <meta name="keywords" content="javascript,nodejs,AWS,">





  <link rel="alternate" href="/atom.xml" title="ä½™èˆœå“²çš„ One Piece" type="application/atom+xml">




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.png?v=5.0.1">






<meta name="description" content="æœ¬æ–‡å¯¹ç›®å‰å¸‚é¢ä¸Šçš„ä¸»æµPaas(platform as a service)æä¾›å•†è¿›è¡Œäº†æ¯”è¾ƒï¼Œ æ¯”å¦‚herokuå’Œamazonå®¶çš„æ–°æ˜Ÿelastic beanstalkã€‚å¹¶ä»¥ä¸€ä¸ªnodejsçˆ¬è™«çš„å®ä¾‹éƒ¨ç½²åœ¨äº†ebçš„æœåŠ¡å™¨ä¸Šã€‚å¾ˆå¤šå…³äºæœåŠ¡å™¨ç«¯çš„æ¦‚å¿µä¹Ÿå› æ­¤ç†æ¸…äº†ï¼Œ æ¯”å¦‚reverse proxy server, dynamic IP addressingå’Œåç«¯çš„ä¸€äº›é…ç½®ã€‚ä¹Ÿåœ¨æ–‡ç« ä¸­åšä¸ªå°ç»“ï¼Œ åˆ†äº«ç»™æ„Ÿ">
<meta name="keywords" content="javascript,nodejs,AWS">
<meta property="og:type" content="article">
<meta property="og:title" content="AWS elastic beanstalkä½¿ç”¨ä½“éªŒ">
<meta property="og:url" content="http://chocoluffy.com/2016/05/04/AWS-elastic-beanstalkä½¿ç”¨ä½“éªŒ/index.html">
<meta property="og:site_name" content="ä½™èˆœå“²çš„ One Piece">
<meta property="og:description" content="æœ¬æ–‡å¯¹ç›®å‰å¸‚é¢ä¸Šçš„ä¸»æµPaas(platform as a service)æä¾›å•†è¿›è¡Œäº†æ¯”è¾ƒï¼Œ æ¯”å¦‚herokuå’Œamazonå®¶çš„æ–°æ˜Ÿelastic beanstalkã€‚å¹¶ä»¥ä¸€ä¸ªnodejsçˆ¬è™«çš„å®ä¾‹éƒ¨ç½²åœ¨äº†ebçš„æœåŠ¡å™¨ä¸Šã€‚å¾ˆå¤šå…³äºæœåŠ¡å™¨ç«¯çš„æ¦‚å¿µä¹Ÿå› æ­¤ç†æ¸…äº†ï¼Œ æ¯”å¦‚reverse proxy server, dynamic IP addressingå’Œåç«¯çš„ä¸€äº›é…ç½®ã€‚ä¹Ÿåœ¨æ–‡ç« ä¸­åšä¸ªå°ç»“ï¼Œ åˆ†äº«ç»™æ„Ÿ">
<meta property="og:locale" content="zh-Hans">
<meta property="og:updated_time" content="2018-12-15T15:58:48.784Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="AWS elastic beanstalkä½¿ç”¨ä½“éªŒ">
<meta name="twitter:description" content="æœ¬æ–‡å¯¹ç›®å‰å¸‚é¢ä¸Šçš„ä¸»æµPaas(platform as a service)æä¾›å•†è¿›è¡Œäº†æ¯”è¾ƒï¼Œ æ¯”å¦‚herokuå’Œamazonå®¶çš„æ–°æ˜Ÿelastic beanstalkã€‚å¹¶ä»¥ä¸€ä¸ªnodejsçˆ¬è™«çš„å®ä¾‹éƒ¨ç½²åœ¨äº†ebçš„æœåŠ¡å™¨ä¸Šã€‚å¾ˆå¤šå…³äºæœåŠ¡å™¨ç«¯çš„æ¦‚å¿µä¹Ÿå› æ­¤ç†æ¸…äº†ï¼Œ æ¯”å¦‚reverse proxy server, dynamic IP addressingå’Œåç«¯çš„ä¸€äº›é…ç½®ã€‚ä¹Ÿåœ¨æ–‡ç« ä¸­åšä¸ªå°ç»“ï¼Œ åˆ†äº«ç»™æ„Ÿ">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Mist',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 10766069,
      author: 'åšä¸»'
    }
  };
</script>

  <title> AWS elastic beanstalkä½¿ç”¨ä½“éªŒ | ä½™èˆœå“²çš„ One Piece </title>
</head>

<body itemscope="" itemtype="http://schema.org/WebPage" lang="zh-Hans">

  


<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', '66874854-1', 'auto');
  ga('send', 'pageview');
</script>




  <script type="text/javascript">
    (function() {
      var hm = document.createElement("script");
      hm.src = "//tajs.qq.com/stats?sId=56472517";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>






  
  
    
  

  <div class="container one-collumn sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope="" itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">ä½™èˆœå“²çš„ One Piece</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle"></p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            é¦–é¡µ
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tech">
          <a href="/tech" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-battery-full"></i> <br>
            
            æŠ€æœ¯
          </a>
        </li>
      
        
        <li class="menu-item menu-item-life">
          <a href="/life" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-book"></i> <br>
            
            éšç¬”
          </a>
        </li>
      
        
        <li class="menu-item menu-item-books">
          <a href="/books" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-bookmark"></i> <br>
            
            ä¹¦æˆ¿
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            å½’æ¡£
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br>
            
            å…³äº
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="#" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>
            
            æœç´¢
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup">
 <span class="search-icon fa fa-search"></span>
 <input type="text" id="local-search-input">
 <div id="local-search-result"></div>
 <span class="popup-btn-close">close</span>
</div>


    </div>
  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  
  

  
  
  

  <article class="post post-type-normal " itemscope="" itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                AWS elastic beanstalkä½¿ç”¨ä½“éªŒ
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">å‘è¡¨äº</span>
            <time itemprop="dateCreated" datetime="2016-05-04T21:03:58-04:00" content="2016-05-04">
              2016-05-04
            </time>
          </span>

          
            <span class="post-category">
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
                <span itemprop="about" itemscope="" itemtype="https://schema.org/Thing">
                  <a href="/categories/æŠ€æœ¯/" itemprop="url" rel="index">
                    <span itemprop="name">æŠ€æœ¯</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/05/04/AWS-elastic-beanstalkä½¿ç”¨ä½“éªŒ/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2016/05/04/AWS-elastic-beanstalkä½¿ç”¨ä½“éªŒ/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          
             <span id="/2016/05/04/AWS-elastic-beanstalkä½¿ç”¨ä½“éªŒ/" class="leancloud_visitors" data-flag-title="AWS elastic beanstalkä½¿ç”¨ä½“éªŒ">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">é˜…è¯»æ¬¡æ•° </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

          
          <span class="post-visit">
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">é˜…è¯»æ¬¡æ•°</span>
              <span class="busuanzi-value" id="busuanzi_value_page_pv"></span>
              </span>
          
          

          
          <span>
            &nbsp; | &nbsp;
            <span class="post-meta-item-icon">
              <i class="fa fa-clock-o"></i>
            </span>
            <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿</span>
            <span class="post-count">12 åˆ†é’Ÿ</span>
          </span>
          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>æœ¬æ–‡å¯¹ç›®å‰å¸‚é¢ä¸Šçš„ä¸»æµPaas(platform as a service)æä¾›å•†è¿›è¡Œäº†æ¯”è¾ƒï¼Œ æ¯”å¦‚herokuå’Œamazonå®¶çš„æ–°æ˜Ÿelastic beanstalkã€‚å¹¶ä»¥ä¸€ä¸ªnodejsçˆ¬è™«çš„å®ä¾‹éƒ¨ç½²åœ¨äº†ebçš„æœåŠ¡å™¨ä¸Šã€‚å¾ˆå¤šå…³äºæœåŠ¡å™¨ç«¯çš„æ¦‚å¿µä¹Ÿå› æ­¤ç†æ¸…äº†ï¼Œ æ¯”å¦‚reverse proxy server, dynamic IP addressingå’Œåç«¯çš„ä¸€äº›é…ç½®ã€‚ä¹Ÿåœ¨æ–‡ç« ä¸­åšä¸ªå°ç»“ï¼Œ åˆ†äº«ç»™æ„Ÿå…´è¶£çš„å¤§å®¶ã€‚</p>
<a id="more"></a>
<h2 id="æ¦‚è§ˆ"><a href="#æ¦‚è§ˆ" class="headerlink" title="æ¦‚è§ˆ"></a>æ¦‚è§ˆ</h2><p>å°†ä¹‹å‰ç”¨nodejså†™çš„å¯¹<a href="https://cnodejs.org/?tab=good" target="_blank" rel="noopener">cnodeç¤¾åŒºç²¾åå¸–</a>çš„çˆ¬è™«æ”¾åœ¨AWSçš„EC2 instanceä¸‹ç®¡ç†ï¼Œ åˆ©ç”¨elastic beanstalkæ¥å¯¹AWSèµ„æºè¿›è¡Œåˆ†é…å’Œè°ƒæ§ï¼Œ ç”±äºä½¿ç”¨çš„è¿˜æ˜¯free-tierçš„single instanceï¼Œ åˆ™elastic beanstalkæ‰€ç‰¹æœ‰çš„load-balancingçš„ä¼˜åŠ¿æ²¡æœ‰åŠæ³•äº«å—åˆ°ã€‚</p>
<p>ä¸€å¼€å§‹å¦‚æœç›´æ¥æŒ‰ç…§AWSç»™çš„æ–¹æ³•, <code>eb init</code>åˆå§‹åŒ–ä¸€ä¸ªelastic beanstalkçš„é¡¹ç›®ï¼Œ <code>eb create</code>åˆ›å»ºä¸€ä¸ªenvironmentå’Œä¸€ä¸ªEC2å®ä¾‹, ç„¶å<code>eb deploy</code>å°†.gité‡Œé¢committedçš„æ”¹åŠ¨pushåˆ°elastic beanstalkçš„ç”Ÿäº§ç¯å¢ƒé‡Œé¢ï¼Œ ç„¶åç”¨<code>eb open</code>æ¥æ‰“å¼€è¿™ä¸ªIP addressï¼Œ å¦‚æœä¹‹åéœ€è¦ç»ˆæ­¢è¿™ä¸ªappçš„è¯ï¼Œ å°±<code>eb terminate</code>å°±å¥½äº†ã€‚</p>
<p>å¦‚æœä¹‹å‰æœ‰ä½¿ç”¨herokuçš„ç»éªŒçš„è¯ï¼Œ å…¶å®ä½ ä¼šå‘ç°å…¶å®amazon elastic beanstalkå’Œherokuæä¾›çš„æœåŠ¡éå¸¸ç›¸ä¼¼ï¼Œ å®é™…ä¸Šï¼Œ å°±è¿™ä¸¤å®¶æœåŠ¡çš„å®šä½è€Œè¨€ï¼Œ éƒ½æ˜¯platform as a serviceï¼ˆPaasï¼‰ï¼Œ ä¹Ÿå°±æ˜¯è®©developerå¯ä»¥å°†ç½‘ç«™ï¼Œ ç§»åŠ¨ç«¯éƒ¨ç½²åœ¨äº‘ç«¯(cloud)ä¸éœ€è¦é¡¾è™‘backend serverå’Œdatabaseçš„configurationã€‚ è€Œherokuæœ¬èº«ç›¸å¯¹äºå…¶ä»–å¸‚é¢ä¸Šçš„Paasåœ¨auto-scalingä¸Šåšå¾—æ›´åŠ å‡ºè‰²ï¼Œ å®ƒçš„computing resources(dyno)å¯ä»¥æŒ‰ç…§è®¡ç®—çš„éœ€æ±‚è€Œå åŠ ä»è€Œæ»¡è¶³åœ¨é«˜æµé‡ä¸‹çš„ç½‘ç«™åç«¯æµç•…è¿è¡Œã€‚è€Œè¿‘å‡ å¹´amazonçš„elastic beanstalkçš„å‡ºç°ï¼Œ åœ¨è¿™ä¸ªPaasçš„å¸‚åœºç»™æˆ‘ä»¬developerå¤šä¸€ä¸ªå¾ˆå¥½çš„é€‰æ‹©ã€‚å°±è‡ªå·±çš„ä½¿ç”¨è€Œè¨€ï¼Œ æ„Ÿè§‰ä¸¤è€…çš„command line interfaceå…¶å®è®¾è®¡å¾—å·®ä¸å¤šï¼Œ éƒ½å¾ˆç®€æ´æ–¹ä¾¿ï¼Œ ä¸è¿‡ç›¸æ¯”herokuï¼Œ amazonçš„AWSè¿˜æ¶‰åŠç§Ÿç”¨åˆ°è®¡ç®—å•å…ƒEC2, å°±é…ç½®çš„æ“ä½œæ¥è¯´ï¼Œ ä½ åœ¨é…ç½®AWSçš„æœåŠ¡ä¸Šéœ€è¦èŠ±æ›´å¤šçš„æ—¶é—´å»è®¾ç½®ç¯å¢ƒå˜é‡å’Œè€ƒè™‘å¯†é’¥å­˜å‚¨ï¼Œ æ¯•ç«Ÿä½ å¯èƒ½æœ‰æ—¶å€™æœ‰sshè¿œç¨‹ç™»é™†amazon linuxæœåŠ¡å™¨çš„éœ€æ±‚ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼Œ herokuçš„é…ç½®å°±æ˜¯å¾ˆç®€å•çš„åœ¨<code>~/.bashrc</code>æ–‡ä»¶é‡Œé¢æ·»åŠ toolbeltæ–‡ä»¶å¤¹çš„è·¯å¾„äº†ã€‚</p>
<blockquote>
<p> å…¶å®herokuå®ƒæœ¬èº«å°±æ˜¯deployåœ¨äº†AWSä¸Šçš„å‘€ğŸ˜‚ï¼Œ æ‰€ä»¥ç†è®ºä¸Šåœ¨performanceä¸Šä¸ä¼šæœ‰å¤ªå¤§çš„å·®åˆ«ã€‚</p>
</blockquote>
<p>è€Œåœ¨pricingä¸Šï¼Œ æˆ‘è®¤ä¸ºAWSçš„ä»·æ ¼å’ŒæœåŠ¡ä¼šæ›´åŠ çš„å®æƒ ï¼Œ æ¯•ç«Ÿè€ƒè™‘åˆ°ä½ æœ‰ä¸€å¼ ä¿¡ç”¨å¡å°±å¯ä»¥ç”³è¯·åˆ°ä½ ä¸€å¹´çš„free-tierçš„single instanceçš„ä½¿ç”¨æƒåˆ©ï¼Œ è€Œsingle instanceå¯¹ä¸€äº›å°å‹çš„side projectæ¥è¯´å®Œå®Œå…¨å…¨æ˜¯å¤Ÿç”¨çš„å‘€ã€‚å³ä¾¿ä¸å¤Ÿç”¨ï¼Œ æ¢æˆlarge instanceä¹Ÿæ˜¯several clicks awayï¼Œ åæ­£ä¹Ÿæ˜¯æŒ‰ç”¨é‡æ”¶è´¹ï¼Œ ç»æµå®æƒ !</p>
<h2 id="é‡åˆ°çš„é—®é¢˜"><a href="#é‡åˆ°çš„é—®é¢˜" class="headerlink" title="é‡åˆ°çš„é—®é¢˜"></a>é‡åˆ°çš„é—®é¢˜</h2><p>ç¬¬ä¸€ä¸ªä½¿ç”¨EBéƒ¨ç½²çš„åº”ç”¨æ˜¯ä¸€ä¸ªnodejsçˆ¬è™«ï¼Œ è´Ÿè´£çˆ¬å»cnodeç¤¾åŒºçš„ç²¾åå¸–ï¼Œ ç„¶åè¿”å›ä¸€ä¸ªjson objectæ”¶é›†ç²¾åå¸–çš„link, æ ‡é¢˜å’Œä½œè€…avatarï¼Œ ä¸ºäº†æ˜¾ç¤ºçš„ç›´è§‚ï¼Œ æˆ‘å¹¶æ²¡æœ‰å†™å‰ç«¯çš„æ ·å¼ï¼Œ è€Œæ˜¯ç›´æ¥<code>JSON.stringify(json)</code>ç„¶åsendä¼šæµè§ˆå™¨ã€‚ä¹‹åå¦‚æœä»…ä»…ä½œä¸ºREST APIä½¿ç”¨çš„è¯ï¼Œ è¿˜éœ€è¦åœ¨routerä¸Šä¿®é¥°ä¸€ä¸‹URLã€‚ç›®å‰è¿˜æ˜¯æœ‰ç‚¹ç²—ç³™çš„ã€‚<a href="https://github.com/AirLoft/web-scraper" target="_blank" rel="noopener">githubé“¾æ¥</a></p>
<p>ä¸€å¼€å§‹æˆ‘ç›´æ¥å°†åœ¨æœ¬åœ°localhostè¿è¡Œçš„ç‰ˆæœ¬deployåˆ°äº†elastic beanstalkä¸Šï¼Œ ç”±äºç¼ºå°‘äº†è¿™ä¸€è¡Œé…ç½®<code>var port = process.env.PORT || 3000;</code>ï¼Œ æˆ‘ç›´æ¥æŠŠportå®šåœ¨äº†3000ï¼Œ è€Œelastic beanstalkæ˜¯æœ‰åº”è¯¥å ç”¨çš„portçš„ï¼Œ æ‰€ä»¥å¾—åˆ°äº†â€œ502 bad gateway errorâ€ã€‚</p>
<p>è¿˜æœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„çš„æ˜¯<code>npm start</code>è¿™ä¸ªnpm scripté‡Œé¢çš„é…ç½®ï¼Œ AWS elastic beanstalkä¼šæ‰¾åˆ°è¿™æ¡æŒ‡ä»¤å¹¶å»æ‰§è¡Œæ¥æ‰§è¡Œç›¸åº”çš„jsæ–‡ä»¶ï¼Œ æ¯”å¦‚æˆ‘æŠŠå†™cnodeç½‘ç«™çš„çˆ¬è™«å†™åœ¨äº†cnode.jsé‡Œé¢ï¼Œ é‚£ä¹ˆæˆ‘éœ€è¦</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"scripts"</span>: &#123;</span><br><span class="line">  <span class="string">"start"</span>: <span class="string">"node cnode.js"</span></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p>æ¥ä¿è¯æœåŠ¡å™¨æ‰§è¡Œçš„æ˜¯æˆ‘å¯¹cnodeè¿™ä¸ªç½‘ç«™çš„çˆ¬è™«ã€‚</p>
<h2 id="Q-amp-A"><a href="#Q-amp-A" class="headerlink" title="Q&amp;A"></a>Q&amp;A</h2><p>ä»¥ä¸‹å†…å®¹æ˜¯æˆ‘åœ¨è‡ªå·±æŠ˜è…¾Elastic Beanstalkçš„æ—¶å€™æ”¶é›†çš„ä¸€äº›æ¯”è¾ƒç®€ç»ƒè€Œå‡†ç¡®çš„æ€»ç»“ï¼Œ åœ¨è¿™é‡Œåˆ†äº«ç»™å¤§å®¶ã€‚ å…¶å®amazonçš„AWSæ•™ç¨‹å†™å¾—éå¸¸è¯¦ç»†çš„ï¼Œ å¤§å®¶è‡ªå·±å¦‚æœæœ‰èƒ½åŠ›æœ€å¥½å»å°è¯•è‡ªå·±é˜…è¯»å’Œå®è·µå®ƒç»™çš„ä¾‹å­!</p>
<p><strong>How elastic beanstalk works?</strong><br>Now you have a web app running in AWS Elastic Beanstalk. As Elastic Beanstalk creates your environment, it <strong>interacts with several other AWS services</strong> to create the resources required to run your web app securely and resiliently.</p>
<p><strong>How EC2 instance works?</strong><br>EC2 instance â€“ A virtual machine that runs Amazon Linux or Microsoft Windows Server and that is configured to run web apps on the platform that you choose.<br>Each platform runs a different set of software, configuration files, and scripts to support a specific language version, framework, web container, or combination thereof. Most platforms <strong>use either Apache or nginx as a reverse proxy</strong> that sits in front of your web app, forwards requests to it, serves static assets, and generates access and error logs.</p>
<p><strong>What is reverse proxy server?</strong><br>A proxy server is a go-between or intermediary server that forwards requests for content from multiple clients to different servers across the Internet. A reverse proxy server is a type of proxy server that typically <strong>sits behind the firewall in a private network</strong> and directs client requests to the appropriate backend server. A reverse proxy provides an additional level of abstraction and control to ensure the smooth flow of network traffic between clients and servers.</p>
<p>Common uses for a reverse proxy server include:</p>
<ul>
<li>Load balancing â€“ A reverse proxy server can act as a â€œtraffic cop,â€ sitting in front of your backend servers and distributing client requests across a group of servers in a manner that maximizes speed and capacity utilization while ensuring no one server is overloaded, which can degrade performance. If a server goes down, the load balancer redirects traffic to the remaining online servers.</li>
<li>Web acceleration â€“ Reverse proxies can compress inbound and outbound data, as well as cache commonly requested content, both of which speed up the flow of traffic between clients and servers. They can also perform additional tasks such as SSL encryption to take load off of your web servers, thereby boosting their performance.</li>
<li>Security and anonymity â€“ By intercepting requests headed for your backend servers, a reverse proxy server protects their identities and acts as an additional defense against security attacks. It also ensures that multiple servers can be accessed from a single record locator or URL regardless of the structure of your local area network.</li>
</ul>
<p><strong>What is amazon s3 bucket?</strong><br>Amazon S3 bucket â€“ A storage location for your source code, logs, and other artifacts that are created when you use Elastic Beanstalk.</p>
<p><strong>How your domain will look like?</strong><br>Domain name â€“ A domain name that routes to your web app in the form subdomain.region.elasticbeanstalk.com.</p>
<p><strong>When should I use AWS Lambda versus Amazon EC2?</strong></p>
<p>Amazon Web Services offers a set of compute services to meet a range of needs.</p>
<p>Amazon EC2 offers flexibility, with a wide range of instance types and the option to customize the operating system, network and security settings, and the entire software stack, allowing you to easily move existing applications to the cloud. With Amazon EC2 you are responsible for provisioning capacity, monitoring fleet health and performance, and designing for fault tolerance and scalability. AWS Elastic Beanstalk offers an easy-to-use service for deploying and scaling web applications in which you retain ownership and full control over the underlying EC2 instances. Amazon EC2 Container Service is a scalable management service that supports Docker containers and allows you to easily run distributed applications on a managed cluster of Amazon EC2 instances.<br>AWS Lambda makes it easy to execute code in response to events, such as changes to Amazon S3 buckets, updates to an Amazon DynamoDB table, or custom events generated by your applications or devices. With Lambda you do not have to provision your own instances; Lambda performs all the operational and administrative activities on your behalf, including capacity provisioning, monitoring fleet health, applying security patches to the underlying compute resources, deploying your code, running a web service front end, and monitoring and logging your code. AWS Lambda provides easy scaling and high availability to your code without additional effort on your part.</p>
<p><strong>To create a hosted zone in Amazon Route 53</strong></p>
<ul>
<li>Open the Amazon Route 53 management console.</li>
<li>Choose Hosted Zones.</li>
<li>Choose Create Hosted Zone.</li>
</ul>
<p>For Domain Name, type the domain name that you own. For example: example.com.</p>
<p>Choose Create.</p>
<p>Next, add a CNAME record to the hosted zone. A CNAME record registers a domain name that you own as an alias of your web app environmentâ€™s elasticbeanstalk.com subdomain.</p>
<p>When an Amazon Route 53 DNS server receives a name request for your custom domain name, it resolves to the elasticbeanstalk.com subdomain, which resolves to the public DNS name of your Elastic Load Balancing load balancer, which resolves to your web appâ€™s IP address.</p>
<p>Note<br>In a single-instance environment, the elasticbeanstalk.com subdomain resolves to an Elastic IP address attached to the instance running your web app.</p>
<p><strong>å…³äºelastic beanstalkçš„ä»·æ ¼</strong><br>æœ‰å°ä¼™ä¼´åœ¨commenté‡Œé¢æé—®ï¼Œ å¦‚æœç”¨å®Œäº†ä¸€å¹´çš„free-tierçš„è¯ï¼Œ ä»·æ ¼æ€ä¹ˆè®¡ç®—å‘¢? å¯ä»¥å‚è€ƒä¸‹amazonçš„<a href="https://aws.amazon.com/elasticbeanstalk/pricing/" target="_blank" rel="noopener">è¿™ç¯‡ä»‹ç»</a>é‡Œé¢è¯¦ç»†è®°å½•äº†EC2, S3, DBç­‰ç­‰AWSç›¸å…³æœåŠ¡çš„ä»·æ ¼ã€‚å¦‚æœæ˜¯ä¸ªäººçš„side project, å¯¹CPUå’Œå›¾ç‰‡ç­‰ç”¨æˆ·ä¿¡æ¯å­˜å‚¨çš„éœ€æ±‚ä¸æ˜¯ç‰¹åˆ«å¤§çš„è¯ï¼Œ å…è´¹çš„planæˆ–è€…æ˜¯microçš„instanceæ˜¯å®Œå…¨å¤Ÿç”¨çš„ï¼Œ å¦‚æœæ˜¯åœ¨æŸæ–¹é¢çš„éœ€æ±‚ç‰¹åˆ«å¤§ï¼Œ æ¯”å¦‚è¯´unsplashè¿™ä¸ªé«˜æ¸…æ‘„å½±å›¾ç‰‡åˆ†äº«çš„ç¤¾åŒºã€‚</p>
<p> unsplashå°†ç”¨æˆ·ä¸Šä¼ çš„ç…§ç‰‡å­˜å‚¨åœ¨Amazonçš„S3æœåŠ¡ä¸Šä¼šæ¯”è¾ƒå®‰å…¨å’Œä¾¿æ·ï¼Œ(æ­é…ç€Imgixè¿™ä¸ªserviceä½¿ç”¨)ï¼Œ å…·ä½“çš„ç½‘ç«™èŠ±é”€å¯ä»¥å‚è€ƒ<a href="http://backstage.crew.co/what-does-unsplash-cost/" target="_blank" rel="noopener">è¿™ç¯‡åšæ–‡</a>ï¼Œ é‡Œé¢è®°å½•äº†unsplashä¸€ä¸ªæœˆç½‘ç«™ä½¿ç”¨çš„å„ç§æœåŠ¡çš„æ˜ç»†è®°å½•ï¼Œ ä¹Ÿå¯ä»¥ç»™ä¸€äº›å¸Œæœ›åšå›¾ç‰‡åˆ†äº«ç¤¾åŒºçš„åˆ›ä¸šè€…ä»¬ä¸€ä¸ªå‚è€ƒã€‚ä¸€ä¸ªå€¼å¾—æ³¨æ„çš„ç‚¹æ˜¯ï¼Œ unsplashçš„èŠ±é”€æ˜¯æ¯”è¾ƒé€‚åˆå€Ÿé‰´çš„ï¼Œ å› ä¸ºunsplashå’Œç›®å‰è®¸å¤šçš„åˆ›ä¸šå…¬å¸ä¸€æ ·ï¼Œ é€‰æ‹©å°†è‡ªå·±çš„ä¸»æœåŠ¡hoståœ¨herokuè¿™ä¸ªå¹³å°ï¼Œ é€‰æ‹©S3ç­‰ç­‰ä¸»æµçš„æœåŠ¡ï¼Œ ä¸åƒä¸€äº›æ›´geekyçš„å…¬å¸å¯èƒ½ä¸ºäº†çœé’±å°±è‡ªå·±æ¥æ­å»ºå’Œç®¡ç†è‡ªå·±çš„æœåŠ¡å™¨å’Œæ•°æ®åº“ã€‚ å½“ç„¶ï¼Œ ç®¡ç†æˆæœ¬å’Œç»´æŠ¤æˆæœ¬éƒ½è¦è€ƒè™‘è¿›å»ï¼Œ æ‰€ä»¥ç»¼ä¸Šæˆ‘æ‰è®¤ä¸ºunsplashçš„ä¾‹å­æ˜¯éå¸¸å€¼å¾—å€Ÿé‰´çš„!</p>
<h2 id="å‚è€ƒé“¾æ¥"><a href="#å‚è€ƒé“¾æ¥" class="headerlink" title="å‚è€ƒé“¾æ¥"></a>å‚è€ƒé“¾æ¥</h2><p>ä¸‹é¢çš„é“¾æ¥æ˜¯æˆ‘åœ¨è‡ªå·±å°è¯•æ­å»ºç¯å¢ƒæ—¶å‚è€ƒçš„å†…å®¹ï¼Œ ä»¥åŠæˆ‘é€‰æ‹©free-tierçš„configurationçš„é¡µé¢ã€‚å…¶ä¸­å°±æœ‰ä»¥expressä¸ºä¾‹å­çš„æœåŠ¡ç«¯ç¯å¢ƒæ­å»ºã€‚</p>
<ul>
<li><a href="http://docs.aws.amazon.com/AWSEC2/latest/CommandLineReference/set-up-ec2-cli-linux.html#set_aes_home_linux" target="_blank" rel="noopener">setting up EC2 cli on mac</a> we store EC2 api tool, aws-access-key and aws-secret-key in <code>~/.bashrc</code>, so that we can use the shortcut commands to do <code>init\create\deploy\open</code>. The common commands are listed as followed.</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">eb init</span><br><span class="line">eb create</span><br><span class="line">eb deploy</span><br><span class="line">eb open</span><br></pre></td></tr></table></figure>
<ul>
<li><a href="https://docs.aws.amazon.com/quickstarts/latest/webapp/welcome.html" target="_blank" rel="noopener">A high level explanation of what EB does and what can we config</a> trying to give a high-level description of what is the use and purpost of each AWS service, including EC2, the reverse proxy server sitting in front of servers, router 53 and so on so forth.</li>
<li><a href="http://docs.aws.amazon.com/elasticbeanstalk/latest/dg/create_deploy_nodejs_express.html" target="_blank" rel="noopener">A detailed explanation of how to host an express app on EB full-step tutorial</a> The tutorial uses an express app to explain how to use EB.</li>
<li><a href="http://docs.aws.amazon.com/elasticbeanstalk/latest/dg/create_deploy_nodejs.html" target="_blank" rel="noopener">How to deploy a nodejs project to EB</a> similar to the previous tutorial post.</li>
<li><a href="http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/AccessingInstancesLinux.html" target="_blank" rel="noopener">how to connect to EC2 instance using ssh</a><br>by using <code>ec2-describe-instances</code>, we can get the id of my instance.</li>
</ul>
<p>So after we have created an project, we go to the elastic beanstalk console, we will see the dashboard of all the application I host on EB such as the recent one(webscraper). The following is a screen capture of the configuration of that application on EB as in a free-tier plan:<br>In this page, we can set the scaling option from single instance to load-balanced configuration, and when we add a load-balancer, it will automatically adjust the number of instances depending on the need.</p>
<p>When you turn on load balancing, Elastic Beanstalk creates a load balancer, deletes the Elastic IP address from your environment, and provisions a new EC2 instance. Elastic Beanstalk also updates DNS records to point the web appâ€™s domain name to the load balancer instead of to the IP address of a single instance.</p>

      
    </div>

    <div>
      
        
      
    </div>

    <div>
      
        
  <div style="padding: 10px 0; margin: 20px auto; width: 90%; text-align: center;">
    <div>ä¸€èµ·åŠ æ²¹ï¼</div>
    <button id="rewardButton" disable="enable" onclick="var qr = document.getElementById('QR'); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}">
      <span>èµ</span>
    </button>
    <div id="QR" style="display: none;">
      
        <div id="wechat" style="display: inline-block">
          <img id="wechat_qr" src="/images/wechatpay.png" alt="ä½™èˆœå“² WeChat Pay">
          <p>å¾®ä¿¡æ‰“èµ</p>
        </div>
      
      
    </div>
  </div>


      
    </div>

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/javascript/" rel="tag">#javascript</a>
          
            <a href="/tags/nodejs/" rel="tag">#nodejs</a>
          
            <a href="/tags/AWS/" rel="tag">#AWS</a>
          
        </div>
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2016/04/27/ç¬¬ä¸€æœŸ-AirLoftç»„ç»‡åŠ¨å‘˜å®£è¨€/" rel="next" title="[ç¬¬ä¸€æœŸ]AirLoftç»„ç»‡åŠ¨å‘˜å®£è¨€">
                <i class="fa fa-chevron-left"></i> [ç¬¬ä¸€æœŸ]AirLoftç»„ç»‡åŠ¨å‘˜å®£è¨€
              </a>
            
          </div>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2016/05/07/ä¸€æ´¾èƒ¡è¨€-ç¬¬ä¸‰æœŸ-æ°‘ä¸»çš„ä¸æ»¡/" rel="prev" title="ä¸€æ´¾èƒ¡è¨€[ç¬¬ä¸‰æœŸ]-æ°‘ä¸»çš„ä¸æ»¡">
                ä¸€æ´¾èƒ¡è¨€[ç¬¬ä¸‰æœŸ]-æ°‘ä¸»çš„ä¸æ»¡ <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      

      
        <h3> ç›¸å…³æ–‡ç« ï¼š</h3><ul class="related-posts"><li><a href="/2016/02/20/Ajax-with-Jquery-on-Nodejs-server/">Ajax(with Jquery) on Nodejs server</a></li><li><a href="/2016/05/23/socket-ioå¼€å‘å¤šäººèŠå¤©å®¤æ•™ç¨‹/">socket.ioå¼€å‘å¤šäººèŠå¤©å®¤æ•™ç¨‹</a></li><li><a href="/2016/05/15/å‰ç«¯å¼€å‘å·¥å…·åº“-ç¬¬ä¸€æœŸ-npm-script/">å‰ç«¯å¼€å‘å·¥å…·åº“[ç¬¬ä¸€æœŸ]-npm script</a></li><li><a href="/2016/03/11/MEANå…¨æ ˆå¼€å‘-ç¬¬äºŒæœŸ-å‰ç«¯å®æˆ˜æ‰‹è®°/">MEANå…¨æ ˆå¼€å‘[ç¬¬äºŒæœŸ-å‰ç«¯å®æˆ˜æ‰‹è®°]</a></li><li><a href="/2016/03/22/MEANå…¨æ ˆå¼€å‘-ç¬¬ä¸‰æœŸ-Mongoæ•°æ®åº“æ­å»ºREST-API/">MEANå…¨æ ˆå¼€å‘[ç¬¬ä¸‰æœŸ-Mongoæ•°æ®åº“æ­å»ºREST API]</a></li><li><a href="/2016/03/06/MEANå…¨æ ˆå¼€å‘-ç¬¬ä¸€æœŸ-å‰ç«¯å¸ƒå±€/">MEANå…¨æ ˆå¼€å‘[ç¬¬ä¸€æœŸ-å‰ç«¯å¸ƒå±€]</a></li><li><a href="/2015/12/30/D3js-in-3D/">D3js in 3D</a></li><li><a href="/2016/05/12/Angularå…¥é—¨-moduleå’Œservice/">Angularå…¥é—¨-moduleå’Œservice</a></li><li><a href="/2016/02/04/Responsive-web-design-ç¬¬ä¸‰æœŸ-jsåŠ¨ç”»/">Responsive web design[ç¬¬ä¸‰æœŸ]-jsåŠ¨ç”»</a></li><li><a href="/2016/01/06/Twitter-engine-in-React/">Twitter engine in React</a></li></ul>
      

      <div class="addthis_inline_share_toolbox" style="
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: -25px;
            margin-top: 30px;
           "></div>            

    </footer>
  </article>



    <div class="post-spread">
      
        <!-- Go to www.addthis.com/dashboard to customize your tools -->
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5c1469ab13400612" async="async"></script>
      
    </div>
  </div>


          </div>
          
  <div class="comments" id="comments">
    
      <div id="disqus_thread">
        <noscript>
          Please enable JavaScript to view the
          <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a>
        </noscript>
      </div>
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-overlay"></div>
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            æ–‡ç« ç›®å½•
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            ç«™ç‚¹æ¦‚è§ˆ
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel ">
        <div class="site-author motion-element" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image" src="http://ww3.sinaimg.cn/large/c5ee78b5gw1ez498sfwnuj208w08wmxt.jpg" alt="ä½™èˆœå“²">
          <p class="site-author-name" itemprop="name">ä½™èˆœå“²</p>
          <p class="site-description motion-element" itemprop="description">æŠ€æœ¯å°±æ˜¯ä¿¡ä»°</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">102</span>
              <span class="site-state-item-name">æ—¥å¿—</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              
                <span class="site-state-item-count">3</span>
                <span class="site-state-item-name">åˆ†ç±»</span>
              
            </div>
          

          
            <div class="site-state-item site-state-tags">
              
                <span class="site-state-item-count">49</span>
                <span class="site-state-item-name">æ ‡ç­¾</span>
              
            </div>
          

        </nav>

        
          <div class="feed-link motion-element">
            <a href="/atom.xml" rel="alternate">
              <i class="fa fa-rss"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/chocoluffy" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                  GitHub
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://weibo.com/chocoluffy" target="_blank" title="å¾®åš">
                  
                    <i class="fa fa-fw fa-weibo"></i>
                  
                  å¾®åš
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://www.douban.com/people/chocolufy/" target="_blank" title="è±†ç“£">
                  
                    <i class="fa fa-fw fa-book"></i>
                  
                  è±†ç“£
                </a>
              </span>
            
          
        </div>

        
        

        
        

      </section>

      
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">
            
              
            
            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#æ¦‚è§ˆ"><span class="nav-number">1.</span> <span class="nav-text">æ¦‚è§ˆ</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#é‡åˆ°çš„é—®é¢˜"><span class="nav-number">2.</span> <span class="nav-text">é‡åˆ°çš„é—®é¢˜</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Q-amp-A"><span class="nav-number">3.</span> <span class="nav-text">Q&amp;A</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#å‚è€ƒé“¾æ¥"><span class="nav-number">4.</span> <span class="nav-text">å‚è€ƒé“¾æ¥</span></a></li></ol></div>
            
          </div>
        </section>
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">
  
  &copy;  2013 - 
  <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">ä½™èˆœå“²</span>
  <span class="post-count"> | åšå®¢å…¨ç«™å…±240.3kå­—</span>
</div>

        

<div class="busuanzi-count">

  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  

  
    <span class="site-pv">ä½ æ˜¯ç¬¬<span class="busuanzi-value" id="busuanzi_value_site_pv"></span>ä¸ªå°ä¼™ä¼´</span>
  
  
</div>



        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>

  
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/fastclick/1.0.6/fastclick.min.js"></script>

  
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery_lazyload/1.9.7/jquery.lazyload.min.js"></script>

  
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/velocity/1.3.1/velocity.min.js"></script>

  
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/velocity/1.3.1/velocity.ui.min.js"></script>

  
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.5/jquery.fancybox.pack.js"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.1"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.0.1"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.0.1"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.1"></script>



  



  

    <script type="text/javascript">
      var disqus_shortname = 'chocoluffy';
      var disqus_identifier = '2016/05/04/AWS-elastic-beanstalkä½¿ç”¨ä½“éªŒ/';
      var disqus_title = 'AWS elastic beanstalkä½¿ç”¨ä½“éªŒ';
      var disqus_url = 'http://chocoluffy.com/2016/05/04/AWS-elastic-beanstalkä½¿ç”¨ä½“éªŒ/';

      function run_disqus_script(disqus_script){
        var dsq = document.createElement('script');
        dsq.type = 'text/javascript';
        dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      }

      run_disqus_script('count.js');
      
        run_disqus_script('embed.js');
      
    </script>
  



  
  
  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length == 0) {
       search_path = "search.xml";
    }
    var path = "/" + search_path;
    // monitor main search box;

    function proceedsearch() {
      $("body").append('<div class="popoverlay">').css('overflow', 'hidden');
      $('.popup').toggle();

    }
    // search function;
    var searchFunc = function(path, search_id, content_id) {
    'use strict';
    $.ajax({
        url: path,
        dataType: "xml",
        async: true,
        success: function( xmlResponse ) {
            // get the contents from search data
            isfetched = true;
            $('.popup').detach().appendTo('.header-inner');
            var datas = $( "entry", xmlResponse ).map(function() {
                return {
                    title: $( "title", this ).text(),
                    content: $("content",this).text(),
                    url: $( "url" , this).text()
                };
            }).get();
            var $input = document.getElementById(search_id);
            var $resultContent = document.getElementById(content_id);
            $input.addEventListener('input', function(){
                var matchcounts = 0;
                var str='<ul class=\"search-result-list\">';                
                var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
                $resultContent.innerHTML = "";
                if (this.value.trim().length > 1) {
                // perform local searching
                datas.forEach(function(data) {
                    var isMatch = true;
                    var content_index = [];
                    var data_title = data.title.trim().toLowerCase();
                    var data_content = data.content.trim().replace(/<[^>]+>/g,"").toLowerCase();
                    var data_url = data.url;
                    var index_title = -1;
                    var index_content = -1;
                    var first_occur = -1;
                    // only match artiles with not empty titles and contents
                    if(data_title != '' && data_content != '') {
                        keywords.forEach(function(keyword, i) {
                            index_title = data_title.indexOf(keyword);
                            index_content = data_content.indexOf(keyword);
                            if( index_title < 0 && index_content < 0 ){
                                isMatch = false;
                            } else {
                                if (index_content < 0) {
                                    index_content = 0;
                                }
                                if (i == 0) {
                                    first_occur = index_content;
                                }
                            }
                        });
                    }
                    // show search results
                    if (isMatch) {
                        matchcounts += 1;
                        str += "<li><a href='"+ data_url +"' class='search-result-title'>"+ data_title +"</a>";
                        var content = data.content.trim().replace(/<[^>]+>/g,"");
                        if (first_occur >= 0) {
                            // cut out 100 characters
                            var start = first_occur - 20;
                            var end = first_occur + 80;
                            if(start < 0){
                                start = 0;
                            }
                            if(start == 0){
                                end = 50;
                            }
                            if(end > content.length){
                                end = content.length;
                            }
                            var match_content = content.substring(start, end);
                            // highlight all keywords
                            keywords.forEach(function(keyword){
                                var regS = new RegExp(keyword, "gi");
                                match_content = match_content.replace(regS, "<b class=\"search-keyword\">"+keyword+"</b>");
                            });
                            
                            str += "<p class=\"search-result\">" + match_content +"...</p>"
                        }
                        str += "</li>";
                    }
                })};
                str += "</ul>";
                if (matchcounts == 0) { str = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>' }
                if (keywords == "") { str = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>' }
                $resultContent.innerHTML = str;
            });
            proceedsearch();
        }
    });}

    // handle and trigger popup window;
    $('.popup-trigger').mousedown(function(e) {
      e.stopPropagation();
      if (isfetched == false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };

    });

    $('.popup-btn-close').click(function(e){
      $('.popup').hide();
      $(".popoverlay").remove();
      $('body').css('overflow', '');
    });
    $('.popup').click(function(e){
      e.stopPropagation();
    });
  </script>

  
  <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });
  </script>

  <script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
      var all = MathJax.Hub.getAllJax(), i;
      for (i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';
      }
    });
  </script>
  <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>


  

  
  <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.1.js"></script>
  <script>AV.initialize("8bVuIF2Vk3EPyqe2OmRaXdgu-gzGzoHsz", "nvwBdADmn3ifRtefzQNGADue");</script>
  <script>
    function showTime(Counter) {
      var query = new AV.Query(Counter);
      var entries = [];
      var $visitors = $(".leancloud_visitors");

      $visitors.each(function () {
        entries.push( $(this).attr("id").trim() );
      });

      query.containedIn('url', entries);
      query.find()
        .done(function (results) {
          var COUNT_CONTAINER_REF = '.leancloud-visitors-count';

          if (results.length === 0) {
            $visitors.find(COUNT_CONTAINER_REF).text(0);
            return;
          }

          for (var i = 0; i < results.length; i++) {
            var item = results[i];
            var url = item.get('url');
            var time = item.get('time');
            var element = document.getElementById(url);

            $(element).find(COUNT_CONTAINER_REF).text(time);
          }
        })
        .fail(function (object, error) {
          console.log("Error: " + error.code + " " + error.message);
        });
    }

    function addCount(Counter) {
      var $visitors = $(".leancloud_visitors");
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();
      var query = new AV.Query(Counter);

      query.equalTo("url", url);
      query.find({
        success: function(results) {
          if (results.length > 0) {
            var counter = results[0];
            counter.fetchWhenSave(true);
            counter.increment("time");
            counter.save(null, {
              success: function(counter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(counter.get('time'));
              },
              error: function(counter, error) {
                console.log('Failed to save Visitor num, with error message: ' + error.message);
              }
            });
          } else {
            var newcounter = new Counter();
            /* Set ACL */
            var acl = new AV.ACL();
            acl.setPublicReadAccess(true);
            acl.setPublicWriteAccess(true);
            newcounter.setACL(acl);
            /* End Set ACL */
            newcounter.set("title", title);
            newcounter.set("url", url);
            newcounter.set("time", 1);
            newcounter.save(null, {
              success: function(newcounter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(newcounter.get('time'));
              },
              error: function(newcounter, error) {
                console.log('Failed to create');
              }
            });
          }
        },
        error: function(error) {
          console.log('Error:' + error.code + " " + error.message);
        }
      });
    }

    $(function() {
      var Counter = AV.Object.extend("Counter");
      if ($('.leancloud_visitors').length == 1) {
        addCount(Counter);
      } else if ($('.post-title-link').length > 1) {
        showTime(Counter);
      }
    });
  </script>



  
<script type="text/javascript" async src="//push.zhanzhang.baidu.com/push.js">
</script>


</body>
</html>
