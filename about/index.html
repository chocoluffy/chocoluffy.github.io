<!doctype html>



  


<html class="theme-next mist use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />



  <meta name="google-site-verification" content="O92Q-a9Vf5dWXDW5Df-7NMxOta1TkJyuJddQxTM-n4U" />










  
  
    
  
  <link href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.5/jquery.fancybox.css" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






  

<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.4.0/css/font-awesome.min.css" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.0.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="博客, 科技, 技术, 人文, 日记" />





  <link rel="alternate" href="/atom.xml" title="余舜哲的 One Piece" type="application/atom+xml" />




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.png?v=5.0.1" />






<meta name="description" content="95.11.04，现多伦多大学大三学生，主攻机器学习方向，正GAP一年在Sysomos的实验室参与数据分析挖掘的实习项目。喜欢编程，喜欢实现想法的自由。我的Github
永远年轻，永远热泪盈眶。
我觉得自己挺感性的，虽然身为一名理科学生。我喜欢海贼王，那种与伙伴并肩战斗的感觉，喜欢新闻编辑室，传统媒体在面对各种改变和挑战时那种高贵的英雄主义，喜欢巴萨，血统里优雅的足球艺术，喜欢唐吉柯德，没有从梦中">
<meta property="og:type" content="website">
<meta property="og:title" content="关于我">
<meta property="og:url" content="http://chocoluffy.com/about/index.html">
<meta property="og:site_name" content="余舜哲的 One Piece">
<meta property="og:description" content="95.11.04，现多伦多大学大三学生，主攻机器学习方向，正GAP一年在Sysomos的实验室参与数据分析挖掘的实习项目。喜欢编程，喜欢实现想法的自由。我的Github
永远年轻，永远热泪盈眶。
我觉得自己挺感性的，虽然身为一名理科学生。我喜欢海贼王，那种与伙伴并肩战斗的感觉，喜欢新闻编辑室，传统媒体在面对各种改变和挑战时那种高贵的英雄主义，喜欢巴萨，血统里优雅的足球艺术，喜欢唐吉柯德，没有从梦中">
<meta property="og:image" content="http://chocoluffy.com/AutonomousDriving/root/model:algo/result1130.gif">
<meta property="og:image" content="http://ww3.sinaimg.cn/large/006tNbRwgw1f5xu48r9gvj319a0um163">
<meta property="og:image" content="http://ww2.sinaimg.cn/large/006tNbRwgw1f56wfd2v8qg30dc0no7wz">
<meta property="og:image" content="https://zippy.gfycat.com/FancyWeeBrontosaurus.gif">
<meta property="og:image" content="https://giant.gfycat.com/DeliciousUnripeErmine.gif">
<meta property="og:image" content="http://ww1.sinaimg.cn/large/c5ee78b5gw1f1k16o74lgj21kw0s5wir.jpg">
<meta property="og:image" content="http://ww4.sinaimg.cn/large/7853084cgw1facupovsmpj21g80zkn8p.jpg">
<meta property="og:updated_time" content="2016-12-04T18:13:40.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="关于我">
<meta name="twitter:description" content="95.11.04，现多伦多大学大三学生，主攻机器学习方向，正GAP一年在Sysomos的实验室参与数据分析挖掘的实习项目。喜欢编程，喜欢实现想法的自由。我的Github
永远年轻，永远热泪盈眶。
我觉得自己挺感性的，虽然身为一名理科学生。我喜欢海贼王，那种与伙伴并肩战斗的感觉，喜欢新闻编辑室，传统媒体在面对各种改变和挑战时那种高贵的英雄主义，喜欢巴萨，血统里优雅的足球艺术，喜欢唐吉柯德，没有从梦中">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Mist',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 10766069,
      author: '萌萌哒博主'
    }
  };
</script>

  <title>
  

  
    关于我 | 余舜哲的 One Piece
  
</title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  


<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', '66874854-1', 'auto');
  ga('send', 'pageview');
</script>


  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "//hm.baidu.com/hm.js?62b2fff9ba2f591d71be23f4b51e59c6";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>



  <script type="text/javascript">
    (function() {
      var hm = document.createElement("script");
      hm.src = "//tajs.qq.com/stats?sId=56472517";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>






  
  
    
  

  <div class="container one-collumn sidebar-position-left  ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">余舜哲的 One Piece</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle"></p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tech">
          <a href="/tech" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-battery-full"></i> <br />
            
            技术
          </a>
        </li>
      
        
        <li class="menu-item menu-item-life">
          <a href="/life" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-book"></i> <br />
            
            随笔
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="#" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup">
 <span class="search-icon fa fa-search"></span>
 <input type="text" id="local-search-input">
 <div id="local-search-result"></div>
 <span class="popup-btn-close">close</span>
</div>


    </div>
  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    
    
      <p>95.11.04，现多伦多大学大三学生，主攻机器学习方向，正GAP一年在Sysomos的实验室参与数据分析挖掘的实习项目。喜欢编程，喜欢实现想法的自由。<a href="https://github.com/chocoluffy" target="_blank" rel="external">我的Github</a></p>
<p>永远年轻，永远热泪盈眶。</p>
<p>我觉得自己挺感性的，虽然身为一名理科学生。我喜欢海贼王，那种与伙伴并肩战斗的感觉，喜欢新闻编辑室，传统媒体在面对各种改变和挑战时那种高贵的英雄主义，喜欢巴萨，血统里优雅的足球艺术，喜欢唐吉柯德，没有从梦中醒来的骑士…</p>
<p>我始终相信，一个人的气质中，藏着曾经读过的书，走过的路。</p>
<p>想像路飞那样一直拼下去，当一个人有了真正想要守护的东西，他才会真正变得强大。</p>
<p>“One Piece到底存不存在，我不想知道。”</p>
<a id="more"></a>
<h2 id="My_Projects">My Projects</h2><h3 id="Autonomous_Driving_-_December_2016">Autonomous Driving - December 2016</h3><ul>
<li>A computer vision project focusing on car detection and viewpoint prediction, ten-fold cross validation accuracy achieves 94% on <a href="http://www.cvlibs.net/datasets/kitti/eval_object.php" target="_blank" rel="external">KITTI  Dataset</a></li>
<li>Raise the idea of “visual viewpoint” in extend of object’s actual viewpoint, to allow exposing more consistent features to classifiers. The highest accuracy rate among all undergraduate and graduate students so far.</li>
<li>My Idea: DPM + SVM(rbf kernel) + intense image preprocessing</li>
</ul>
<p><img src="http://chocoluffy.com/AutonomousDriving/root/model:algo/result1130.gif" style="display: block; margin: 0 auto;"></p>
<h3 id="Video_Image_SmArt_collaGE_-_August_2016">Video Image SmArt collaGE - August 2016</h3><ul>
<li>VISAGE(Video Image SmArt collaGE) aims to extract the most important scenes from a clip of social video. It composes those frames into a collage for better understanding on the video content.</li>
<li>A Computer Vision project that focuses on measuring images similarity from each frames of the video. And we designed an algorithm to measure how important one frame is from that video(roughly by how long it elapsed).</li>
<li>My Idea: openCV + FFMPEG(with ImageMagick) + python(Flask) + Jquery. </li>
</ul>
<h3 id="React_Native_EveryDay_-_Nights_in_2016">React Native EveryDay - Nights in 2016</h3><ul>
<li>A every day challenge for myself to hone my skills in mobile development, especially with React Native. Make a small but functional prototype with different interesting ideas implemented.</li>
<li>My Idea: React Native + redux.</li>
</ul>
<h3 id="Content_Recommendation_System_-_July_2016">Content Recommendation System - July 2016</h3><ul>
<li>Based on TF-IDF and cosine similarity to measure the similarity between posts, users can upload any texts to receive a matching results, which can be used for “You may also like” part in any social product.</li>
<li>Backend build with python flask, with nodejs handling user input and serving information to flask.</li>
<li>Over 66 articles from UT(University of Toronto) assistant have been processed as database seed data, and it will be updated seamlessly with authenticated upload. This system has been integrated into wechat’s public channel. <a href="https://github.com/chocoluffy/wechat_web_scraper" target="_blank" rel="external">Github Source</a></li>
</ul>
<p><img src="http://ww3.sinaimg.cn/large/006tNbRwgw1f5xu48r9gvj319a0um163" alt="demo"></p>
<h3 id="SOS(Sentiment_on_Sentences)_-_June_2016">SOS(Sentiment on Sentences) - June 2016</h3><ul>
<li>Using sentiment analysis techniques to infer user-input sentences’ sentiment on the fly. Model is pre-trained by Naive Bayes and SVM classifiers, based on twitter massive tweet data. In other words, the output sentiment results can to some extends reflect how people think over that topic currently. Super interesting!</li>
<li>Built with react native, migrated from a node.js web app. Get my hands dirty with RN’s amazing mobile support.</li>
<li>Part of my react native everyday coding challenge. <a href="https://github.com/chocoluffy/ReactNativeEveryday/tree/master/Day2Sentiment" target="_blank" rel="external">Github Source</a>.</li>
</ul>
<p><img src="http://ww2.sinaimg.cn/large/006tNbRwgw1f56wfd2v8qg30dc0no7wz" style="height: 486px;"></p>
<h3 id="AirLoft_January_-_March_2016">AirLoft  January - March 2016</h3><ul>
<li>A MEAN full-stack project for a peer sharing topic. We want you to share your habits and insights with the world around you!</li>
<li>A complete javascript stack project involving server-side Express and front-side Angular. </li>
<li>Nice display! <a href="https://github.com/chocoluffy/AirLoft" target="_blank" rel="external">Github Source</a>, <a href="https://frozen-ocean-17990.herokuapp.com/" target="_blank" rel="external">Live Demo</a>, <a href="https://www.youtube.com/watch?v=mpkWh4_-L_E" target="_blank" rel="external">Video Demo</a>.</li>
</ul>
<h3 id="Tweets_Ocean_-_Feburary_2016">Tweets Ocean - Feburary 2016</h3><ul>
<li>A hand-on Nodejs project, using Ajax to request for tweets json file and use Bootstrap\fontawesome for pretty display.</li>
<li>Involved javascript programming both client side and server side. Desire to learn more on Nodejs.</li>
<li>A elegant display with background lighthighting and informatio alert.</li>
</ul>
<p><img src="https://zippy.gfycat.com/FancyWeeBrontosaurus.gif" alt="project gif"></p>
<h3 id="NLP_on_tweets_-_Feburary_2016">NLP on tweets - Feburary 2016</h3><ul>
<li>A hand-on natual language processing project of up to 11000 tweets on sentiment analysis.</li>
<li>Involved python programming, part-of-speech(PoS) tags, machine learning with WEKA, and IBM Watson on BlueMix.</li>
<li>Finally accuracy of 67% on test data with Naive Bayes classifier.</li>
</ul>
<h3 id="Donut_Hero_-_Feburary_2016"><a href="http://chocoluffy.com/html5touch/">Donut Hero</a> - Feburary 2016</h3><ul>
<li>A html5 canvas game with fancy particle and ripple effects.</li>
<li>Fully-functional game looping logic with modular javascript files for each game components.</li>
<li><a href="https://github.com/chocoluffy/html5touch" target="_blank" rel="external">Github repo</a></li>
</ul>
<p><img src="https://giant.gfycat.com/DeliciousUnripeErmine.gif" alt="project gif"></p>
<h3 id="Virtual_Reality_World_-_January_2016"><a href="http://chocoluffy.com/d3js3D/">Virtual Reality World</a> - January 2016</h3><ul>
<li>A virtual reality website gift for my friends’ birthday!</li>
<li>Heavily use D3.js to simulate the spining bomb objects, and use Aframe.io to build the virtual scene. </li>
<li><a href="https://github.com/chocoluffy/d3js3D" target="_blank" rel="external">Github repo</a></li>
</ul>
<div style="text-align:center" markdown="1"><br>  <iframe src="http://chocoluffy.com/d3js3D/" width="100%" height="600"><br>    <p>Your browser does not support iframes.</p><br>  </iframe><br></div>

<h3 id="I_Love_React_-_January_2016"><a href="http://chocoluffy.com/flex-layout/">I Love React</a> - January 2016</h3><ul>
<li>A CommonJS modular project site, initialized as npm project.</li>
<li>Introduce Greensock.js animation library and accelerate animations with GPU.</li>
<li>A interesting attempt at ScrollMagic.js</li>
<li><a href="https://github.com/chocoluffy/flex-layout" target="_blank" rel="external">Github repo</a></li>
</ul>
<h3 id="Emocean_November_-_December_2015">Emocean November - December 2015</h3><ul>
<li>A machine learning project dedicated to recognize human facial expressions and achieves up to 82% of accuracy on <a href="http://www.aclab.ca/" target="_blank" rel="external">The Toronto Faces Dataset</a>.</li>
<li>Ranked the 6th out of about 1600 entries among all undergraduates and graduates on Kaggle website.</li>
<li>My Idea - Neural Nets on local features + SVM(with PCA) + KNN + Ensemble Methods(mixture of experts). </li>
<li>Link on the <a href="https://www.dropbox.com/s/06q1jwcvqpo3ti5/Report%20on%20Facial%20Expression%20Recognition.pdf?dl=0" target="_blank" rel="external">final paper</a></li>
</ul>
<h3 id="TalkerHub_March_–_May_2015">TalkerHub March – May 2015</h3><ul>
<li>A social media website inspired from Twitter, based on ruby on rails, hosted with Amazon S3. Users can upload their images with filters options built-in on website. Allowing users to follow other users and see their latest posts.</li>
<li>My Idea - Rails + Bootstrap + Jquery + multiple ruby gems.</li>
</ul>
<h3 id="Groomie_June_2015">Groomie June 2015</h3><ul>
<li>A search engine designed specifically for instagram feeds. Users can type in certain key words and the engine will scape related feeds(latest and most-liked) from Instagram API, and display in a more compact but elegant way.</li>
<li>My Idea - Rails + Bootstrap + Jquery + multiple ruby gems.</li>
</ul>
<p><img src="http://ww1.sinaimg.cn/large/c5ee78b5gw1f1k16o74lgj21kw0s5wir.jpg" alt="screenshot"></p>
<h2 id="My_Resume">My Resume</h2><p><img src="http://ww4.sinaimg.cn/large/7853084cgw1facupovsmpj21g80zkn8p.jpg" alt="My Resume"></p>
<p><a href="https://www.dropbox.com/s/94y6dyqgmeqpwoc/resume_Dec2016.pdf?dl=0" target="_blank" rel="external">Download it here</a></p>

    
  </div>


          </div>
          

  <p>热评文章</p>
  <div class="ds-top-threads" data-range="weekly" data-num-items="4"></div>


          
  <div class="comments" id="comments">
    
      <div class="ds-thread" data-thread-key="about/index.html"
           data-title="关于我" data-url="http://chocoluffy.com/about/index.html">
      </div>
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-overlay"></div>
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel  sidebar-panel-active ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="http://ww3.sinaimg.cn/large/c5ee78b5gw1ez498sfwnuj208w08wmxt.jpg"
               alt="余舜哲" />
          <p class="site-author-name" itemprop="name">余舜哲</p>
          <p class="site-description motion-element" itemprop="description">技术就是信仰</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">67</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              
                <span class="site-state-item-count">3</span>
                <span class="site-state-item-name">分类</span>
              
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">31</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        
          <div class="feed-link motion-element">
            <a href="/atom.xml" rel="alternate">
              <i class="fa fa-rss"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/chocoluffy" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                  GitHub
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://weibo.com/chocoluffy" target="_blank" title="微博">
                  
                    <i class="fa fa-fw fa-weibo"></i>
                  
                  微博
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://think-different-8.lofter.com/" target="_blank" title="Lofter">
                  
                    <i class="fa fa-fw fa-book"></i>
                  
                  Lofter
                </a>
              </span>
            
          
        </div>

        
        

        
        

      </section>

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy;  2013 - 
  <span itemprop="copyrightYear">2016</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">余舜哲</span>
</div>

        

<div class="busuanzi-count">

  <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  

  
    <span class="site-pv">你是第<span class="busuanzi-value" id="busuanzi_value_site_pv"></span>个小伙伴</span>
  
  
</div>



        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>

  
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/fastclick/1.0.6/fastclick.min.js"></script>

  
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery_lazyload/1.9.7/jquery.lazyload.min.js"></script>

  
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/velocity/1.3.1/velocity.min.js"></script>

  
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/velocity/1.3.1/velocity.ui.min.js"></script>

  
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.5/jquery.fancybox.pack.js"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.1"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.1"></script>



  

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"chocoluffy"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.id = 'duoshuo-script';
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>

  
    
      
      <script src="https://libraries.cdnhttps.com/ajax/libs/UAParser.js/0.7.9/ua-parser.min.js"></script>
      <script src="/js/src/hook-duoshuo.js"></script>
    
  





  
  
  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length == 0) {
       search_path = "search.xml";
    }
    var path = "/" + search_path;
    // monitor main search box;

    function proceedsearch() {
      $("body").append('<div class="popoverlay">').css('overflow', 'hidden');
      $('.popup').toggle();

    }
    // search function;
    var searchFunc = function(path, search_id, content_id) {
    'use strict';
    $.ajax({
        url: path,
        dataType: "xml",
        async: true,
        success: function( xmlResponse ) {
            // get the contents from search data
            isfetched = true;
            $('.popup').detach().appendTo('.header-inner');
            var datas = $( "entry", xmlResponse ).map(function() {
                return {
                    title: $( "title", this ).text(),
                    content: $("content",this).text(),
                    url: $( "url" , this).text()
                };
            }).get();
            var $input = document.getElementById(search_id);
            var $resultContent = document.getElementById(content_id);
            $input.addEventListener('input', function(){
                var matchcounts = 0;
                var str='<ul class=\"search-result-list\">';                
                var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
                $resultContent.innerHTML = "";
                if (this.value.trim().length > 1) {
                // perform local searching
                datas.forEach(function(data) {
                    var isMatch = true;
                    var content_index = [];
                    var data_title = data.title.trim().toLowerCase();
                    var data_content = data.content.trim().replace(/<[^>]+>/g,"").toLowerCase();
                    var data_url = data.url;
                    var index_title = -1;
                    var index_content = -1;
                    var first_occur = -1;
                    // only match artiles with not empty titles and contents
                    if(data_title != '' && data_content != '') {
                        keywords.forEach(function(keyword, i) {
                            index_title = data_title.indexOf(keyword);
                            index_content = data_content.indexOf(keyword);
                            if( index_title < 0 && index_content < 0 ){
                                isMatch = false;
                            } else {
                                if (index_content < 0) {
                                    index_content = 0;
                                }
                                if (i == 0) {
                                    first_occur = index_content;
                                }
                            }
                        });
                    }
                    // show search results
                    if (isMatch) {
                        matchcounts += 1;
                        str += "<li><a href='"+ data_url +"' class='search-result-title'>"+ data_title +"</a>";
                        var content = data.content.trim().replace(/<[^>]+>/g,"");
                        if (first_occur >= 0) {
                            // cut out 100 characters
                            var start = first_occur - 20;
                            var end = first_occur + 80;
                            if(start < 0){
                                start = 0;
                            }
                            if(start == 0){
                                end = 50;
                            }
                            if(end > content.length){
                                end = content.length;
                            }
                            var match_content = content.substring(start, end);
                            // highlight all keywords
                            keywords.forEach(function(keyword){
                                var regS = new RegExp(keyword, "gi");
                                match_content = match_content.replace(regS, "<b class=\"search-keyword\">"+keyword+"</b>");
                            });
                            
                            str += "<p class=\"search-result\">" + match_content +"...</p>"
                        }
                        str += "</li>";
                    }
                })};
                str += "</ul>";
                if (matchcounts == 0) { str = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>' }
                if (keywords == "") { str = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>' }
                $resultContent.innerHTML = str;
            });
            proceedsearch();
        }
    });}

    // handle and trigger popup window;
    $('.popup-trigger').mousedown(function(e) {
      e.stopPropagation();
      if (isfetched == false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };

    });

    $('.popup-btn-close').click(function(e){
      $('.popup').hide();
      $(".popoverlay").remove();
      $('body').css('overflow', '');
    });
    $('.popup').click(function(e){
      e.stopPropagation();
    });
  </script>

  

  

  

</body>
</html>
